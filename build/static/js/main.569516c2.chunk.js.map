{"version":3,"sources":["C:/Users/Nisse/Dropbox/nodejs/nystem-server/core/date/my-moment/index.js","core/bootstrap/component/bootstrap/dropdown.js","core/bootstrap/component/bootstrap/inputWrapper.js","core/bootstrap/component/bootstrap/panel.js","core/bootstrap/component/bootstrap/panelIcon.js","core/bootstrap/component/bootstrap/panelOpen.js","core/bootstrap/component/bootstrap/panelOpenByPath.js","core/bootstrap/component/bootstrap/panelOpenByValue.js","core/bootstrap/component/bootstrap/panelToggle.js","core/bootstrap/component/bootstrap/view.js","core/bootstrap/component/panel.js","core/bootstrap/component/panelContext.js","core/bootstrap/component/viewPanel/view.js","core/components/component/boolean/button.js","core/components/component/boolean/exposedField.js","core/components/component/boolean/fields.js","core/components/component/boolean/validate.js","core/components/component/boolean/input.js","core/components/component/boolean/name.js","core/components/component/boolean/vibrate.js","core/components/component/boolean/view.js","core/components/component/conditional/empty.js","core/components/component/conditional/int.js","core/components/component/conditional/set.js","core/components/component/conditional/userRole.js","core/components/component/conditional/valid.js","core/components/component/conditional/view.js","core/components/component/conditional/viewAndOr.js","core/components/component/dragAndDrop/myDnd.js","core/components/component/dragAndDrop/context.js","core/components/component/dragAndDrop/fixedVal.js","core/components/component/dragAndDrop/list.js","core/components/component/dragAndDrop/handle.js","core/components/component/dragAndDrop/sortable.js","core/components/component/dragAndDrop/view.js","core/components/component/dragAndDrop/viewList.js","core/components/component/email/exposedField.js","core/components/component/email/validate.js","core/components/component/email/input.js","core/components/component/email/inputNoValidation.js","core/components/component/email/link.js","core/components/component/email/mailto.js","core/components/component/email/sortBy.js","core/components/component/email/verifiedInput.js","core/components/component/email/view.js","core/components/component/flatgroup/input.js","core/components/component/float/exposedField.js","core/components/component/float/validate.js","core/components/component/float/input.js","core/components/component/float/link.js","core/components/component/float/sortBy.js","core/components/component/float/view.js","core/components/component/group/view.js","core/components/component/int/exposedField.js","core/components/component/int/validate.js","core/components/component/int/input.js","core/components/component/int/link.js","core/components/component/int/sortBy.js","core/components/component/int/view.js","core/components/component/matrix/input.js","core/components/component/matrix/inputlist.js","core/components/component/multigroup/addRemove.js","core/components/component/multigroup/copyItem.js","core/components/component/multigroup/input.js","core/components/component/multigroup/panelOpenByValue.js","core/components/component/multigroup/view.js","core/components/component/multilinetext/count.js","core/components/component/multilinetext/exposedField.js","core/components/component/multilinetext/fields.js","core/components/component/multilinetext/validate.js","core/components/component/multilinetext/input.js","core/components/component/multilinetext/inputlist.js","core/components/component/multilinetext/itemLink.js","core/components/component/multilinetext/itemText.js","core/components/component/multilinetext/list.js","core/components/component/multilinetext/view.js","core/components/component/reference/exposedField.js","core/components/component/reference/exposedFieldViews.js","core/components/component/reference/first.js","core/components/component/reference/validate.js","core/components/component/reference/input.js","core/components/component/reference/queryValue.js","core/components/component/reference/select.js","module/nystemServer/component/reference/sortable.js","core/components/component/reference/sortBy.js","core/components/component/reference/view.js","core/components/component/select/button.js","core/components/component/select/exposedField.js","core/components/component/select/validate.js","core/components/component/select/input.js","core/components/component/select/queryValue.js","core/components/component/select/sortBy.js","core/components/component/select/view.js","core/components/component/select.js","core/components/component/slider/input.js","core/components/component/slider/link.js","core/components/component/slider/view.js","core/components/component/text/exposedField.js","core/components/component/text/validate.js","core/components/component/text/input.js","core/components/component/text/link.js","core/components/component/text/queryValue.js","core/components/component/text/sortBy.js","core/components/component/text/view.js","core/components/component/textarea/formatted.js","core/components/component/textarea/validate.js","core/components/component/textarea/input.js","core/components/component/textarea/link.js","core/components/component/textarea/sortBy.js","core/components/component/textarea/view.js","core/components/component/viewButton/autoSave.js","core/components/component/viewButton/back.js","core/components/component/viewButton/delete.js","core/components/component/viewButton/eventEmitter.js","core/components/component/viewButton/field2Event.js","core/components/component/viewButton/input.js","core/components/component/viewButton/reference.js","core/components/component/viewButton/setValue.js","core/components/component/viewButton/setValueOnLoad.js","core/components/component/viewButton/undoRedo.js","core/components/component/viewButton/view.js","core/components/component/viewInView/empty.js","core/components/component/viewInView/setValue.js","core/components/component/viewInView/view.js","core/components/component/viewLink/button.js","core/components/component/viewLink/dynamicFields.js","core/components/component/viewLink/dynamicLink.js","core/components/component/viewLink/external.js","core/components/component/viewLink/fields.js","core/components/component/viewLink/link.js","core/components/component/viewLink/view.js","core/components/component/viewList/dynamicInfinite.js","core/components/component/viewList/emptySearchresult.js","core/components/component/viewList/infinite.js","core/components/component/viewList/infiniteScrollPos.js","core/components/component/viewList/listStat.js","core/components/component/viewList/pager.js","core/components/component/viewList/search.js","core/components/component/viewList/view.js","core/components/component/viewText/break.js","core/components/component/viewText/token.js","core/components/component/viewText/tokenFallbackNew.js","core/components/component/viewText/view.js","core/connection/component/connection/cssclass.js","core/connection/component/connection/view.js","core/connection/component/offline.js","core/contentType/component/contentType/context.js","core/contentType/component/contentType/render.js","core/contentType/component/contentType/view.js","core/contentType/component/useValidator.js","module/nystemServer/component/button.js","core/core/component/errorManager.js","core/core/component/errorMsg.js","core/core/component/input.js","module/nystemServer/component/inputWrapper.js","core/core/component/label.js","core/core/component/loading.js","core/core/component/useEvent.js","core/core/component/useEventListner.js","core/core/component/viewSmallComponent/errorMsg.js","core/core/component/wrapper.js","core/database/component/database/addToCache.js","core/database/component/database/baseViewSearch.js","core/database/component/database/filter.js","core/database/component/database/get.js","core/database/component/database/missing.js","core/database/component/database/oneSearch.js","core/database/component/database/search.js","core/database/component/database/searchContext.js","core/database/component/database/searchContextProvider.js","core/database/component/database/showMoreButton.js","core/database/component/database/view.js","core/database/component/useSearch.js","core/date/component/date/exposedField.js","core/date/component/date/exposedYearMonth.js","core/date/component/date/validate.js","core/date/component/date/input.js","core/date/component/date/inputDate.js","core/date/component/date/inputTime.js","core/date/component/date/sortBy.js","core/date/component/date/view.js","module/nystemServer/component/image.js","core/file/component/viewImage/view.js","core/pwa/component/serviceWorker/selectBox.js","core/pwa/component/serviceWorker/view.js","core/pwa/component/viewButton/debugAndClear.js","core/pwa/component/viewText/pageMeta.js","core/router/component/inserter.js","core/router/component/link.js","core/router/component/router/backHandler.js","core/router/component/router/history.js","core/router/component/router/pageNotFound.js","core/router/component/router/redirect.js","core/router/component/router/scrollpos.js","core/router/component/router/state.js","core/router/component/router/toTopOnNav.js","core/router/component/router/useQueryStore.js","core/router/component/router/view.js","core/router/component/router/viewByHistory.js","core/session/component/password/validate.js","core/session/component/password/confirmInput.js","core/session/component/password/input.js","core/session/component/password/oldpassword.js","core/session/component/password/view.js","core/session/component/role/view.js","core/session/component/role.js","core/session/component/session/logout.js","core/session/component/session/noRole.js","core/session/component/session/role.js","core/session/component/session/user.js","core/session/component/session/view.js","core/session/component/viewButton/login.js","core/style/component/icon/view.js","icons.js","iconsViewPorts.js","core/style/component/icon.js","core/style/component/style/classNameByValue.js","core/style/component/style/eventOutside.js","core/style/component/style/onOverHandle.js","core/style/component/style/onOver.js","core/style/component/style/onOverRemove.js","core/style/component/style/view.js","module/chromextension/component/extension/backgroundIndex.js","module/chromextension/component/extension/icon.js","module/chromextension/component/extension/search.js","module/chromextension/component/extension/tab.js","module/chromextension/component/extension/view.js","module/electron/component/connection/electron.js","module/nystemServer/component/bootstrap/computedClass.js","module/nystemServer/component/database/filterResult.js","module/nystemServer/component/index.js","module/nystemServer/component/overlay/accessible.js","module/nystemServer/component/overlay/close.js","module/nystemServer/component/overlay/closeButton.js","module/nystemServer/component/overlay/context.js","module/nystemServer/component/overlay/index.js","module/nystemServer/component/overlay/menu.js","module/nystemServer/component/overlay/open.js","module/nystemServer/component/overlay/overlay.js","module/nystemServer/component/overlay/view.js","module/nystemServer/component/reference/dynamicForm.js","module/nystemServer/component/viewButton/mirrorSave.js","module/nystemServer/component/viewInView/setBaseViewValue.js","module/nystemServer/component/viewText/titlePopup.js","module/service/component/textarea/log.js","core/components/client/index.js","core/connection/client/index.js","core/connection/client/httpsfallback.js","core/contentType/client/index.js","core/database/client/memdb/search.js","core/database/client/memdb/index.js","core/database/client/memdb/delete.js","core/database/client/memdb/find.js","core/database/client/memdb/get.js","core/database/client/memdb/init.js","core/database/client/memdb/save.js","core/database/client/cache.js","core/database/client/index.js","core/database/client/connection.js","core/database/client/updates.js","core/database/client/debug.js","core/database/client/storage.js","core/database/client/saveQueue.js","core/session/client/session.js","module/electron/client/index.js","module/electron/client/connection.js","core/core/client/eventhandler.js","core/core/client/nystem.js","indexScripts.js","core/core/client/index.js","core/file/client/index.js","core/pwa/client/index.js","core/router/client/index.js","core/session/client/index.js"],"names":["typeByFormat","Intl","DateTimeFormat","year","month","day","hour","minute","YYYY","YY","MM","DD","M","D","HH","mm","format","at","val","H","m","dddd","weekday","finderRegExp","RegExp","Object","keys","join","myMoment","Date","now","startOf","UTC","getFullYear","getMonth","getDate","valueOf","getTime","replace","replacer","module","exports","BootstrapDropdown","React","Component","constructor","props","super","this","state","expanded","toggleExpand","setState","render","self","headerProps","children","headerChildren","Array","map","typeClass","type","menuItem","item","className","onClick","role","slice","BootstrapInputWrapper","model","path","items","BootstrapPanel","header","body","BootstrapPanelIcon","iconOpen","iconClosed","useContext","PanelContext","icon","classNames","BootstrapPanelOpen","classNameOpen","classNameClosed","BootstrapPanelOpenByPath","view","pathname","useLocation","useEffect","setExpanded","match","str","p1","test","params","getValue","invert","BootstrapPanelOpenByValue","value","keyCount","length","key","condition","BootstrapPanelToggle","tabIndex","iconClassName","BootstrapView","renderAs","types","default","wrapper","primary","defaultWithoutPadding","compact","Panel","setSexpanded","useState","panelElement","useRef","storedState","app","stateStore","get","ref","Provider","set","visibilityHidden","createContext","ViewPanelView","onClickExpand","classNameHead","panelProps","BooleanButton","setValue","text","falseText","split","btnType","falseBtnType","size","includes","alt","t","BooleanExposedField","RouterUseQueryStore","saveId","UseSearch","id","hideTrue","trueText","hideFalse","option","push","_id","clearButton","selectAllOnFocus","limit","BooleanFields","itemTrue","itemFalse","mandatory","text_mandatory","BooleanInput","error","setValidated","UseValidator","validate","uuid","classNameInput","placeholder","checked","onChange","disabled","BooleanName","BooleanVibrate","UNSAFE_componentWillReceiveProps","nextProps","vibrate","componentDidMount","navigator","atState","pattern","JSON","parse","BooleanView","isSetRecursive","values","filter","ConditionalEmpty","checkId","empty","byType","v1","v2","ConditionalInt","useCallback","i","field","testVal","parseFloat","testCondition","isset","ConditionalSet","setId","condId","condVal","undefined","reverse","substring","on","off","ConditionalUserRole","visible","session","user","contains","array1","array2","indexOf","createItem","ConditionalValid","valid","setValid","timer","clearTimeout","setTimeout","async","errors","event","silent","ConditionalView","ConditionalViewAndOr","tempValue","changeTimer","setValueView","inThis","refs","testOneCondition","sum","sumValidator","parseInt","componentWillUnmount","MyDragAndDropContext","DragDropContext","onDragEnd","addeventhandler","parents","styleDraggableItem","boxSizing","opacity","pointerEvents","position","transform","transition","zIndex","offsetStyle","Droppable","droppableId","isDropDisabled","style","setStyle","innerRef","styleRef","current","context","provided","droppableProps","useMemo","paddingBottom","window","getComputedStyle","stop","result","x","y","pos","top","bottom","left","right","destination","move","getBoundingClientRect","over","height","isDraggingOver","Draggable","draggableId","index","minHeight","breakpoint","currentStyle","offsetStyleSet","start","setStyles","element","styles","entries","forEach","prop","display","draggableProps","dragHandleProps","onMouseDown","e","baseProps","stringify","movingState","clientX","clientY","clonedElement","cloneNode","mouseMove","document","appendChild","width","then","query","mouseUp","removeEventListener","removeChild","combine","mode","reason","source","data","addEventListener","onDragStart","preventDefault","draggable","DragAndDropContext","modifiers","checkModifiers","shiftKey","metaKey","ctrlKey","altKey","DragAndDropFixedVal","onDragEndAddValue","valueType","DragAndDropListContext","DragAndDropList","ids","getId","valuePath","lastIndexOf","updated","splice","snapshot","hoverClassName","DragAndDropHandle","DragAndDropSortable","contentType","DragAndDropView","DragAndDropViewList","search","DatabaseSearchContext","emptyFields","settings","noForm","baseView","rowClassName","EmailExposedField","EmailInput","focus","componentClassName","maxLength","toLowerCase","onBlur","EmailInputNoValidation","EmailLink","EmailMailto","href","EmailSortBy","EmailVerifiedInput","add","errormsg","validated","handleChange","input","EmailView","FlatgroupInput","add2id","groupVal","startWith","getGroupVal","createElement","components","capFirst","FloatExposedField","from","setFrom","saveIdFrom","to","setTo","saveIdTo","base","nolabel","modelFrom","modelTo","FloatInput","classNameLabel","FloatLink","FloatSortBy","outputFloat","tofixed","toFixed","lang","FloatView","GroupView","getValuePath","IntExposedField","searchProp","onUpdate","update","classNameBase","updateCounter","modelId","delayTimer","isMounted","offUpdate","IntInput","intVal","IntLink","IntSortBy","IntView","MatrixInput","rowLabel","mapField","label","atRow","newVal","len","rowIndex","MatrixInputlist","concat","oneVal","handleKeyChange","MultigroupAddRemove","action","parts","valPath","console","log","parentVal","btnSize","title","buttonText","MultigroupCopyItem","active","setActive","readOnly","direction","clipboard","readText","clipText","clipVal","select","execCommand","blur","err","replaceInObject","fn","MultigroupInput","fallback","startsWith","idField","MultigroupPanelOpenByValue","MultigroupView","replaceInModel","viewFormat","MultilinetextCount","MultilinetextExposedField","MultilinetextFields","rel","target","MultilinetextInput","itemValue","MultilinetextInputlist","MultilinetextItemLink","MultilinetextItemText","translate","MultilinetextList","MultilinetextView","nul","ReferenceExposedField","setOption","database","autoUpdate","parseFilter","count","selectModel","utils","clone","textField","ReferenceExposedFieldViews","exact","exposed","ReferenceFirst","renderFormat","itemClassName","onReference","InputSpes","onFocus","inputEl","inFocus","setInFocus","InlineAdd","isAdding","setIsAdding","inlineAdd","onSave","close","ReferenceInput","searchVal","setSearchVal","events","remove","addValue","atPath","addable","removeValue","clicked","renderFormatSelect","exclude","ReferenceQueryValue","ReferenceSelect","loadOption","connected","namefield","connection","ReferenceSortable","localValue","func","bind","save","componentWillReceiveProps","onDelete","addField","hashtag","addTransform","fieldBase","out","insertValues","onMissing","fieldId","onAdd","ReferenceSortBy","ReferenceView","SelectButton","trueState","trueOnState","falseState","falseOnState","SelectExposedField","renderTypes","dropdown","button","classNameItem","checkbox","inline","SelectInput","optionObj","normalizeOption","shift","SelectQueryValue","SelectSortBy","SelectView","find","Select","SliderInput","absolute","min","max","precision","textClass","SliderLink","SliderView","TextExposedField","setClassName","noClearButton","noWrapper","ClearButton","aria-hidden","forwardRef","TextLink","toFormat","addToPath","toType","reference","int","float","array","TextQueryValue","history","useHistory","enabled","setEnabled","location","qVal","reg","getQueryValue","rest","setRouterValue","TextSortBy","sortby","ev","setEv","sortbyId","reverse1","rev","setSearch","TextView","TextareaFormatted","dangerouslySetInnerHTML","__html","cutPoint","contents","TextareaLink","TextareaSortBy","TextareaView","ViewButtonAutoSave","saveIds","saveDelay","saveToDb","reduce","res","fields","withRouter","go","deletedText","setText","stopPropagation","delete","redirectURL","EventButton","sendEvent","buttonStates","confirm","saving","success","setButton","savedTimer","setSavedTimer","activeKeySaveView","setActiveKeySaveView","setError","handleSubmit","redirectToPath","router","click","handleKeySave","inactivateKeySaveView","activateKeySaveView","saveOnKey","ViewButtonEventEmitter","emitter","emit","baseViewBaseView","baseViewBaseViewBaseView","eventType","checkActive","activeClass","inactiveClass","subEvent","prev","ViewButtonField2Event","componentName","component","baseButtonStates","deleted","saved","noRedirect","clearOnSave","sendOnly","ViewButtonReference","callView","ViewButtonSetValue","modelValue","false","true","ViewButtonSetValueOnLoad","hasOwnProperty","arrValue","ViewButtonUndoRedo","isHistory","IconButton","atPos","ViewButtonView","ViewInViewEmpty","viewId","ViewInViewSetValue","addid","ViewInViewView","ViewLinkButton","renderType","ViewLinkDynamicFields","ViewLinkDynamicLink","insertVal","ViewLinkExternal","link","ViewLinkFields","toView","addId","ViewLinkLink","blank","ViewLinkView","Link","SlotContent","slot","slotSearch","setSlotSearch","mounted","db","searchDelay","searchTotal","InfiniteSlot","setTop","setViewListHeight","ro","slotHeights","ResizeObserver","newH","offsetHeight","observe","unobserve","ViewListDynamicInfinite","loading","slotCount","setSlotCount","setPos","heightTotal","setHeightTotal","heights","slotsTotal","slotLimit","total","innerHeight","offset","updateTimer","updateSlots","scrollY","scrollTop","topPos","newPos","toPos","scrollEvent","newTop","includeHidden","overflowY","overflowX","overflow","overflowRegex","parent","parentElement","getScrollParent","getViewListHeight","heightTimer","setHeight","totHeight","setViewListHeightTotal","slots","ViewListEmptySearchresult","searchText","$and","$all","inverse","getStyle","extend","ViewListInfiniteSlot","hidden","setSize","visibility","ViewListInfinite","heightRef","clearHeightOnUpdate","slotUpdateDelay","innerWidth","resizeEvent","fill","getPos","old","und","newHeight","ViewListInfiniteScrollPos","classNameInfo","UseEventListner","ViewListListStat","show","ViewListPager","last","relUrl","next","hasPrev","hasNext","ViewListSearch","ViewListRender","itemRenderAs","ViewListView","headerFields","ViewTextBreak","ViewTextToken","ViewTextTokenFallbackNew","name","ViewTextView","ConnectionCssclass","setConnected","connectionClass","onlineClass","offlineClass","ConnectionView","offline","setConnectedState","Offline","ContentTypeContext","ViewContextProvider","ContentTypeRender","category","focused","setValueAtPath","debug","ContentTypeView","addForm","itemFrom","itemTo","viewModel","propvalue","populatedViews","views","toUpperCase","setLoading","noAutoUpdate","firstData","savedData","doGet","diff","getDiff","applyDiff","changeData","oldValue","setData","newValue","saveData","reload","useValue","onSubmit","isValidated","validator","Promise","resolve","clearErrorValidation","secondary","danger","warning","info","primaryDisabled","secondaryDisabled","dangerDisabled","warningDisabled","infoDisabled","errorDisabled","defaultDisabled","sizes","xs","sm","lg","xl","Button","ErrorManager","disconnectEvent","errorEvent","connectEvent","url","line","errorTimer","errorReload","ErrorMsg","password","parentRef","localRef","setVal","valRef","flat","Infinity","elementProps","accessibilityLabel","accessible","accessibilityTraits","InputWrapper","pClassName","inputWidth","floatlabel","htmlFor","errorMsg","Label","Loading","inDelay","UseEvent","setResult","handler","ViewSmallComponentErrorMsg","errorSetter","tags","tag","DatabaseAddToCache","options","addMedia","doSearchDebounce","addReferencesToCache","DatabaseBaseViewSearch","baseFilter","setBaseFilter","updateSearch","onSearch","DatabaseFilter","firstVal","DatabaseGet","first","DatabaseMissing","DatabaseOneSearch","inSearch","searchString","setSearchState","DatabaseSearch","subView","reversesortby","reversesortby2","reversesortby3","getFilter","searchFilter","ofilter","oneFilter","and","oneFilterIn","__exact","removeifempty","delay","before","DatabaseSearchContextProvider","setSearchDebounce","doSearch","newSearch","isDirty","searchResult","getSearch","DatabaseShowMoreButton","setCount","amount","DatabaseView","DateExposedField","modelYear","months","toLocaleDateString","modelMonth","modelDay","daysInMonth","getArray","utc","addUTC","getByType","DateExposedYearMonth","years","fromMonth","toMonth","fromDay","toDay","setYear","setMonth","DateInput","dateType","validateAndSet","DateInputDate","inputVal","setInputVal","moment","setFromPicker","formVal","getMoment","pikaday","onSelect","firstDay","DateInputTime","inputClassName","datePart","toString","part","parseVal","DateSortBy","dateTimeFormats","dateLong","timeLong","dateTimeLong","dateTimeNoYear","dateTimeNoYearDay","dateNoYearDay","timeDay","DateView","dateFormat","relative","hourInMs","formatDate","setInterval","clearInterval","domain","secure","Image","src","ViewImageView","fullPath","filename","isInstalled","standalone","matchMedia","matches","ServiceWorkerSelectBox","install","setInstall","installable","runInstall","ServiceWorkerView","ViewButtonDebugAndClear","appVersion","findByType","description","obj","querySelector","head","getElementsByTagName","setAttribute","ViewTextPageMeta","fieldValue","fieldFormat","origin","getAttribute","Inserter","propMatch","toClassString","Boolean","RouterBackHandler","routerHistory","atNew","found","is404","setIs404","nodeName","RouterRedirect","positions","documentElement","RouterScrollpos","RouterState","getPath","storage","getItem","redirect","setItem","contextTypes","PropTypes","object","RouterView","RouterViewByHistory","itemsByPosition","paths","historyPos","sort","a","b","PasswordConfirmInput","value1","setValue1","value2","setValue2","svalue","autoComplete","PasswordInput","PasswordOldpassword","PasswordView","RoleView","sessionChange","Role","isVisible","logout","hasNoRole","SessionNoRole","setVisible","check","SessionRole","userrole","updateVisibility","reqRole","userRole","SessionUser","userid","toformat","SessionView","saveButton","setSaveButton","login","IconView","deg","d","points","fillRule","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Icon","xmlns","viewBox","iconsViewPorts","rotate","icons","StyleClassNameByValue","mapper","classNameByValue","testValue","getClasses","StyleEventOutside","classNameInner","innerClicked","HideOnNotOverContext","StyleOnOverHandle","setOver","onMouseOver","onMouseOut","StyleOnOver","classNameOut","classNameOver","StyleOnOverRemove","StyleView","ExtensionBackgroundIndex","updateTabs","tab","siteScript","tabs","addToEventLog","updateTabSettings","recording","eventLog","tabId","extensionEvent","doEvent","chrome","tabLoadCallback","status","redirected","tabLoading","callback","doingEvent","sendMessage","connect","saveTab","pathErrorClick","runtime","onMessage","addListener","request","sender","sendResponse","tabOptions","response","newPath","listenTo","forceUpdate","tabField","changed","newUrl","webNavigation","onCompleted","frameId","onBeforeNavigate","onCreated","onUpdated","changeInfo","onRemoved","contextMenus","create","onclick","contexts","extensionIcon","browserAction","color","canvas","setIcon","setBadgeBackgroundColor","setBadgeText","canvasContext","getContext","imageData","getImageData","ExtensionSearch","missing","setMissing","extract","currentWindow","exec","ExtensionTab","isMatch","setIsMatch","ExtensionView","inExtension","protocol","ConnectionElectron","atId","message","filePaths","BootstrapComputedClass","s","row","DatabaseFilterResult","filterSearch","definition","viewFields","Index","OverlayAccessible","overlayEvent","open","accessibleId","_handleScreenReaderToggled","isEnabled","screenReaderEnabled","getChildContext","overlayId","string","childContextTypes","OverlayClose","handleEvent","do","OverlayCloseButton","toPath","OverlayContextObject","OverlayContext","Consumer","OverlayContextProvider","OverlayIndex","setOpenState","child","OverlayMenu","OverlayOpen","OverlayOverlay","findPosition","offsetLeft","offsetTop","offsetParent","getScroll","pageYOffset","pageXOffset","r","scrollLeft","modal","shouldComponentUpdate","nextState","OverlayView","ReferenceDynamicForm","require","dynamicForm","generate","transformContentType","ViewButtonMirrorSave","oldVal","saveOn","saveVals","ViewInViewSetBaseViewValue","toField","fromField","Portal","setElement","createPortal","MouseOver","isOver","setIsOver","ViewTextTitlePopup","popup","overPos","TextareaLog","setLog","hasVal","parseLog","colors","fullLog","updateLog","clearLog","wrapperClass","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","ReactDOM","broadcast","callbacks","openconnection","sendSocket","webSocket","send","noCallback","callbackid","WebSocket","onerror","onclose","onopen","onmessage","receiveSocket","wait","onConnect","waitOnConnect","onEmit","fetch","method","json","httpsfallbackM","viewCreatorFields","deepCopy","dynamicFields","fullId","substr","flattenFields","flatten","subFields","populateViews","mapFn","partId","pop","byField","curr","sortByFunc","sortBys","sortFuncs","up","down","sortFuncInt","sortFuncText","collection","fieldByType","field2IdType","extends","_crdate","dbArray","addFields2All","searchFor","oneSearchField","oneSearchValue","oneField","searchField","searchValue","searchInvert","tmp","getFilterArray","oneSearchInvert","createRegExp","expression","setSearchDefaults","sortBy","thisItem","matchVal","addOne","filterResult","assign","oldData","dbIndex","deleteM","testIfSet","findM","getM","initM","saveM","searchM","machinename","getKey","inCache","updates","connectionM","updateGet","timer03","timer20","timeoutTimes","updateFrequency","updateEvent","onData","callbackId","delItem","_chdate","date","updatesM","debugM","memdbM","noClientCache","insertItem","chdate","searchCache","allInCache","cacheM","setItemDebounce","storageM","storageId","saveQueue","saveQueueM","all","contentTypes","init","clearCache","userContentType","sessionKey","autoLoginUser","sessionid","loginEvent","removeItem","userStore","electron","getStackTrace","Error","captureStackTrace","stack","column","host","some","scriptEl","onload","addScript","sourceMap","SourceMapConsumer","initialize","consumer","originalPositionFor","addEventHandler","mapevents","callbacksprio","callbacksStack","addEventHandlerInitiator","Math","random","addEventHandlers","prio","addEvent","removeEvent","fired","reject","catch","waitFor","defectiveCallback","___settings___","buildsettings","fetchDomainFromUrl","S4","comp","renderer","unmountComponentAtNode","parsedfilter","states","domPathId","unshift","tagName","keyCode","platform","core","localStorage","nystemCache","caches","req","code","put","Response","statusText","headers","Headers","etag","memstore","file","serviceWorker","register","registration","deferredPrompt","prompt","userChoice","choiceResult","outcome","regExpVersion","clear","clientAppVersion","pwa","parseURL","param","sessionM","addContents","token","inited"],"mappings":"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,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,GAAI,UACJC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,IAAK,UACLC,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","file":"static/js/main.569516c2.chunk.js","sourcesContent":["\"use strict\";\r\n\r\nconst typeByFormat = {\r\n  \"YYYY-MM-DD\": new Intl.DateTimeFormat(\"sv-SE\", {\r\n    year: \"numeric\",\r\n    month: \"numeric\",\r\n    day: \"numeric\",\r\n  }),\r\n  \"YYYY-MM-DD HH:mm\": new Intl.DateTimeFormat(\"sv-SE\", {\r\n    year: \"numeric\",\r\n    month: \"numeric\",\r\n    day: \"numeric\",\r\n    hour: \"numeric\",\r\n    minute: \"numeric\",\r\n  }),\r\n  \"HH:mm\": new Intl.DateTimeFormat(\"sv-SE\", {\r\n    hour: \"numeric\",\r\n    minute: \"numeric\",\r\n  }),\r\n  \"H:mm\": new Intl.DateTimeFormat(\"sv-SE\", {\r\n    hour: \"numeric\",\r\n    minute: \"numeric\",\r\n  }),\r\n  YYYY: new Intl.DateTimeFormat(\"sv-SE\", { year: \"numeric\" }),\r\n  YY: new Intl.DateTimeFormat(\"sv-SE\", { year: \"2-digit\" }),\r\n  MM: new Intl.DateTimeFormat(\"sv-SE\", { month: \"2-digit\" }),\r\n  DD: new Intl.DateTimeFormat(\"sv-SE\", { day: \"2-digit\" }),\r\n  M: new Intl.DateTimeFormat(\"sv-SE\", { month: \"numeric\" }),\r\n  D: new Intl.DateTimeFormat(\"sv-SE\", { day: \"numeric\" }),\r\n  HH: new Intl.DateTimeFormat(\"sv-SE\", { hour: \"2-digit\" }),\r\n  mm: {\r\n    format: (at) => {\r\n      const val = new Intl.DateTimeFormat(\"sv-SE\", {\r\n        minute: \"2-digit\",\r\n      }).format(at);\r\n\r\n      return val < 10 ? `0${val}` : val;\r\n    },\r\n  },\r\n  H: new Intl.DateTimeFormat(\"sv-SE\", { hour: \"numeric\" }),\r\n  m: new Intl.DateTimeFormat(\"sv-SE\", { minute: \"numeric\" }),\r\n  dddd: new Intl.DateTimeFormat(\"en-GB\", { weekday: \"long\" }),\r\n};\r\n\r\nconst finderRegExp = new RegExp(Object.keys(typeByFormat).join(\"|\"), \"gi\");\r\nconst replacer = (at) => (format) => typeByFormat[format]?.format(at);\r\n\r\nconst myMoment = (val) => {\r\n  const at = new Date(val || Date.now());\r\n\r\n  return {\r\n    startOf: () =>\r\n      myMoment(Date.UTC(at.getFullYear(), at.getMonth(), at.getDate())),\r\n    valueOf: () => at.getTime(),\r\n    format: (format) => {\r\n      if (!typeByFormat[format])\r\n        return format.replace(finderRegExp, replacer(at));\r\n\r\n      return typeByFormat[format].format(at);\r\n    },\r\n  };\r\n};\r\n\r\nmodule.exports = myMoment;\r\n\r\n/*\r\n\r\nInput\tExample\tDescription\r\nYYYY\t2014\t4 or 2 digit year. Note: Only 4 digit can be parsed on strict mode\r\nYY\t14\t2 digit year\r\nY\t-25\tYear with any number of digits and sign\r\nQ\t1..4\tQuarter of year. Sets month to first month in quarter.\r\nM MM\t1..12\tMonth number\r\nMMM MMMM\tJan..December\tMonth name in locale set by moment.locale()\r\nD DD\t1..31\tDay of month\r\nDo\t1st..31st\tDay of month with ordinal\r\nDDD DDDD\t1..365\tDay of year\r\nX\t1410715640.579\tUnix timestamp\r\nx\t1410715640579\tUnix ms timestamp\r\n\r\nhttps://devhints.io/wip/intl-datetime\r\nhttps://momentjscom.readthedocs.io/en/latest/moment/04-displaying/02-fromnow/\r\n\r\nconst dateTimeFormats = {\r\n  dateLong: \"YYYY-MM-DD\",\r\n  timeLong: \"H:mm\",\r\n  dateTimeLong: \"YYYY-MM-DD HH:mm\",\r\n  dateTimeNoYear: \"D/M H:mm\",\r\n  dateTimeNoYearDay: \"ddd D/M H:mm\",\r\n  dateNoYearDay: \"ddd D/M\",\r\n  timeDay: \"ddd D/M H:mm\",\r\n  day: \"dddd\",\r\n};\r\n\r\n{\r\n  weekday: 'narrow' | 'short' | 'long',\r\n  era: 'narrow' | 'short' | 'long',\r\n  year: 'numeric' | '2-digit',\r\n  month: 'numeric' | '2-digit' | 'narrow' | 'short' | 'long',\r\n  day: 'numeric' | '2-digit',\r\n  hour: 'numeric' | '2-digit',\r\n  minute: 'numeric' | '2-digit',\r\n  second: 'numeric' | '2-digit',\r\n  timeZoneName: 'short' | 'long',\r\n\r\n  // Time zone to express it in\r\n  timeZone: 'Asia/Shanghai',\r\n  // Force 12-hour or 24-hour\r\n  hour12: true | false,\r\n\r\n  // Rarely-used options\r\n  hourCycle: 'h11' | 'h12' | 'h23' | 'h24',\r\n  formatMatcher: 'basic' | 'best fit'\r\n}\r\n*/\r\n","import React from \"react\";\r\nimport { Button } from \"nystem-components\";\r\n\r\nclass BootstrapDropdown extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      expanded: this.props.expanded\r\n    };\r\n  }\r\n  toggleExpand() {\r\n    this.setState({\r\n      expanded: !this.state.expanded\r\n    });\r\n  }\r\n  render() {\r\n    function headerContent() {\r\n      return <div />;\r\n    }\r\n    const self = this;\r\n    const headerProps = this.props.children[0].props;\r\n    const headerChildren =\r\n      headerProps.children instanceof Array\r\n        ? headerProps.children.map(headerContent)\r\n        : headerProps.children;\r\n    let typeClass = this.props.type ? this.props.type : \"\";\r\n    if (!headerProps) return null;\r\n    function menuItem(item) {\r\n      return <li>{item}</li>;\r\n    }\r\n    function bodyContent() {\r\n      if (self.state.expanded)\r\n        return (\r\n          <ul className=\"dropdown-menu\" role=\"menu\">\r\n            {self.props.children.slice(1).map(menuItem)}\r\n          </ul>\r\n        );\r\n      return \"\";\r\n    }\r\n    if (this.props.className) typeClass += ` ${this.props.className}`;\r\n    if (this.state.expanded) typeClass += \" open\";\r\n    return (\r\n      <div className={`btn-group${typeClass}`}>\r\n        <Button type=\"secondary\" onClick={this.toggleExpand}>\r\n          {headerChildren} <span className=\"caret\" />\r\n        </Button>\r\n        {bodyContent()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default BootstrapDropdown;\r\n","import React from \"react\";\r\nimport { InputWrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst BootstrapInputWrapper = ({ model, path }) => {\r\n  const { item } = model;\r\n\r\n  return (\r\n    <InputWrapper model={model}>\r\n      <ContentTypeRender path={path} items={item} />\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default BootstrapInputWrapper;\r\n","import React from \"react\";\r\nimport { Panel, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst BootstrapPanel = ({ model, path }) => {\r\n  const { item, header, typeClass } = model;\r\n\r\n  return (\r\n    <Panel\r\n      {...model}\r\n      type={typeClass}\r\n      header={<ContentTypeRender path={path} items={header} />}\r\n      body={<ContentTypeRender path={path} items={item} />}\r\n    />\r\n  );\r\n};\r\nexport default BootstrapPanel;\r\n","import React, { useContext } from \"react\";\r\nimport { Icon, PanelContext } from \"nystem-components\";\r\n\r\nconst BootstrapPanelIcon = ({ model }) => {\r\n  const { className, iconOpen, iconClosed } = model;\r\n  const { expanded } = useContext(PanelContext);\r\n\r\n  return (\r\n    <Icon\r\n      icon={\r\n        expanded ? iconOpen || \"cheveron-down\" : iconClosed || \"cheveron-right\"\r\n      }\r\n      className={className || \"w-6 h-6 pl-0 pointer\"}\r\n    />\r\n  );\r\n};\r\nexport default BootstrapPanelIcon;\r\n","import React, { useContext } from \"react\";\r\nimport { Wrapper, ContentTypeRender, PanelContext } from \"nystem-components\";\r\n\r\nconst classNames = (className) =>\r\n  !className ? [] : className instanceof Array ? className : [className];\r\n\r\nconst BootstrapPanelOpen = ({ model, path, children }) => {\r\n  const { className, item, classNameOpen, classNameClosed } = model;\r\n  const { expanded } = useContext(PanelContext);\r\n\r\n  return (\r\n    <Wrapper\r\n      className={[\r\n        ...classNames(className),\r\n        ...(expanded ? classNames(classNameOpen) : classNames(classNameClosed)),\r\n      ]}\r\n    >\r\n      {children || <ContentTypeRender path={path} items={item} />}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default BootstrapPanelOpen;\r\n","import { useEffect, useContext } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { PanelContext } from \"nystem-components\";\r\n\r\nconst BootstrapPanelOpenByPath = ({ model, path, view }) => {\r\n  const { toggleExpand, expanded } = useContext(PanelContext);\r\n  const { pathname } = useLocation();\r\n\r\n  useEffect(() => {\r\n    const insertVal = (val) =>\r\n      val &&\r\n      val.replace(/\\{([a-z_.0-9]+)\\}/gim, (str, p1) =>\r\n        /pathItem[0-9]/.test(p1) && view.params\r\n          ? view.params[p1[8]]\r\n          : view.getValue(p1.replace(\"..\", path))\r\n      );\r\n\r\n    let setExpanded = pathname.match(new RegExp(insertVal(model.match)));\r\n    if (model.invert) setExpanded = !setExpanded;\r\n\r\n    if (setExpanded && !expanded) toggleExpand(setExpanded);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [pathname]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default BootstrapPanelOpenByPath;\r\n","import { useEffect, useContext } from \"react\";\r\nimport { PanelContext } from \"nystem-components\";\r\n\r\nconst BootstrapPanelOpenByValue = ({ model, view, path }) => {\r\n  const { toggleExpand, expanded } = useContext(PanelContext);\r\n\r\n  useEffect(() => {\r\n    const value = view.getValue(path);\r\n\r\n    if (model.keyCount || model.keyCount === 0) {\r\n      let setExpanded =\r\n        Object.keys(view.getValue(path)).length > model.keyCount;\r\n      if (model.invert) setExpanded = !setExpanded;\r\n\r\n      if (setExpanded && !expanded) toggleExpand(setExpanded);\r\n    } else {\r\n      const [[key, val]] = model.condition;\r\n      let setExpanded = value[key] === val;\r\n      if (val === \"false\") setExpanded = !val;\r\n      else if (val === \"true\") setExpanded = !!val;\r\n\r\n      if (model.invert) setExpanded = !setExpanded;\r\n\r\n      if (setExpanded && !expanded) toggleExpand(setExpanded);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [model]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default BootstrapPanelOpenByValue;\r\n","import React, { useContext } from \"react\";\r\nimport {\r\n  Wrapper,\r\n  ContentTypeRender,\r\n  Icon,\r\n  PanelContext,\r\n} from \"nystem-components\";\r\n\r\nconst addClick = (doFunction) => ({\r\n  onClick: doFunction,\r\n  role: \"button\",\r\n  tabIndex: \"0\",\r\n});\r\n\r\nconst BootstrapPanelToggle = ({ model, path, children }) => {\r\n  const { className, item } = model;\r\n  const { toggleExpand, expanded } = useContext(PanelContext);\r\n\r\n  return (\r\n    <Wrapper className={className} {...addClick(toggleExpand)}>\r\n      {model.icon && (\r\n        <Icon\r\n          icon={expanded ? \"cheveron-down\" : \"cheveron-right\"}\r\n          className={model.iconClassName || \"w-6 h-6 pl-0 pointer\"}\r\n        />\r\n      )}\r\n      {children || <ContentTypeRender path={path} items={item} />}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default BootstrapPanelToggle;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst BootstrapView = ({ model, path }) => {\r\n  const { className, renderAs, item } = model;\r\n\r\n  return (\r\n    <Wrapper className={className} renderAs={renderAs}>\r\n      <ContentTypeRender path={path} items={item} />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default BootstrapView;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Wrapper, PanelContext } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst types = {\r\n  default: {\r\n    wrapper: \"mb-3 border shadow rounded\",\r\n    body: \"p-3\",\r\n    header: \"bg-gray-200 pointer p-1 pl-3\",\r\n  },\r\n  primary: {\r\n    wrapper: \"mb-3 border shadow rounded bg-blue-600 border-blue-600\",\r\n    body: \"p-3 bg-white rounded\",\r\n    header: \"text-white pointer p-1 pl-3\",\r\n  },\r\n  defaultWithoutPadding: {\r\n    wrapper: \"mb-3 border shadow rounded\",\r\n    body: \"\",\r\n    header: \"bg-gray-200 pointer pl-2 pr-1\",\r\n  },\r\n  compact: {\r\n    wrapper: \"mb-1\",\r\n    body: \"pl-3\",\r\n    header: \"\",\r\n  },\r\n};\r\n\r\nconst Panel = ({ body, header, className, ...props }) => {\r\n  const [expanded, setSexpanded] = useState(props.expanded);\r\n  const panelElement = useRef(null);\r\n\r\n  const toggleExpand = () => {\r\n    setSexpanded(!expanded);\r\n    app().stateStore.set(panelElement, !expanded, props.stateStore);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const storedState = app().stateStore.get(panelElement, props.stateStore);\r\n    if (storedState === null || storedState === expanded) return;\r\n    setSexpanded(storedState);\r\n  }, [expanded, props.stateStore]);\r\n\r\n  const type = types[props.type || \"default\"];\r\n\r\n  return (\r\n    <Wrapper ref={panelElement} className={[type.wrapper, className]}>\r\n      <Wrapper className={type.header}>\r\n        <PanelContext.Provider value={{ toggleExpand, expanded }}>\r\n          {header}\r\n        </PanelContext.Provider>\r\n      </Wrapper>\r\n      {expanded ? (\r\n        <Wrapper className={type.body}>{body}</Wrapper>\r\n      ) : props.visibilityHidden ? (\r\n        <Wrapper className={[type.body, \"hidden\"]}>{body}</Wrapper>\r\n      ) : null}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Panel;\r\n","import React from \"react\";\r\n\r\nconst PanelContext = React.createContext();\r\nexport default PanelContext;\r\n","import React from \"react\";\r\nimport { Panel, Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst ViewPanelView = ({ model, path }) => {\r\n  const {\r\n    onClickExpand,\r\n    classNameHead,\r\n    item,\r\n    header,\r\n    typeClass,\r\n    ...panelProps\r\n  } = model;\r\n\r\n  return (\r\n    <Panel {...panelProps} type={typeClass}>\r\n      <Wrapper\r\n        renderAs=\"h3\"\r\n        onClickExpand={onClickExpand}\r\n        className={classNameHead}\r\n      >\r\n        <ContentTypeRender path={path} items={header || []} />\r\n      </Wrapper>\r\n      <ContentTypeRender path={path} items={item || []} />\r\n    </Panel>\r\n  );\r\n};\r\nexport default ViewPanelView;\r\n","import React from \"react\";\r\nimport { Button, Icon } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst classNames = (className) =>\r\n  !className ? [] : className instanceof Array ? className : [className];\r\n\r\nconst BooleanButton = ({ setValue, model, value }) => {\r\n  const [text, className = []] = (value\r\n    ? model.text\r\n    : model.falseText || model.text\r\n  ).split(\":\");\r\n\r\n  return (\r\n    <Button\r\n      type={value ? model.btnType : model.falseBtnType}\r\n      size={model.size}\r\n      className={[...classNames(className), ...classNames(model.className)]}\r\n      onClick={() => setValue(!value)}\r\n    >\r\n      {[\r\n        \"code\",\r\n        \"pause\",\r\n        \"play\",\r\n        \"folder\",\r\n        \"cog\",\r\n        \"wallet\",\r\n        \"location\",\r\n      ].includes(text) ? (\r\n        <Icon className=\"w-4 h-4\" icon={text} alt={text} />\r\n      ) : (\r\n        app().t(text)\r\n      )}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default BooleanButton;\r\n","import React from \"react\";\r\nimport { SelectInput, UseSearch, RouterUseQueryStore } from \"nystem-components\";\r\n\r\nconst BooleanExposedField = ({ model, view }) => {\r\n  const [value, setValue] = RouterUseQueryStore(model.saveId);\r\n  UseSearch({ view, id: model.id, value });\r\n  const { hideTrue, trueText, hideFalse, falseText } = model;\r\n\r\n  const option = [];\r\n\r\n  if (!hideFalse)\r\n    option.push({\r\n      _id: \"false\",\r\n      text: falseText || \"False\",\r\n    });\r\n  if (!hideTrue)\r\n    option.push({\r\n      _id: \"true\",\r\n      text: trueText || \"True\",\r\n    });\r\n\r\n  return (\r\n    <SelectInput\r\n      view={view}\r\n      model={{\r\n        ...model,\r\n        clearButton: true,\r\n        selectAllOnFocus: true,\r\n        option,\r\n        limit: 1,\r\n      }}\r\n      value={value}\r\n      setValue={setValue}\r\n    />\r\n  );\r\n};\r\nexport default BooleanExposedField;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst BooleanFields = ({ setValue, model, value, path }) => {\r\n  const { itemTrue, itemFalse, className } = model;\r\n  return (\r\n    <Wrapper className={className} onClick={() => setValue(!value)}>\r\n      <ContentTypeRender\r\n        path={path.replace(model.id, \"\")}\r\n        items={value ? itemTrue : itemFalse}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default BooleanFields;\r\n","// eslint-disable-next-line camelcase\r\nconst text_mandatory = \"Field is mandatory\";\r\n\r\nexport default ({ value, model }) =>\r\n  // eslint-disable-next-line camelcase\r\n  model.mandatory && !value && (model.text_mandatory || text_mandatory);\r\n","import React, { useState } from \"react\";\r\nimport { InputWrapper, Input, Button, UseValidator } from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport validate from \"./validate\";\r\n\r\nconst BooleanInput = ({ model, setValue, value, view, render }) => {\r\n  const [error, setValidated] = UseValidator({ view, validate, value, model });\r\n  const [id] = useState(app().uuid);\r\n\r\n  const handleChangeButton = () => {\r\n    setValidated(true);\r\n    setValue(!value);\r\n  };\r\n\r\n  if (model.render === \"button\" || render === \"button\")\r\n    return (\r\n      <Button\r\n        type={value ? \"primary\" : \"secondary\"}\r\n        className={model.className}\r\n        onClick={handleChangeButton}\r\n        size=\"xs\"\r\n      >\r\n        {model.text}\r\n      </Button>\r\n    );\r\n\r\n  return (\r\n    <InputWrapper id={id} model={model} error={error}>\r\n      <Input\r\n        id={id}\r\n        className={model.classNameInput}\r\n        placeholder={model.text}\r\n        checked={value || false}\r\n        onChange={() => setValue(!value)}\r\n        disabled={model.disabled}\r\n        type=\"checkbox\"\r\n      />\r\n    </InputWrapper>\r\n  );\r\n};\r\n\r\nexport default BooleanInput;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst BooleanName = ({ model, value }) =>\r\n  value ? <Wrapper className={model.className}>{model.text}</Wrapper> : null;\r\n\r\nexport default BooleanName;\r\n","import React from \"react\";\r\n\r\nclass BooleanVibrate extends React.Component {\r\n  // eslint-disable-next-line camelcase\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (this.props.value !== nextProps.value) this.vibrate(nextProps);\r\n  }\r\n  componentDidMount() {\r\n    this.vibrate(this.props);\r\n  }\r\n  vibrate(props) {\r\n    if (!navigator.vibrate) return;\r\n    const { atState, pattern } = props.model;\r\n    if (props.value === atState)\r\n      navigator.vibrate(pattern ? JSON.parse(pattern) : 300);\r\n  }\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default BooleanVibrate;\r\n","import React from \"react\";\r\nimport { Icon } from \"nystem-components\";\r\n\r\nconst BooleanView = ({ model, value }) =>\r\n  value ? <Icon className={model.className} type=\"checkmark\" /> : null;\r\n\r\nexport default BooleanView;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst isset = (val) => !!val && !(val instanceof Array && val.length === 0);\r\nconst isSetRecursive = (value) => {\r\n  if (typeof value === \"object\")\r\n    return Object.values(value)\r\n      .map((value) => isSetRecursive(value))\r\n      .filter((val) => val).length;\r\n\r\n  return isset(value);\r\n};\r\n\r\nconst ConditionalEmpty = ({ model, path, view }) => {\r\n  const { className, renderAs, item, invert, checkId } = model;\r\n\r\n  const empty = !isSetRecursive(view.getValue(checkId));\r\n\r\n  if ((empty && !invert) || (!empty && invert))\r\n    return (\r\n      <Wrapper className={className} renderAs={renderAs}>\r\n        <ContentTypeRender path={path} items={item} />\r\n      </Wrapper>\r\n    );\r\n\r\n  return null;\r\n};\r\nexport default ConditionalEmpty;\r\n","import React, { useCallback } from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst byType = {\r\n  \"<\": (v1, v2) => v1 < v2,\r\n  \">\": (v1, v2) => v1 > v2,\r\n  \"<=\": (v1, v2) => v1 <= v2,\r\n  \">=\": (v1, v2) => v1 >= v2,\r\n};\r\n\r\nconst ConditionalInt = ({ view, model, path }) => {\r\n  const testCondition = useCallback(() => {\r\n    const { condition } = model;\r\n    for (let i = 0; i < condition.length; i++) {\r\n      const [field, test] = condition[i];\r\n      const val = view.getValue(field);\r\n\r\n      const [, type, testVal] = test.match(/([<>=]{1,2})(.+)/im) || [];\r\n      if (byType[type](parseFloat(val), parseFloat(testVal))) return true;\r\n    }\r\n    return false;\r\n  }, [model, view]);\r\n\r\n  if (testCondition())\r\n    return (\r\n      <Wrapper className={model.className}>\r\n        <ContentTypeRender path={path} items={model.item} />\r\n      </Wrapper>\r\n    );\r\n  return null;\r\n};\r\n\r\nexport default ConditionalInt;\r\n","import { useEffect } from \"react\";\r\n\r\nconst isset = (val) => !!val && !(val instanceof Array && val.length === 0);\r\n\r\nconst ConditionalSet = ({ view, model, value }) => {\r\n  useEffect(() => {\r\n    const testCondition = (id, value) => {\r\n      const val = view.getValue(id);\r\n      if (value === \"false\") return !isset(val);\r\n      if (value === \"true\") return isset(val);\r\n\r\n      const reverse = value[0] === \"!\";\r\n      if (reverse) value = value.substring(1);\r\n      value = new RegExp(`^${value}$`, \"i\");\r\n      if (value.test(val)) {\r\n        if (!reverse) return true;\r\n      } else if (reverse) return true;\r\n    };\r\n\r\n    const onChange = ({ id }) => {\r\n      const { setId, condId, condVal } = model;\r\n      let { setValue } = model;\r\n      if (setValue === \"false\") setValue = false;\r\n      if (setValue === \"true\") setValue = true;\r\n      if (setValue === \"undefined\") setValue = undefined;\r\n\r\n      if (\r\n        id === condId &&\r\n        testCondition(condId, condVal) &&\r\n        view.getValue(setId) !== setValue\r\n      )\r\n        view.setValue({ path: setId, value: setValue });\r\n    };\r\n\r\n    view.on(\"change\", -1000, onChange);\r\n    return () => {\r\n      view.off(\"change\", onChange);\r\n    };\r\n  }, [model, value, view]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default ConditionalSet;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nclass ConditionalUserRole extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    this.view = props.view;\r\n    const state = {\r\n      value: props.value\r\n    };\r\n    state.visible = app().session.user\r\n      ? this.contains(app().session.user.role, this.model.role)\r\n      : false;\r\n    this.state = state;\r\n  }\r\n  contains(array1, array2) {\r\n    if (typeof array1 === \"string\") array1 = [array1];\r\n    if (typeof array2 === \"string\") array2 = [array2];\r\n\r\n    for (let i = 0; i < array1.length; i++)\r\n      if (array2.indexOf(array1[i]) !== -1) return true;\r\n\r\n    return false;\r\n  }\r\n  render() {\r\n    const className = this.props.model.className\r\n      ? this.props.model.className.join(\" \")\r\n      : \"\";\r\n    if (this.state.visible)\r\n      return (\r\n        <Wrapper className={className}>\r\n          {this.model.item.map(this.props.view.createItem, this)}\r\n        </Wrapper>\r\n      );\r\n    return null;\r\n  }\r\n}\r\nexport default ConditionalUserRole;\r\n","/* eslint-disable no-continue */\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst ConditionalValid = ({ view, model, path }) => {\r\n  const [valid, setValid] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n\r\n    const onChange = () => {\r\n      clearTimeout(timer);\r\n\r\n      timer = setTimeout(async () => {\r\n        const { errors = [] } = await view.event(\"validate\", { silent: true });\r\n\r\n        setValid(!errors.length);\r\n      }, 100);\r\n    };\r\n\r\n    view.on(\"change\", onChange);\r\n    return () => {\r\n      view.off(\"change\", onChange);\r\n    };\r\n  }, [view]);\r\n\r\n  if (valid)\r\n    return (\r\n      <Wrapper className={model.className}>\r\n        <ContentTypeRender path={path} items={model.item} />\r\n      </Wrapper>\r\n    );\r\n  return null;\r\n};\r\n\r\nexport default ConditionalValid;\r\n","/* eslint-disable no-continue */\r\nimport React, { useCallback } from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst isset = (val) => !!val && !(val instanceof Array && val.length === 0);\r\n\r\nconst ConditionalView = ({ view, model, path }) => {\r\n  const testCondition = useCallback(() => {\r\n    const { condition } = model;\r\n    for (let i = 0; i < condition.length; i++) {\r\n      const id = condition[i][0].replace(/^\\./i, `${path}.`);\r\n      const val = view.getValue(id);\r\n      let test = condition[i][1];\r\n      if (test === \"false\") {\r\n        if (!isset(val)) return true;\r\n        continue;\r\n      }\r\n      if (test === \"undefined\") {\r\n        if (val === undefined) return true;\r\n        continue;\r\n      }\r\n      if (test === \"true\") {\r\n        if (isset(val)) return true;\r\n        continue;\r\n      }\r\n      const reverse = test[0] === \"!\";\r\n      if (reverse) test = test.substring(1);\r\n      test = new RegExp(`^${test}$`, \"i\");\r\n\r\n      if (test.test(val)) {\r\n        if (!reverse) return true;\r\n      } else if (reverse) return true;\r\n    }\r\n    return false;\r\n  }, [model, path, view]);\r\n\r\n  if (testCondition())\r\n    return (\r\n      <Wrapper className={model.className}>\r\n        <ContentTypeRender path={path} items={model.item} />\r\n      </Wrapper>\r\n    );\r\n  return null;\r\n};\r\n\r\nexport default ConditionalView;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nclass ConditionalViewAndOr extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    this.view = props.view;\r\n    const state = {\r\n      value: this.view.value,\r\n    };\r\n    if (!state.value) state.value = {};\r\n    state.visible = this.testCondition(state.value);\r\n    this.view.on(\"change\", this.onChange);\r\n    this.tempValue = {};\r\n    this.state = state;\r\n  }\r\n  setValue(id, value) {\r\n    return this.view.setValue(id, value);\r\n  }\r\n  onChange() {\r\n    if (this.changeTimer) clearTimeout(this.changeTimer);\r\n    this.changeTimer = setTimeout(this.setValueView, 0);\r\n  }\r\n  setValueView() {\r\n    this.changeTimer = false;\r\n    if (this.inThis) return;\r\n    this.inThis = true;\r\n    const { value } = this.view;\r\n    const visible = this.testCondition(value);\r\n    /* if (!visible && this.state.visible)\r\n      for (let i=0;i<this.model.item.length;i++){\r\n        if (this.model.item[i].id){\r\n          this.tempValue[this.model.item[i].id] = value[this.model.item[i].id];\r\n          this.setValue(this.model.item[i].id);\r\n        } else\r\n        if (this.model.item[i].item){\r\n          for (let j=0;j<this.model.item[i].item.length;j++)\r\n            if (this.model.item[i].item[j].id)\r\n              this.setValue(this.model.item[i].item[j].id);\r\n        } else\r\n        if (this.refs['component'+i].clear)\r\n          this.refs['component'+i].clear();\r\n      } else\r\n      if (visible && !this.state.visible)\r\n        for (let i=0;i<this.model.item.length;i++)\r\n          if (this.model.item[i].id && typeof value[this.model.item[i].id] === 'undefined')\r\n            this.setValue(this.model.item[i].id,this.tempValue[this.model.item[i].id]); */\r\n\r\n    this.setState({\r\n      value: value,\r\n      visible: visible,\r\n    });\r\n    this.inThis = false;\r\n  }\r\n  valid() {\r\n    let valid = true;\r\n    if (this.state.visible)\r\n      for (let i = 0; i < this.model.item.length; i++)\r\n        // eslint-disable-next-line react/no-string-refs\r\n        if (!this.refs[`component${i}`].valid()) valid = false;\r\n    return valid;\r\n  }\r\n  visible() {\r\n    return this.state.visible;\r\n  }\r\n  testCondition(value) {\r\n    const { condition } = this.model;\r\n    if (!condition || !condition.length) return false;\r\n\r\n    function testOneCondition(condition) {\r\n      const key = condition[0];\r\n      const val = value[key];\r\n      let test = condition[1];\r\n      if (test === \"false\" || test === false) return !val;\r\n      if (test === \"true\" || test === true) return !!val;\r\n      const reverse = test[0] === \"!\";\r\n      if (reverse) test = test.substring(1);\r\n      test = new RegExp(`^${test}$`, \"i\");\r\n      if (test.test(val)) {\r\n        if (!reverse) return true;\r\n      } else if (reverse) return true;\r\n      return false;\r\n    }\r\n\r\n    let valid = true;\r\n    let sum = false;\r\n    const sumValidator = (condition) => {\r\n      let sum = 0;\r\n      condition = condition.split(\"||\");\r\n      return function (valid) {\r\n        if (typeof valid !== \"undefined\" && valid) sum++;\r\n        for (let i = 0; i < condition.length; i++)\r\n          if (parseInt(condition[i], 10) === sum) return true;\r\n        return false;\r\n      };\r\n    };\r\n    for (let i = 0; i < condition.length; i++) {\r\n      if (condition[i][0] === \"||\") {\r\n        if (sum) {\r\n          valid = sum();\r\n          sum = false;\r\n        }\r\n        if (valid) return true;\r\n        valid = true;\r\n      } else if (condition[i][0] === \"<sum>\") {\r\n        sum = sumValidator(condition[i][1]);\r\n      } else if (sum) sum(testOneCondition(condition[i]));\r\n      else valid = testOneCondition(condition[i]) && valid;\r\n    }\r\n    if (sum) valid = sum();\r\n    return valid;\r\n  }\r\n  componentWillUnmount() {\r\n    this.props.view.off(\"change\", this.onChange);\r\n  }\r\n  render() {\r\n    const { model, view } = this.props;\r\n    if (this.state.visible)\r\n      return (\r\n        <Wrapper className={model.className}>\r\n          {model.item.map(view.createItem, this)}\r\n        </Wrapper>\r\n      );\r\n    return null;\r\n  }\r\n}\r\nexport default ConditionalViewAndOr;\r\n","// Same as react-beautiful-dnd but more levels than 2\r\n\r\nimport React, { useState, useRef, useEffect, useContext, useMemo } from \"react\";\r\nimport app from \"nystem\";\r\n\r\nconst MyDragAndDropContext = React.createContext();\r\n\r\nexport const DragDropContext = ({ children, onDragEnd }) => {\r\n  const event = app().addeventhandler();\r\n\r\n  useEffect(() => {\r\n    event.on(\"onDragEnd\", onDragEnd);\r\n  }, [event, onDragEnd]);\r\n\r\n  return (\r\n    <MyDragAndDropContext.Provider value={{ event, parents: [] }}>\r\n      {children}\r\n    </MyDragAndDropContext.Provider>\r\n  );\r\n};\r\n\r\nconst styleDraggableItem = {\r\n  boxSizing: \"border-box\",\r\n  opacity: null,\r\n  pointerEvents: \"none\",\r\n  position: \"fixed\",\r\n  transform: null,\r\n  transition: \"opacity 0.2s cubic-bezier(0.2, 0, 0, 1)\",\r\n  zIndex: 4500,\r\n};\r\nconst offsetStyle = {\r\n  transform: \"translate(0px,0px)\",\r\n  transition:\r\n    \"transform 0.33s cubic-bezier(.2,1,.1,1), opacity 0.33s cubic-bezier(.2,1,.1,1)\",\r\n};\r\n\r\nexport const Droppable = ({ droppableId, type, children, isDropDisabled }) => {\r\n  const [style, setStyle] = useState(null);\r\n  const innerRef = useRef();\r\n  const styleRef = useRef();\r\n  styleRef.current = style;\r\n\r\n  const context = useContext(MyDragAndDropContext);\r\n  const { event } = context;\r\n\r\n  const provided = {\r\n    droppableProps: { style: style || offsetStyle },\r\n    innerRef,\r\n  };\r\n\r\n  const parents = useMemo(\r\n    () => [\r\n      ...context.parents,\r\n      ...(context.droppableId ? [context.droppableId] : []),\r\n    ],\r\n    [context.droppableId, context.parents]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (isDropDisabled) return;\r\n\r\n    const paddingBottom = parseInt(\r\n      window.getComputedStyle(innerRef.current).paddingBottom,\r\n      10\r\n    );\r\n\r\n    let size;\r\n    const stop = (result) => {\r\n      setStyle(null);\r\n      const { x, y } = result.pos;\r\n\r\n      if (y < size.top || y > size.bottom || x < size.left || x > size.right)\r\n        return;\r\n\r\n      if (result.destination.parents.includes(droppableId)) return;\r\n\r\n      return {\r\n        ...result,\r\n        destination: { ...result.destination, droppableId, parents },\r\n      };\r\n    };\r\n\r\n    const move = (result) => {\r\n      if (!innerRef.current) return;\r\n\r\n      size = innerRef.current.getBoundingClientRect();\r\n      const { x, y } = result;\r\n\r\n      if (y < size.top || y > size.bottom || x < size.left || x > size.right)\r\n        return;\r\n\r\n      if (result.parents.includes(droppableId)) return;\r\n\r\n      return { ...result, over: droppableId, parents };\r\n    };\r\n\r\n    const over = ({ over, height }) => {\r\n      if (!innerRef.current) return;\r\n\r\n      if (over !== droppableId) {\r\n        if (styleRef.current) setStyle(null);\r\n        return;\r\n      }\r\n      if (!styleRef.current)\r\n        setStyle({ ...offsetStyle, paddingBottom: paddingBottom + height });\r\n    };\r\n\r\n    event.on(`${type}Over`, over);\r\n    event.on(`${type}Move`, move);\r\n    event.on(`${type}Stop`, 100, stop);\r\n    return () => {\r\n      event.off(`${type}Over`, over);\r\n      event.on(`${type}Move`, move);\r\n      event.off(`${type}Stop`, stop);\r\n    };\r\n  }, [droppableId, event, isDropDisabled, parents, type]);\r\n\r\n  return (\r\n    <MyDragAndDropContext.Provider\r\n      value={{ ...context, parents, droppableId, isDropDisabled, type }}\r\n    >\r\n      {children(provided, { isDraggingOver: !!style })}\r\n    </MyDragAndDropContext.Provider>\r\n  );\r\n};\r\n\r\nexport const Draggable = ({ draggableId, index, children, minHeight = 0 }) => {\r\n  const [style, setStyle] = useState(null);\r\n\r\n  const innerRef = useRef();\r\n  const { event, droppableId, isDropDisabled, type } =\r\n    useContext(MyDragAndDropContext);\r\n\r\n  useEffect(() => {\r\n    if (isDropDisabled) return;\r\n\r\n    let breakpoint;\r\n    let currentStyle = null;\r\n\r\n    let offsetStyleSet = null;\r\n    const start = (props) => {\r\n      currentStyle = null;\r\n\r\n      if (props.draggableId === draggableId) return;\r\n\r\n      const size = innerRef.current.getBoundingClientRect();\r\n      breakpoint = size.top + size.height / 2;\r\n\r\n      offsetStyleSet = {\r\n        ...offsetStyle,\r\n        transform: `translate(0px, ${props.height}px)`,\r\n      };\r\n      setStyle({\r\n        transform:\r\n          props.y > breakpoint\r\n            ? offsetStyle\r\n            : `translate(0px, ${props.height}px)`,\r\n      });\r\n      currentStyle = true;\r\n    };\r\n\r\n    const move = (pos) => {\r\n      if (!currentStyle) return;\r\n      const size = innerRef.current.getBoundingClientRect();\r\n      breakpoint = size.top + size.height / 2;\r\n\r\n      if (pos.y < breakpoint && droppableId === pos.over) {\r\n        if (currentStyle === offsetStyleSet) return;\r\n        currentStyle = offsetStyleSet;\r\n      } else {\r\n        if (currentStyle === offsetStyle) return;\r\n        currentStyle = offsetStyle;\r\n      }\r\n      setStyle(currentStyle);\r\n    };\r\n\r\n    event.on(`${type}Start`, start);\r\n    event.on(`${type}Over`, move);\r\n    return () => {\r\n      event.off(`${type}Start`, start);\r\n      event.off(`${type}Over`, move);\r\n    };\r\n  }, [droppableId, draggableId, event, isDropDisabled, type]);\r\n\r\n  useEffect(() => {\r\n    if (isDropDisabled) return;\r\n\r\n    const stop = (result) => {\r\n      setStyle(null);\r\n      const { destination } = result;\r\n\r\n      const size = innerRef.current.getBoundingClientRect();\r\n      const breakpoint = size.top + size.height / 2;\r\n\r\n      if (destination.droppableId !== droppableId) return;\r\n      if (destination.index > index) return;\r\n      if (result.pos.y < breakpoint) return;\r\n\r\n      return {\r\n        ...result,\r\n        destination: { ...result.destination, index: index + 1 },\r\n      };\r\n    };\r\n\r\n    event.on(`${type}Stop`, stop);\r\n    return () => {\r\n      event.off(`${type}Stop`, stop);\r\n    };\r\n  }, [droppableId, event, index, isDropDisabled, type]);\r\n\r\n  const setStyles = (element, styles) =>\r\n    Object.entries(styles).forEach(([prop, val]) => {\r\n      element.style[prop] = val;\r\n    });\r\n\r\n  const onMouseDown = (e) => {\r\n    const baseProps = JSON.parse(\r\n      JSON.stringify(innerRef.current.getBoundingClientRect())\r\n    );\r\n\r\n    const style = {\r\n      ...styleDraggableItem,\r\n      ...baseProps,\r\n    };\r\n    minHeight = parseInt(minHeight, 10);\r\n    style.height = style.height < minHeight ? minHeight : style.height;\r\n\r\n    const movingState = {\r\n      x: e.clientX - style.left,\r\n      y: e.clientY - style.top,\r\n      height: style.height,\r\n      draggableId,\r\n      droppableId,\r\n      index,\r\n      type,\r\n    };\r\n    let pos = false;\r\n    const clonedElement = innerRef.current.cloneNode(true);\r\n\r\n    const mouseMove = (e) => {\r\n      if (!pos) {\r\n        document.body.appendChild(clonedElement);\r\n        setStyles(clonedElement, style);\r\n        clonedElement.style.width = `${baseProps.width}px`;\r\n        event.event(`${type}Start`, movingState);\r\n      }\r\n\r\n      pos = {\r\n        x: e.clientX - movingState.x,\r\n        y: e.clientY - movingState.y,\r\n        height: style.height,\r\n        parents: [],\r\n      };\r\n\r\n      setStyles(clonedElement, {\r\n        top: `${pos.y}px`,\r\n        left: `${pos.x}px`,\r\n        transform: \"scale(1.01,1.15)\",\r\n      });\r\n      setStyle({ display: \"none\" });\r\n      event\r\n        .event(`${type}Move`, pos)\r\n        .then((query) => event.event(`${type}Over`, query));\r\n    };\r\n\r\n    const mouseUp = () => {\r\n      window.removeEventListener(\"mousemove\", mouseMove);\r\n      window.removeEventListener(\"mouseup\", mouseUp);\r\n\r\n      if (!pos) return;\r\n\r\n      document.body.removeChild(clonedElement);\r\n\r\n      event\r\n        .event(`${type}Stop`, {\r\n          combine: null,\r\n          destination: { index: 0, parents: [] },\r\n          draggableId,\r\n          mode: \"FLUID\",\r\n          reason: \"DROP\",\r\n          source: { index, droppableId },\r\n          type,\r\n          pos,\r\n        })\r\n        .then((data) =>\r\n          event.event(\"onDragEnd\", {\r\n            ...data,\r\n            pos: undefined,\r\n          })\r\n        );\r\n\r\n      setStyle(null);\r\n      pos = false;\r\n    };\r\n\r\n    window.addEventListener(\"mouseup\", mouseUp);\r\n    window.addEventListener(\"mousemove\", mouseMove);\r\n  };\r\n\r\n  const onDragStart = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  if (style && style.display === \"none\") return null;\r\n\r\n  const provided = {\r\n    draggableProps: { style },\r\n    dragHandleProps: {\r\n      onMouseDown,\r\n      onDragStart,\r\n      draggable: false,\r\n      role: \"button\",\r\n      style: {},\r\n    },\r\n    innerRef,\r\n  };\r\n  return children(provided, {});\r\n};\r\n\r\nexport default () => {};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport app from \"nystem\";\r\nimport { DragDropContext } from \"./myDnd\";\r\n\r\nconst DragAndDropContext = ({ children }) => {\r\n  const modifiers = useRef({});\r\n  useEffect(() => {\r\n    const checkModifiers = (e) => {\r\n      const { shiftKey, metaKey, ctrlKey, altKey } = e;\r\n      modifiers.current = { shiftKey, metaKey, ctrlKey, altKey };\r\n    };\r\n    document.body.addEventListener(\"mouseup\", checkModifiers);\r\n    return () => {\r\n      document.body.removeEventListener(\"mouseup\", checkModifiers);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <DragDropContext\r\n      onDragEnd={(e) => {\r\n        app().event(\"dragAndDropOnDragEnd\", { ...modifiers.current, ...e });\r\n      }}\r\n    >\r\n      {children}\r\n    </DragDropContext>\r\n  );\r\n};\r\nexport default DragAndDropContext;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { ContentTypeRender } from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport { Droppable, Draggable } from \"./myDnd\";\r\n\r\nconst DragAndDropFixedVal = ({ value, model, path }) => {\r\n  const [droppableId] = useState(app().uuid());\r\n\r\n  useEffect(() => {\r\n    if (!value) return;\r\n\r\n    const onDragEndAddValue = (result) => {\r\n      if (result.source.droppableId !== droppableId) return;\r\n      result.source.value = JSON.parse(model.setValue);\r\n      result.source.uuid = droppableId;\r\n    };\r\n\r\n    app().on(\"dragAndDropOnDragEnd\", 100, onDragEndAddValue);\r\n    return () => {\r\n      app().off(\"dragAndDropOnDragEnd\", onDragEndAddValue);\r\n    };\r\n  }, [value, droppableId, model.setValue]);\r\n\r\n  const { item } = model;\r\n\r\n  return (\r\n    <Droppable\r\n      droppableId={droppableId}\r\n      type={model.valueType}\r\n      isDropDisabled={true}\r\n    >\r\n      {(provided) => {\r\n        // console.log(provided);\r\n        return (\r\n          <div {...provided.droppableProps} ref={provided.innerRef}>\r\n            <Draggable\r\n              key={droppableId}\r\n              draggableId={droppableId}\r\n              index={0}\r\n              minHeight={model.minHeight}\r\n            >\r\n              {(provided) => {\r\n                // console.log(provided.draggableProps.style);\r\n                return (\r\n                  <div\r\n                    ref={provided.innerRef}\r\n                    {...provided.draggableProps}\r\n                    {...provided.dragHandleProps}\r\n                    style={provided.draggableProps.style}\r\n                  >\r\n                    <ContentTypeRender path={path} items={item} />\r\n                  </div>\r\n                );\r\n              }}\r\n            </Draggable>\r\n            {provided.placeholder}\r\n          </div>\r\n        );\r\n      }}\r\n    </Droppable>\r\n  );\r\n};\r\n\r\nexport default DragAndDropFixedVal;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { ContentTypeRender, Wrapper } from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport { Droppable, Draggable } from \"./myDnd\";\r\n\r\nexport const DragAndDropListContext = React.createContext();\r\n\r\nconst DragAndDropList = ({ value = [], model, path, view }) => {\r\n  const [droppableId] = useState(app().uuid());\r\n\r\n  const ids = useRef([]);\r\n  const getId = (pos) => {\r\n    if (!ids.current[pos]) ids.current[pos] = app().uuid();\r\n    return ids.current[pos];\r\n  };\r\n\r\n  const { valueType } = model;\r\n  let { field } = model;\r\n  if (field instanceof Array) [field] = field;\r\n  if (!field) field = { id: \"item\" };\r\n\r\n  let valuePath = field.id.substring(field.id.lastIndexOf(\".\") + 1);\r\n  if (path) valuePath = `${path}.${valuePath}`;\r\n\r\n  value = view.getValue(valuePath);\r\n  value = value || [];\r\n\r\n  useEffect(() => {\r\n    const onDragEnd = (result) => {\r\n      const value = view.getValue(valuePath) || [];\r\n\r\n      let updated = false;\r\n\r\n      if (!result.ctrlKey && result.source.droppableId === droppableId) {\r\n        value.splice(result.source.index, 1);\r\n        ids.current.splice(result.source.index, 1);\r\n        updated = true;\r\n      }\r\n\r\n      if (\r\n        result.destination &&\r\n        result.destination.droppableId === droppableId\r\n      ) {\r\n        value.splice(result.destination.index, 0, result.source.value);\r\n        ids.current.splice(\r\n          result.destination.index,\r\n          0,\r\n          result.source.droppableId === droppableId\r\n            ? result.source.uuid\r\n            : app().uuid()\r\n        );\r\n        updated = true;\r\n      }\r\n\r\n      if (updated) view.setValue({ path: valuePath, value });\r\n    };\r\n\r\n    const onDragEndAddValue = (result) => {\r\n      if (result.source.droppableId !== droppableId) return;\r\n      const value = view.getValue(valuePath);\r\n      result.source.value = value[result.source.index];\r\n      result.source.uuid = result.ctrlKey\r\n        ? app().uuid()\r\n        : ids.current[result.source.index];\r\n    };\r\n\r\n    app().on(\"dragAndDropOnDragEnd\", 100, onDragEndAddValue);\r\n    app().on(\"dragAndDropOnDragEnd\", onDragEnd);\r\n    return () => {\r\n      app().off(\"dragAndDropOnDragEnd\", onDragEndAddValue);\r\n      app().off(\"dragAndDropOnDragEnd\", onDragEnd);\r\n    };\r\n  }, [droppableId, valuePath, view]);\r\n\r\n  if (!(value instanceof Array)) return null;\r\n\r\n  return (\r\n    <Droppable droppableId={droppableId} type={valueType}>\r\n      {(provided, snapshot) => (\r\n        <Wrapper\r\n          className={[\r\n            model.className,\r\n            snapshot.isDraggingOver && model.hoverClassName,\r\n          ]}\r\n          {...provided.droppableProps}\r\n          ref={provided.innerRef}\r\n        >\r\n          {value.map((item, index) => (\r\n            <Draggable\r\n              key={getId(index)}\r\n              draggableId={getId(index)}\r\n              index={index}\r\n              minHeight={model.minHeight}\r\n            >\r\n              {(provided) => (\r\n                <div\r\n                  ref={provided.innerRef}\r\n                  {...provided.draggableProps}\r\n                  style={provided.draggableProps.style}\r\n                >\r\n                  <DragAndDropListContext.Provider\r\n                    value={provided.dragHandleProps}\r\n                  >\r\n                    <ContentTypeRender\r\n                      path={`${path ? `${path}.` : \"\"}${field.id}.${index}`}\r\n                      items={model.item}\r\n                    />\r\n                  </DragAndDropListContext.Provider>\r\n                </div>\r\n              )}\r\n            </Draggable>\r\n          ))}\r\n          {provided.placeholder}\r\n        </Wrapper>\r\n      )}\r\n    </Droppable>\r\n  );\r\n};\r\nexport default DragAndDropList;\r\n","import React, { useContext } from \"react\";\r\nimport { ContentTypeRender, Icon, Wrapper } from \"nystem-components\";\r\nimport { DragAndDropListContext } from \"./list\";\r\n\r\nconst DragAndDropHandle = ({ model, path }) => {\r\n  const { item, className = [] } = model;\r\n  const dragHandleProps = useContext(DragAndDropListContext);\r\n\r\n  return (\r\n    <Wrapper className={className} {...dragHandleProps}>\r\n      {model.icon && <Icon icon=\"move\" className=\"w-8 h-8 py-2\" />}\r\n      {item && <ContentTypeRender path={path} items={item} />}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default DragAndDropHandle;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Droppable, Draggable } from \"./myDnd\";\r\n\r\nconst DragAndDropSortable = ({ Component, items = [], setValue }) => {\r\n  const [droppableId] = useState(app().uuid());\r\n  useEffect(() => {\r\n    if (!items.length) return;\r\n\r\n    const onDragEnd = (result) => {\r\n      const value = items.map((item) => item.id);\r\n      let updated = false;\r\n\r\n      if (result.source.droppableId === droppableId) {\r\n        value.splice(result.source.index, 1);\r\n        updated = true;\r\n      }\r\n\r\n      if (\r\n        result.destination &&\r\n        result.destination.droppableId === droppableId\r\n      ) {\r\n        value.splice(result.destination.index, 0, result.draggableId);\r\n        updated = true;\r\n      }\r\n\r\n      if (updated) setValue(value);\r\n    };\r\n\r\n    app().on(\"dragAndDropOnDragEnd\", onDragEnd);\r\n    return () => {\r\n      app().off(\"dragAndDropOnDragEnd\", onDragEnd);\r\n    };\r\n  }, [items, setValue, droppableId]);\r\n\r\n  if (!items.length) return null;\r\n\r\n  return (\r\n    <Droppable droppableId={droppableId} type={items[0].contentType}>\r\n      {(provided) => (\r\n        <div {...provided.droppableProps} ref={provided.innerRef}>\r\n          {items.map((item, index) => (\r\n            <Draggable key={item.id} draggableId={item.id} index={index}>\r\n              {(provided) => (\r\n                <div\r\n                  ref={provided.innerRef}\r\n                  {...provided.draggableProps}\r\n                  {...provided.dragHandleProps}\r\n                  style={provided.draggableProps.style}\r\n                >\r\n                  {<Component {...item} />}\r\n                </div>\r\n              )}\r\n            </Draggable>\r\n          ))}\r\n          {provided.placeholder}\r\n        </div>\r\n      )}\r\n    </Droppable>\r\n  );\r\n};\r\n\r\nexport default DragAndDropSortable;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { ContentTypeRender } from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport { Droppable, Draggable } from \"./myDnd\";\r\n\r\nconst DragAndDropView = ({ value, model, path }) => {\r\n  const [droppableId] = useState(app().uuid());\r\n\r\n  useEffect(() => {\r\n    if (!value) return;\r\n\r\n    const onDragEndAddValue = (result) => {\r\n      if (result.source.droppableId !== droppableId) return;\r\n      result.source.value = value;\r\n      result.source.uuid = droppableId;\r\n    };\r\n\r\n    app().on(\"dragAndDropOnDragEnd\", 100, onDragEndAddValue);\r\n    return () => {\r\n      app().off(\"dragAndDropOnDragEnd\", onDragEndAddValue);\r\n    };\r\n  }, [value, droppableId]);\r\n\r\n  if (!model) return null;\r\n  const { item } = model;\r\n  return (\r\n    <Droppable\r\n      droppableId={droppableId}\r\n      type={model.valueType}\r\n      isDropDisabled={true}\r\n    >\r\n      {(provided) => {\r\n        // console.log(provided);\r\n        return (\r\n          <div {...provided.droppableProps} ref={provided.innerRef}>\r\n            <Draggable\r\n              key={droppableId}\r\n              draggableId={droppableId}\r\n              index={0}\r\n              minHeight={model.minHeight}\r\n            >\r\n              {(provided) => {\r\n                // console.log(provided.draggableProps.style);\r\n                return (\r\n                  <div\r\n                    ref={provided.innerRef}\r\n                    {...provided.draggableProps}\r\n                    {...provided.dragHandleProps}\r\n                    style={provided.draggableProps.style}\r\n                  >\r\n                    <ContentTypeRender path={path} items={item} />\r\n                  </div>\r\n                );\r\n              }}\r\n            </Draggable>\r\n            {provided.placeholder}\r\n          </div>\r\n        );\r\n      }}\r\n    </Droppable>\r\n  );\r\n};\r\n\r\nexport default DragAndDropView;\r\n","import React, { useEffect, useState, useContext, useRef, useMemo } from \"react\";\r\nimport {\r\n  DatabaseSearchContext,\r\n  Wrapper,\r\n  ContentTypeRender,\r\n  ContentTypeView,\r\n} from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport { Droppable, Draggable } from \"./myDnd\";\r\nimport { DragAndDropListContext } from \"./list\";\r\n\r\nconst DragAndDropViewList = ({ model, view }) => {\r\n  const [droppableId] = useState(app().uuid());\r\n  const { search } = useContext(DatabaseSearchContext);\r\n  const ids = useRef([]);\r\n  const getId = (pos) => {\r\n    if (!ids.current[pos]) ids.current[pos] = app().uuid();\r\n    return ids.current[pos];\r\n  };\r\n\r\n  const { emptyFields, className = [], valueType } = model;\r\n  const value = useMemo(() => (search && search.data) || [], [search]);\r\n\r\n  useEffect(() => {\r\n    const onDragEnd = (result) => {\r\n      if (result.destination.droppableId !== droppableId) return;\r\n\r\n      result.destination.id = view.id;\r\n      result.destination.value = value;\r\n      result.destination.type = valueType;\r\n      result.destination.contentType = view.contentType;\r\n    };\r\n\r\n    const onDragEndAddValue = (result) => {\r\n      if (result.source.droppableId !== droppableId) return;\r\n\r\n      result.source.value = value[result.source.index];\r\n      result.source.type = valueType;\r\n      result.source.contentType = view.contentType;\r\n      result.source.uuid = result.ctrlKey\r\n        ? app().uuid()\r\n        : ids.current[result.source.index];\r\n    };\r\n\r\n    app().on(\"dragAndDropOnDragEnd\", 100, onDragEndAddValue);\r\n    app().on(\"dragAndDropOnDragEnd\", 90, onDragEnd);\r\n    return () => {\r\n      app().off(\"dragAndDropOnDragEnd\", onDragEndAddValue);\r\n      app().off(\"dragAndDropOnDragEnd\", onDragEnd);\r\n    };\r\n  }, [droppableId, value, valueType, view]);\r\n\r\n  if (value.length === 0 && emptyFields && emptyFields.length > 0)\r\n    return (\r\n      <Wrapper className={className}>\r\n        <ContentTypeRender items={emptyFields} />\r\n      </Wrapper>\r\n    );\r\n\r\n  const createItem = (item) => {\r\n    const id = [\"number\", \"string\"].includes(typeof item) ? item : item._id;\r\n\r\n    const settings = {\r\n      view: model,\r\n      contentType: view.contentType,\r\n      id,\r\n      key: id,\r\n      noForm: true,\r\n      baseView: view,\r\n      params: view.params,\r\n      className: model.rowClassName,\r\n      renderAs: item.renderAs,\r\n    };\r\n\r\n    return <ContentTypeView {...settings} />;\r\n  };\r\n\r\n  return (\r\n    <Droppable droppableId={droppableId} type={valueType}>\r\n      {(provided) => (\r\n        <Wrapper\r\n          className={className}\r\n          {...provided.droppableProps}\r\n          ref={provided.innerRef}\r\n        >\r\n          {value.map((item, index) => (\r\n            <Draggable\r\n              key={getId(index)}\r\n              draggableId={getId(index)}\r\n              index={index}\r\n              minHeight={model.minHeight}\r\n            >\r\n              {(provided) => (\r\n                <Wrapper\r\n                  ref={provided.innerRef}\r\n                  {...provided.draggableProps}\r\n                  style={provided.draggableProps.style}\r\n                >\r\n                  <DragAndDropListContext.Provider\r\n                    value={provided.dragHandleProps}\r\n                  >\r\n                    {createItem(item)}\r\n                  </DragAndDropListContext.Provider>\r\n                </Wrapper>\r\n              )}\r\n            </Draggable>\r\n          ))}\r\n          {provided.placeholder}\r\n        </Wrapper>\r\n      )}\r\n    </Droppable>\r\n  );\r\n};\r\nexport default DragAndDropViewList;\r\n","import React from \"react\";\r\nimport { TextExposedField } from \"nystem-components\";\r\n\r\nconst EmailExposedField = (props) => <TextExposedField {...props} />;\r\nexport default EmailExposedField;\r\n","export default ({ value, model }) => {\r\n  if (model.mandatory && !value) return model.text_mandatory;\r\n  if (!value) return false;\r\n  if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,6}$/im.test(value))\r\n    return \"Incorrect e-mail adress\";\r\n  return false;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { InputWrapper, Input, UseValidator } from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport validate from \"./validate\";\r\n\r\nconst EmailInput = ({ model, view, focus, setValue, value, className }) => {\r\n  const [error, setValidated] = UseValidator({ view, validate, value, model });\r\n  const { disabled, length, text, clearButton, classNameInput } = model;\r\n  const [id] = useState(app().uuid);\r\n\r\n  const componentClassName = [\r\n    className,\r\n    ...(model.className || []),\r\n    \"textInput\",\r\n  ];\r\n  if (clearButton) componentClassName.push(\"flex\");\r\n\r\n  return (\r\n    <InputWrapper\r\n      id={id}\r\n      model={model}\r\n      error={error}\r\n      className={componentClassName}\r\n    >\r\n      <Input\r\n        id={id}\r\n        placeholder={app().t(text)}\r\n        className={classNameInput}\r\n        value={value || \"\"}\r\n        maxLength={length}\r\n        onChange={(value) => setValue(value.toLowerCase())}\r\n        disabled={disabled}\r\n        type=\"text\"\r\n        focus={focus}\r\n        onBlur={() => setValidated(true)}\r\n      />\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default EmailInput;\r\n","import React, { useState } from \"react\";\r\nimport { InputWrapper, Input } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst EmailInputNoValidation = ({ model, focus, setValue, value, className }) => {\r\n  const { disabled, length, text, clearButton, classNameInput } = model;\r\n  const [id] = useState(app().uuid);\r\n\r\n  const componentClassName = [\r\n    className,\r\n    ...(model.className || []),\r\n    \"textInput\",\r\n  ];\r\n  if (clearButton) componentClassName.push(\"flex\");\r\n\r\n  return (\r\n    <InputWrapper id={id} model={model} className={componentClassName}>\r\n      <Input\r\n        id={id}\r\n        placeholder={app().t(text)}\r\n        className={classNameInput}\r\n        value={value || \"\"}\r\n        maxLength={length}\r\n        onChange={(value) => setValue(value)}\r\n        disabled={disabled}\r\n        type=\"text\"\r\n        focus={focus}\r\n      />\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default EmailInputNoValidation;\r\n","import React from \"react\";\r\nimport { TextLink } from \"nystem-components\";\r\n\r\nconst EmailLink = props => <TextLink {...props} />;\r\nexport default EmailLink;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst EmailMailto = ({ model, value }) => {\r\n  const { className, item } = model;\r\n\r\n  return (\r\n    <Wrapper renderAs=\"a\" href={`mailto:${value}`} className={className}>\r\n      <ContentTypeRender items={item} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default EmailMailto;\r\n","import React from \"react\";\r\nimport { TextSortBy } from \"nystem-components\";\r\n\r\nconst EmailSortBy = (props) => <TextSortBy {...props} />;\r\nexport default EmailSortBy;\r\n","/* eslint-disable react/no-string-refs */\r\nimport React from \"react\";\r\nimport app from \"nystem\";\r\nimport { InputWrapper } from \"nystem-components\";\r\n\r\nclass EmailVerifiedInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    const state = {\r\n      value: props.value,\r\n    };\r\n    if (props.add && this.model.default)\r\n      this.props.setValue(this.model.id, this.model.default);\r\n    this.errormsg = this.model.text_mandatory\r\n      ? this.model.text_mandatory\r\n      : true;\r\n    this.validated = false;\r\n    this.state = state;\r\n  }\r\n  handleChange() {\r\n    this.validated = true;\r\n    const { value } = this.refs.input;\r\n    this.setState({\r\n      value: value,\r\n      error: this.model.mandatory && !value ? this.errormsg : false,\r\n    });\r\n    this.props.setValue(this.model.id, value);\r\n  }\r\n  valid() {\r\n    this.validated = true;\r\n    if (this.model.mandatory && !this.state.value) {\r\n      this.setState({\r\n        error: this.errormsg,\r\n      });\r\n      return false;\r\n    }\r\n    if (this.test(this.state.value)) {\r\n      this.setState({\r\n        error: \"Incorrect e-mail adress\",\r\n      });\r\n      return false;\r\n    }\r\n    if (this.state.error) delete this.state.error;\r\n    return true;\r\n  }\r\n  test(value) {\r\n    return (\r\n      (this.validated && this.model.mandatory && !value) ||\r\n      !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,6}$/im.test(value)\r\n    );\r\n  }\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (this.props.value !== nextProps.value) {\r\n      const error = this.validated && this.model.mandatory && !nextProps.value;\r\n      this.setState({\r\n        value: nextProps.value,\r\n        error: error ? this.errormsg : false,\r\n      });\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.focus) this.refs.input.focus();\r\n  }\r\n  render() {\r\n    return (\r\n      <InputWrapper model={this.model} error={this.state.error}>\r\n        <input\r\n          ref=\"input\"\r\n          placeholder={app().t(this.model.text)}\r\n          className=\"form-control\"\r\n          value={this.state.value}\r\n          maxLength={this.model.length}\r\n          onChange={this.handleChange}\r\n          type=\"text\"\r\n        />\r\n      </InputWrapper>\r\n    );\r\n  }\r\n}\r\nexport default EmailVerifiedInput;\r\n","import React from \"react\";\r\nimport { TextView } from \"nystem-components\";\r\n\r\nconst EmailView = props => <TextView {...props} />;\r\nexport default EmailView;\r\n","import React from \"react\";\r\nimport * as components from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nclass FlatgroupInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    if (!this.model.add2id) this.model.add2id = \"\";\r\n    this.state = {\r\n      value: props.value || {},\r\n    };\r\n  }\r\n  setValue(id, value) {\r\n    const val = this.state.value;\r\n    val[this.model.add2id + id] = value;\r\n    if (this.props.setValue) this.props.setValue(this.model.add2id + id, val);\r\n  }\r\n  valid() {\r\n    let valid = true;\r\n    for (let i = 0; i < this.model.item.length; i++)\r\n      // eslint-disable-next-line react/no-string-refs\r\n      if (!this.refs[`component${i}`].valid()) valid = false;\r\n    return valid;\r\n  }\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (this.props.value !== nextProps.value)\r\n      this.setState({ value: nextProps.value });\r\n  }\r\n  render() {\r\n    const self = this;\r\n    let groupVal = false;\r\n    function getGroupVal() {\r\n      if (!groupVal) {\r\n        if (!self.model.add2id) return self.state.value;\r\n        groupVal = {};\r\n        for (const item of self.state.value) {\r\n          const startWith = new RegExp(`^${self.model.add2id}`, \"i\");\r\n          if (startWith.test(item))\r\n            groupVal[item.replace(startWith, \"\")] = self.state.value[item];\r\n        }\r\n      }\r\n      return groupVal;\r\n    }\r\n    const createItem = (item, index) => {\r\n      const value = item.id\r\n        ? self.state.value[self.model.add2id + item.id]\r\n        : getGroupVal();\r\n      return React.createElement(\r\n        components[`${app().capFirst(item.type)}Input`],\r\n        {\r\n          ref: `component${index}`,\r\n          model: item,\r\n          value: value,\r\n          setValue: self.setValue,\r\n          validated: self.props.validated,\r\n          add: self.props.add,\r\n        }\r\n      );\r\n    };\r\n    return (\r\n      <div>\r\n        <h3>{app().t(this.model.text)}</h3>\r\n        <div>{this.model.item.map(createItem)}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default FlatgroupInput;\r\n","import React from \"react\";\r\nimport {\r\n  InputWrapper,\r\n  FloatInput,\r\n  UseSearch,\r\n  RouterUseQueryStore,\r\n} from \"nystem-components\";\r\n\r\nconst FloatExposedField = ({ model, view }) => {\r\n  const [from, setFrom] = RouterUseQueryStore(model.saveIdFrom, \"float\");\r\n  const [to, setTo] = RouterUseQueryStore(model.saveIdTo, \"float\");\r\n\r\n  UseSearch({ view, id: model.id, value: from && `>${from}` });\r\n  UseSearch({ view, id: model.id, value: to && `<${to}` });\r\n\r\n  const base = {\r\n    clearButton: true,\r\n    classNameInput: [\"w-16\"],\r\n    nolabel: true,\r\n    id: \"1\",\r\n  };\r\n  const modelFrom = { ...base, text: \"From\" };\r\n  const modelTo = { ...base, text: \"To\" };\r\n\r\n  return (\r\n    <InputWrapper model={model}>\r\n      <div className=\"flex items-center\">\r\n        <FloatInput model={modelFrom} value={from} setValue={setFrom} />-\r\n        <FloatInput model={modelTo} value={to} setValue={setTo} />\r\n      </div>\r\n    </InputWrapper>\r\n  );\r\n};\r\n\r\nexport default FloatExposedField;\r\n","export default ({ value, model }) =>\r\n  model.mandatory && !value && model.text_mandatory;\r\n","import React from \"react\";\r\nimport { InputWrapper, Input, UseValidator } from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport validate from \"./validate\";\r\n\r\nconst FloatInput = ({ model, view, focus, setValue, value, className }) => {\r\n  const [error, setValidated] = UseValidator({ view, validate, value, model });\r\n  const { disabled, length, text, clearButton } = model;\r\n\r\n  const componentClassName = [\r\n    className,\r\n    ...(model.className || []),\r\n    \"textInput\",\r\n  ];\r\n  if (clearButton) componentClassName.push(\"flex\");\r\n\r\n  const inputClassName = [\"textInputDefault\"];\r\n  if (error) inputClassName.push(\"textInputError\");\r\n\r\n  return (\r\n    <InputWrapper\r\n      model={{ ...model, classNameInput: \"flex\", classNameLabel: \" \" }}\r\n      error={error}\r\n      className={componentClassName}\r\n    >\r\n      <Input\r\n        placeholder={app().t(text)}\r\n        className={model.classNameInput}\r\n        value={!value && value !== 0 ? \"\" : value}\r\n        maxLength={length}\r\n        onChange={(value) => {\r\n          const val = value.replace(/[^0-9.-]/gim, \"\");\r\n          setValue(val ? parseFloat(val) : undefined);\r\n        }}\r\n        disabled={disabled}\r\n        type=\"text\"\r\n        focus={model.focus || focus}\r\n        onBlur={() => setValidated(true)}\r\n        selectAllOnFocus={model.selectAllOnFocus}\r\n      />\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default FloatInput;\r\n","import React from \"react\";\r\nimport { TextLink } from \"nystem-components\";\r\n\r\nconst FloatLink = (props) => <TextLink {...props} />;\r\nexport default FloatLink;\r\n","import React from \"react\";\r\nimport { TextSortBy } from \"nystem-components\";\r\n\r\nconst FloatSortBy = (props) => <TextSortBy {...props} />;\r\nexport default FloatSortBy;\r\n","import React from \"react\";\r\nimport { TextView } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nfunction outputFloat({ value, model }) {\r\n  if (!value || !model || !model.tofixed) return value;\r\n  value = parseFloat(value).toFixed(model.tofixed);\r\n  return app().settings.lang === \"sv\" ? value.replace(\".\", \",\") : value;\r\n}\r\n\r\nconst FloatView = (props) => <TextView {...props} value={outputFloat(props)} />;\r\nexport default FloatView;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst GroupView = ({ view, model, path }) => (\r\n  <Wrapper className={model.className}>\r\n    <ContentTypeRender\r\n      items={model.item}\r\n      path={view.getValuePath(path, model.id)}\r\n    />\r\n  </Wrapper>\r\n);\r\nexport default GroupView;\r\n","import React from \"react\";\r\nimport { InputWrapper, IntInput } from \"nystem-components\";\r\n\r\nclass IntExposedField extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    props.view.searchProp.onUpdate(this.update);\r\n    this.classNameBase = this.model.className ? this.model.className : [];\r\n    this.updateCounter = 0;\r\n  }\r\n  update() {\r\n    if (this.id) {\r\n      const state = {};\r\n      const modelId = this.model.id;\r\n\r\n      state.from = this.props.view.searchProp.filter.get(`${this.id}_from`);\r\n      if (state.from !== \"undefined\" && state.from[modelId])\r\n        state.from = state.from[modelId].substring(1);\r\n      else delete state.from;\r\n\r\n      state.to = this.props.view.searchProp.filter.get(`${this.id}_to`);\r\n      if (state.to !== \"undefined\" && state.to[modelId])\r\n        state.to = state.to[modelId].substring(1);\r\n      else delete state.to;\r\n      if (typeof state.from !== \"undefined\" || typeof state.to !== \"undefined\")\r\n        this.setState(state);\r\n    }\r\n    const self = this;\r\n    if (this.updateCounter > 0) this.updateCounter--;\r\n    if (this.state.className === \"\" || this.updateCounter > 0) return;\r\n    this.setState({\r\n      className: \"has-success\",\r\n    });\r\n    this.delayTimer = setTimeout(() => {\r\n      if (self.isMounted())\r\n        self.setState({\r\n          className: \"\",\r\n        });\r\n    }, 1000);\r\n  }\r\n  search(id, value) {\r\n    if (value === \"\") value = undefined;\r\n    const self = this;\r\n    clearTimeout(this.delayTimer);\r\n    const state = {\r\n      className: \"has-warning\",\r\n    };\r\n    state[id] = value;\r\n    this.setState(state);\r\n    this.delayTimer = setTimeout(() => {\r\n      self.updateCounter++;\r\n      if (value)\r\n        if (id === \"to\") value = `<${value}`;\r\n        else value = `>${value}`;\r\n\r\n      self.props.view.searchProp.filter.add(\r\n        self.model.id,\r\n        value,\r\n        `${self.id}_${id}`\r\n      );\r\n    }, 200);\r\n  }\r\n  componentDidMount() {}\r\n  componentWillUnmount() {\r\n    this.props.view.searchProp.offUpdate(this.update);\r\n    clearTimeout(this.delayTimer);\r\n  }\r\n  render() {\r\n    /* const model = this.props.model;\r\n    const className = model.className && !this.props.wrapper\r\n      ? model.className.join(\" \")\r\n      : \"\"; */\r\n    const modelFrom = {\r\n      id: \"from\",\r\n      placeholder: \"From\",\r\n      clearButton: true,\r\n    };\r\n    const modelTo = {\r\n      id: \"to\",\r\n      placeholder: \"To\",\r\n      clearButton: true,\r\n    };\r\n    const style = {\r\n      width: \"100px\",\r\n    };\r\n    return (\r\n      <InputWrapper model={this.model} error={this.state.error}>\r\n        <div className=\"form-inline\">\r\n          <IntInput\r\n            style={style}\r\n            model={modelFrom}\r\n            value={this.state.from}\r\n            setValue={this.search}\r\n          />\r\n          {\" - \"}\r\n          <IntInput\r\n            style={style}\r\n            model={modelTo}\r\n            value={this.state.to}\r\n            setValue={this.search}\r\n          />\r\n        </div>\r\n      </InputWrapper>\r\n    );\r\n  }\r\n}\r\nexport default IntExposedField;\r\n","export default ({ value, model }) =>\r\n  model.mandatory && !value && model.text_mandatory;\r\n","import React, { useState } from \"react\";\r\nimport { InputWrapper, Input, UseValidator } from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport validate from \"./validate\";\r\n\r\nconst IntInput = ({ model, view, focus, setValue, value, className }) => {\r\n  const [error, setValidated] = UseValidator({ view, validate, value, model });\r\n  const { disabled, length, text, clearButton } = model;\r\n  const [id] = useState(app().uuid);\r\n\r\n  const componentClassName = [\r\n    className,\r\n    ...(model.className || []),\r\n    \"textInput\",\r\n  ];\r\n  if (clearButton) componentClassName.push(\"flex\");\r\n\r\n  const inputClassName = [\"textInputDefault\"];\r\n  if (error) inputClassName.push(\"textInputError\");\r\n\r\n  return (\r\n    <InputWrapper\r\n      id={id}\r\n      model={{ ...model, classNameInput: \"flex\", classNameLabel: \" \" }}\r\n      error={error}\r\n      className={componentClassName}\r\n    >\r\n      <Input\r\n        id={id}\r\n        placeholder={app().t(text)}\r\n        className={model.classNameInput}\r\n        value={!value && value !== 0 ? \"\" : value}\r\n        maxLength={length}\r\n        onChange={(value) => {\r\n          const intVal = value.replace(/[^0-9-]/gim, \"\");\r\n          setValue(\r\n            intVal === \"-\" ? intVal : intVal ? parseInt(intVal, 10) : undefined\r\n          );\r\n        }}\r\n        disabled={disabled}\r\n        type=\"text\"\r\n        focus={model.focus || focus}\r\n        onBlur={() => setValidated(true)}\r\n        selectAllOnFocus={model.selectAllOnFocus}\r\n      />\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default IntInput;\r\n","import React from \"react\";\r\nimport { TextLink } from \"nystem-components\";\r\n\r\nconst IntLink = (props) => <TextLink {...props} />;\r\nexport default IntLink;\r\n","import React from \"react\";\r\nimport { TextSortBy } from \"nystem-components\";\r\n\r\nconst IntSortBy = props => <TextSortBy {...props} />;\r\nexport default IntSortBy;\r\n","import React from \"react\";\r\nimport { TextView } from \"nystem-components\";\r\n\r\nconst IntView = ({ value, ...props }) => (\r\n  <TextView {...props} value={value === 0 ? \"0\" : value} />\r\n);\r\nexport default IntView;\r\n","import React from \"react\";\r\nimport { InputWrapper, Input } from \"nystem-components\";\r\n\r\nconst MatrixInput = ({ value, model, setValue }) => {\r\n  const { limit = 0, rowLabel } = model;\r\n\r\n  value = value || [];\r\n  if (!limit || value.length < limit) value = [...value, []];\r\n\r\n  const handleChange = (atRow, index, newVal) => {\r\n    const len = value.length;\r\n    const val = value.slice(0, atRow === len - 1 ? len : len - 1);\r\n\r\n    val[atRow][index] = newVal;\r\n\r\n    if (val[len - 2] && !val[len - 2][0]) setValue(val.slice(0, len - 2));\r\n    else setValue(val);\r\n  };\r\n\r\n  const mapHeader = (item, index) => <th key={index}>{item}</th>;\r\n\r\n  const mapField = (label, atRow, index) => {\r\n    const val = value[atRow][index] ? value[atRow][index] : \"\";\r\n    return (\r\n      <td key={index}>\r\n        <Input\r\n          placeholder={label}\r\n          className=\"form-control\"\r\n          value={val}\r\n          maxLength={model.length}\r\n          onChange={(val) => handleChange(atRow, index, val)}\r\n          type=\"text\"\r\n        />\r\n      </td>\r\n    );\r\n  };\r\n\r\n  const mapRow = (item, rowIndex) => (\r\n    <tr key={rowIndex}>\r\n      {model.rowLabel.map((label, index) => mapField(label, rowIndex, index))}\r\n    </tr>\r\n  );\r\n\r\n  return (\r\n    <InputWrapper model={model}>\r\n      <table>\r\n        <thead>\r\n          <tr>{rowLabel.map(mapHeader)}</tr>\r\n        </thead>\r\n        <tbody>{value.map(mapRow)}</tbody>\r\n      </table>\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default MatrixInput;\r\n","import React from \"react\";\r\n\r\nclass MatrixInputlist extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let val = props.value || [];\r\n    if (!(val instanceof Array)) val = [val];\r\n    if (val.length > props.limit) this.state = { value: val.concat([]) };\r\n    else this.state = { value: val.concat([\"\"]) };\r\n  }\r\n  handleChange() {\r\n    const val = [];\r\n    for (let i = 0; i < this.state.value.length; i++) {\r\n      // eslint-disable-next-line react/no-string-refs\r\n      const oneVal = this.refs[`input${i}`].value;\r\n      if (oneVal) val.push(oneVal);\r\n    }\r\n    if (this.props.setValue) this.props.setValue(val);\r\n\r\n    this.setState({\r\n      value: val.length > this.props.limit ? val.concat([\"\"]) : val.concat([]),\r\n    });\r\n  }\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (this.props.value !== nextProps.value) {\r\n      let val = nextProps.value;\r\n      if (typeof nextProps.value === \"string\") val = [nextProps.value];\r\n      this.setState({ value: val.concat([\"\"]) });\r\n    }\r\n  }\r\n  render() {\r\n    const self = this;\r\n    const inputKeyField = (item, index) => {\r\n      return (\r\n        <input\r\n          ref={`inputKey${index}`}\r\n          className=\"form-control\"\r\n          value={item}\r\n          onChange={self.handleKeyChange}\r\n          type=\"text\"\r\n        />\r\n      );\r\n    };\r\n    const inputValueField = (item, index) => {\r\n      return (\r\n        <input\r\n          ref={`inputValue${index}`}\r\n          className=\"form-control\"\r\n          value={item}\r\n          onChange={self.handleChange}\r\n          type=\"text\"\r\n        />\r\n      );\r\n    };\r\n    return (\r\n      <div>\r\n        <div className=\"col-sm-3\">{this.state.value.map(inputKeyField)}</div>\r\n        <div className=\"col-sm-3\">{this.state.value.map(inputValueField)}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default MatrixInputlist;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Button, Icon } from \"nystem-components\";\r\n\r\nconst MultigroupAddRemove = ({ model, view, setValue, value, path }) => {\r\n  const doDelete = () => {\r\n    const parts = path.split(\".\");\r\n    const valPath = parts.slice(0, parts.length - 1).join(\".\");\r\n    console.log({ valPath, parts }, view.getValue(valPath));\r\n    const parentVal = [...view.getValue(valPath)];\r\n    parentVal.splice(parts[parts.length - 1], 1);\r\n\r\n    view.setValue({ path: valPath, value: parentVal });\r\n  };\r\n\r\n  const doAdd = () => setValue([...value, {}]);\r\n\r\n  value = value || [];\r\n  const { action } = model;\r\n\r\n  return (\r\n    <Button\r\n      renderAs=\"button\"\r\n      className={model.className}\r\n      type={model.btnType}\r\n      onClick={action === \"Add\" ? doAdd : doDelete}\r\n      size={model.btnSize}\r\n      title={action}\r\n    >\r\n      {!model.buttonText ? (\r\n        <Icon\r\n          className={[\"w-4 h-4\", action === \"Add\" && \"transform rotate-45\"]}\r\n          icon=\"close\"\r\n          title={action}\r\n        />\r\n      ) : (\r\n        app().t(model.buttonText)\r\n      )}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default MultigroupAddRemove;\r\n","import React, { useRef, useState } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Button, Icon } from \"nystem-components\";\r\nimport \"./copyItem.css\";\r\n\r\nconst MultigroupCopyItem = ({ model, value = [], path, view, setValue }) => {\r\n  const ref = useRef();\r\n  const [active, setActive] = useState(false);\r\n\r\n  const doCopyVal = () => {\r\n    const { current } = ref;\r\n    current.value = JSON.stringify(value, null, \"  \");\r\n    current.style.display = \"block\";\r\n    current.select();\r\n    try {\r\n      console.log(\"copy text\");\r\n      document.execCommand(\"copy\");\r\n      current.blur();\r\n      current.style.display = \"none\";\r\n    } catch (err) {\r\n      console.log(\"please press Ctrl/Cmd+C to copy\");\r\n    }\r\n    setActive(true);\r\n    setTimeout(() => {\r\n      setActive(false);\r\n    }, 200);\r\n  };\r\n\r\n  const doPasteVal = () => {\r\n    navigator.clipboard.readText().then((clipText) => {\r\n      const clipVal = JSON.parse(clipText);\r\n      if (!/\\.[0-9]+$/im.test(path)) {\r\n        if (clipVal instanceof Array) setValue([...clipVal, ...value]);\r\n        else setValue([clipVal, ...value]);\r\n        return;\r\n      }\r\n      const parts = path.split(\".\");\r\n      const valPath = parts.slice(0, parts.length - 1).join(\".\");\r\n      const parentVal = [...view.getValue(valPath)];\r\n      try {\r\n        parentVal.splice(parts[parts.length - 1], 0, clipVal);\r\n\r\n        view.setValue({ path: valPath, value: parentVal });\r\n        // eslint-disable-next-line no-empty\r\n      } catch (e) {}\r\n    });\r\n    setActive(true);\r\n    setTimeout(() => {\r\n      setActive(false);\r\n    }, 200);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <textarea\r\n        className=\"bg-black\"\r\n        ref={ref}\r\n        style={{\r\n          display: \"none\",\r\n          position: \"absolute\",\r\n        }}\r\n        readOnly={true}\r\n      />\r\n      <Button\r\n        renderAs=\"button\"\r\n        className={[...(model.className || []), active ? \"copyItemBounce\" : \"\"]}\r\n        type={model.btnType}\r\n        onClick={model.direction === \"paste\" ? doPasteVal : doCopyVal}\r\n        size={model.btnSize}\r\n        title={model.direction}\r\n      >\r\n        {[\"edit-copy\", \"paste\"].includes(model.text) ? (\r\n          <Icon className=\"w-4 h-4\" icon={model.text} alt={model.text} />\r\n        ) : (\r\n          app().t(model.text)\r\n        )}\r\n      </Button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MultigroupCopyItem;\r\n","import React from \"react\";\r\nimport { ContentTypeRender } from \"nystem-components\";\r\nimport { fallback } from \"./input.json\";\r\n// http://manager.localhost:9154/view/input/view_testmultigroup\r\n\r\nconst replaceInObject = (item, fn) => {\r\n  if (item instanceof Array)\r\n    return item.map((item) => replaceInObject(item, fn));\r\n\r\n  if (typeof item === \"object\") {\r\n    item = fn(item);\r\n\r\n    Object.entries(item).forEach(([key, value]) => {\r\n      item[key] = replaceInObject(value, fn);\r\n    });\r\n  }\r\n  return item;\r\n};\r\n\r\nconst MultigroupInput = ({ model, path }) => {\r\n  const item = replaceInObject(fallback, (item) => {\r\n    if (item.id && item.id.startsWith(\"testmultigroup\"))\r\n      return item.id === \"testmultigroup._id\"\r\n        ? model.header\r\n          ? { type: \"style\", item: model.header }\r\n          : { ...item, id: `${model.idField || \"_id\"}` }\r\n        : { ...item, id: item.id.replace(\"testmultigroup\", model.id) };\r\n\r\n    if (item.item === \"item\")\r\n      return {\r\n        ...item,\r\n        item: model.item.map((field) => ({\r\n          ...field,\r\n          id:\r\n            field.id && field.id.includes(\".\")\r\n              ? field.id\r\n              : `${model.id}.${field.id}`,\r\n        })),\r\n      };\r\n\r\n    if (item.text === \"{name}\") return { ...item, text: model.text };\r\n    return { ...item };\r\n  });\r\n\r\n  return <ContentTypeRender path={path} items={[item]} />;\r\n};\r\nexport default MultigroupInput;\r\n","import { useEffect, useContext } from \"react\";\r\nimport { PanelContext } from \"nystem-components\";\r\n\r\nconst MultigroupPanelOpenByValue = ({ model, view, path }) => {\r\n  const { toggleExpand, expanded } = useContext(PanelContext);\r\n\r\n  useEffect(() => {\r\n    const value = view.getValue(path);\r\n\r\n    if (model.keyCount || model.keyCount === 0) {\r\n      const parentVal = view.getValue(path);\r\n      if (!parentVal) return;\r\n\r\n      let setExpanded =\r\n        Object.keys(view.getValue(path)).length > model.keyCount;\r\n      if (model.invert) setExpanded = !setExpanded;\r\n\r\n      if (setExpanded && !expanded) toggleExpand(setExpanded);\r\n    } else {\r\n      const [[key, val]] = model.condition;\r\n      let setExpanded = value[key] === val;\r\n      if (val === \"false\") setExpanded = !val;\r\n      else if (val === \"true\") setExpanded = !!val;\r\n\r\n      if (model.invert) setExpanded = !setExpanded;\r\n\r\n      if (setExpanded && !expanded) toggleExpand(setExpanded);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [model]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default MultigroupPanelOpenByValue;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst getId = (item, model) =>\r\n  item.id.replace(new RegExp(`^${model.id}.`, \"i\"), \"\");\r\n\r\nconst MultigroupView = ({ value, view, model, path }) => {\r\n  const { className, rowClassName } = model;\r\n\r\n  value = value || [];\r\n  if (model.limit) value = value.slice(0, model.limit);\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      {value.map((item, index) => (\r\n        <Wrapper key={index} className={rowClassName}>\r\n          <ContentTypeRender\r\n            path={`${view.getValuePath(path, model.id)}.${index}`}\r\n            items={\r\n              app().replaceInModel({\r\n                model,\r\n                viewFormat: view.viewFormat,\r\n                fn: ({ model: item }) =>\r\n                  item.id && item.id.indexOf(model.id) === 0\r\n                    ? { ...item, id: getId(item, model) }\r\n                    : item,\r\n              }).item\r\n            }\r\n          />\r\n        </Wrapper>\r\n      ))}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default MultigroupView;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst MultilinetextCount = ({ model, value }) => {\r\n  const { className, renderAs } = model;\r\n\r\n  return (\r\n    <Wrapper className={className} renderAs={renderAs}>\r\n      {value ? value.length : model.fallback}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default MultilinetextCount;\r\n","import { TextExposedField } from \"nystem-components\";\r\nimport React from \"react\";\r\n\r\nconst MultilinetextExposedField = (props) => <TextExposedField {...props} />;\r\n\r\nexport default MultilinetextExposedField;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst MultilinetextFields = ({ value, model, path }) => {\r\n  if (!value) return null;\r\n  const { limit, item, className } = model;\r\n\r\n  value = value instanceof Array ? value : [value];\r\n  if (limit) value = value.slice(0, limit);\r\n\r\n  return (\r\n    <Wrapper>\r\n      {value.map((val, index) => (\r\n        <Wrapper key={index} className={className}>\r\n          <a href={`http://${val}`} rel=\"noopener noreferrer\" target=\"_blank\">\r\n            <ContentTypeRender path={path} items={item} />\r\n          </a>\r\n        </Wrapper>\r\n      ))}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default MultilinetextFields;\r\n","const text_mandatory = \"Field is mandatory\";\r\n\r\nexport default ({ value, model }) =>\r\n  model.mandatory &&\r\n  !value &&\r\n  !value.length &&\r\n  (model.text_mandatory || text_mandatory);\r\n","import React from \"react\";\r\nimport { Input, InputWrapper, UseValidator } from \"nystem-components\";\r\nimport validate from \"./validate\";\r\n\r\nconst MultilinetextInput = ({ model, value, setValue, view }) => {\r\n  const [error, setValidated] = UseValidator({ view, validate, value, model });\r\n  value = value instanceof Array ? value : value ? [value] : [];\r\n\r\n  value = value.filter((value) => value !== \"\");\r\n  value.push(\"\");\r\n\r\n  const onChange = (itemValue, index) => {\r\n    value[index] = itemValue;\r\n    setValidated(true);\r\n    setValue(value);\r\n  };\r\n\r\n  return (\r\n    <InputWrapper model={model} error={error}>\r\n      {value.map((value, index) => (\r\n        <div key={index}>\r\n          <Input\r\n            className=\"textInputDefault\"\r\n            value={value}\r\n            onChange={(value) => onChange(value, index)}\r\n          />\r\n        </div>\r\n      ))}\r\n    </InputWrapper>\r\n  );\r\n};\r\n\r\nexport default MultilinetextInput;\r\n","import React from \"react\";\r\n\r\nclass MultilinetextInputlist extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let val = props.value || [];\r\n    if (!(val instanceof Array)) val = [val];\r\n    if (props.limit && val.length > props.limit)\r\n      return { value: val.concat([]) };\r\n    return { value: val.concat([\"\"]) };\r\n  }\r\n  handleChange() {\r\n    const val = [];\r\n    for (let i = 0; i < this.state.value.length; i++) {\r\n      // eslint-disable-next-line react/no-string-refs\r\n      const oneVal = this.refs[`input${i}`].value;\r\n      if (oneVal) val.push(oneVal);\r\n    }\r\n    if (this.props.setValue) this.props.setValue(val);\r\n    if (val.length > this.props.limit)\r\n      this.setState({\r\n        value: val.concat([]),\r\n      });\r\n    else\r\n      this.setState({\r\n        value: val.concat([\"\"]),\r\n      });\r\n  }\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (this.props.value !== nextProps.value) {\r\n      let val = nextProps.value;\r\n      if (typeof nextProps.value === \"string\") val = [nextProps.value];\r\n      if (this.props.limit && val.length > this.props.limit)\r\n        this.setState({ value: val.concat([]) });\r\n      else this.setState({ value: val.concat([\"\"]) });\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.focus)\r\n      // eslint-disable-next-line react/no-string-refs\r\n      this.refs[`input${this.state.value.length - 1}`].focus();\r\n  }\r\n  render() {\r\n    const self = this;\r\n    function inputField(item, index) {\r\n      return (\r\n        <input\r\n          key={`input${index}`}\r\n          ref={`input${index}`}\r\n          className=\"form-control\"\r\n          value={item}\r\n          onChange={self.handleChange}\r\n          type=\"text\"\r\n        />\r\n      );\r\n    }\r\n    return <div>{this.state.value.map(inputField)}</div>;\r\n  }\r\n}\r\nexport default MultilinetextInputlist;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst MultilinetextItemLink = ({ value, model, path }) => (\r\n  <Wrapper\r\n    renderAs=\"a\"\r\n    className={model.className}\r\n    href={`http://${value}`}\r\n    rel=\"noopener noreferrer\"\r\n    target=\"_blank\"\r\n  >\r\n    <ContentTypeRender path={path} items={model.item} />\r\n  </Wrapper>\r\n);\r\nexport default MultilinetextItemLink;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst MultilinetextItemText = ({ model, value }) => (\r\n  <Wrapper\r\n    className={model.className}\r\n    renderAs={model.renderAs}\r\n    translate={model.translate}\r\n  >\r\n    {value || model.fallback}\r\n  </Wrapper>\r\n);\r\n\r\nexport default MultilinetextItemText;\r\n","import React from \"react\";\r\n\r\nclass MultilinetextList extends React.Component {\r\n  render() {\r\n    let { value } = this.props;\r\n    const createItem = function(item, index) {\r\n      const add = value.length !== index + 1 ? \", \" : \"\";\r\n      return (\r\n        <span key={index}>\r\n          <a href={`http://${item}`} rel=\"noopener noreferrer\" target=\"_blank\">\r\n            {item}\r\n          </a>\r\n          {add}\r\n        </span>\r\n      );\r\n    };\r\n    if (!value) return null;\r\n    if (!(value instanceof Array)) value = [value];\r\n    const { model } = this.props;\r\n    const className =\r\n      model.className && !this.props.wrapper ? model.className.join(\" \") : \"\";\r\n    if (value.length > 2)\r\n      return (\r\n        <div className={className.replace(\"btn\", \"\")}>\r\n          {value.map(createItem)}\r\n        </div>\r\n      );\r\n    return <div className={className}>{value.map(createItem)}</div>;\r\n  }\r\n}\r\nexport default MultilinetextList;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst MultilinetextView = ({ value, path, model, view }) => {\r\n  if (!value) return null;\r\n\r\n  value = value instanceof Array ? value : [value];\r\n  const { className, id } = model;\r\n  return (\r\n    <Wrapper className={className}>\r\n      {value.map((nul, index) => (\r\n        <ContentTypeRender\r\n          key={index}\r\n          path={`${path ? `${path}.` : \"\"}${id}.${index}`}\r\n          items={\r\n            app().replaceInModel({\r\n              model,\r\n              viewFormat: view.viewFormat,\r\n              fn: ({ model: item }) =>\r\n                item.id && item.id.startsWith(id)\r\n                  ? { ...item, id: undefined }\r\n                  : item,\r\n            }).item\r\n          }\r\n        />\r\n      ))}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default MultilinetextView;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport { SelectExposedField } from \"nystem-components\";\r\n\r\nconst ReferenceExposedField = ({ model, view, path }) => {\r\n  const [option, setOption] = useState();\r\n\r\n  useEffect(() => {\r\n    app()\r\n      .database[model.source].search({\r\n        autoUpdate: true,\r\n        filter: app().parseFilter(model.filter, view.getValue, path),\r\n        count: 100,\r\n      })\r\n      .then(({ data: option }) => setOption(option));\r\n  }, [model.filter, model.source, path, view.getValue]);\r\n\r\n  if (!option || option.length === 0) return null;\r\n\r\n  const selectModel = app().utils.clone(model);\r\n  delete selectModel.source;\r\n  delete selectModel.mandatory;\r\n\r\n  selectModel.option = option.map((item) => ({\r\n    ...item,\r\n    text: item[model.textField || \"name\"],\r\n  }));\r\n\r\n  return <SelectExposedField model={selectModel} view={view} />;\r\n};\r\n\r\nexport default ReferenceExposedField;\r\n","import React from \"react\";\r\nimport {\r\n  ReferenceInput,\r\n  RouterUseQueryStore,\r\n  UseSearch,\r\n} from \"nystem-components\";\r\n\r\nconst ReferenceExposedFieldViews = ({ model, view, path }) => {\r\n  const [value, setValue] = RouterUseQueryStore(model.saveId, \"array\");\r\n  UseSearch({ view, id: model.id, value, exact: true });\r\n\r\n  return (\r\n    <ReferenceInput\r\n      model={{ ...model, mandatory: false, exposed: true }}\r\n      setValue={setValue}\r\n      view={view}\r\n      value={value}\r\n      path={path}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ReferenceExposedFieldViews;\r\n","import React from \"react\";\r\nimport { ContentTypeView, InputWrapper, Wrapper } from \"nystem-components\";\r\n\r\nconst ReferenceFirst = ({ model, view, value = [] }) => {\r\n  value = value instanceof Array ? value[0] : value;\r\n  const { renderFormat, className, source, itemClassName } = model;\r\n\r\n  if (!value) return null;\r\n\r\n  const option = (item) => (\r\n    <ContentTypeView\r\n      key={item}\r\n      contentType={source}\r\n      baseView={view}\r\n      format={renderFormat || \"view\"}\r\n      id={item}\r\n      params={view.params}\r\n      className={itemClassName}\r\n      onReference={(item) => view.event(item.event, { ...item, model })}\r\n    />\r\n  );\r\n\r\n  if (model.wrapper)\r\n    return <InputWrapper model={model}>{option(value)}</InputWrapper>;\r\n\r\n  return <Wrapper className={className}>{option(value)}</Wrapper>;\r\n};\r\nexport default ReferenceFirst;\r\n","export default ({ value, model }) =>\r\n  model.mandatory &&\r\n  (!value || (value instanceof Array && !value[0])) &&\r\n  (model.text_mandatory || \"Field is mandatory\");\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n  InputWrapper,\r\n  Wrapper,\r\n  ReferenceSortable,\r\n  Button,\r\n  ViewInViewView,\r\n  UseValidator,\r\n  Input,\r\n  ContentTypeView,\r\n} from \"nystem-components\";\r\nimport validate from \"./validate\";\r\nimport \"./input.css\";\r\n\r\nconst InputSpes = ({ focus, onBlur, onFocus, ...props }) => {\r\n  const inputEl = useRef(null);\r\n  const [inFocus, setInFocus] = useState(false);\r\n  useEffect(() => {\r\n    if (!focus || inFocus) return;\r\n    inputEl.current.focus();\r\n  }, [focus, inFocus, onBlur]);\r\n\r\n  let { className } = props;\r\n  className = className instanceof Array ? className.join(\" \") : className;\r\n\r\n  return (\r\n    <Input\r\n      ref={inputEl}\r\n      {...props}\r\n      className={className || \"sm:w-1/2 w-full\"}\r\n      onChange={props.onChange}\r\n      onFocus={() => {\r\n        setInFocus(true);\r\n        if (onFocus) onFocus();\r\n      }}\r\n      onBlur={() => {\r\n        setInFocus(false);\r\n        onBlur();\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst InlineAdd = ({ model, view, path }) => {\r\n  const [isAdding, setIsAdding] = useState(false);\r\n  if (!model.inlineAdd) return null;\r\n  if (!isAdding)\r\n    return (\r\n      <Button\r\n        onClick={() => setIsAdding(true)}\r\n        size=\"sm\"\r\n        className=\"mb-1 float-right\"\r\n      >\r\n        Create new\r\n      </Button>\r\n    );\r\n  return (\r\n    <ViewInViewView\r\n      model={{\r\n        contentType: model.source,\r\n        view: model.inlineAdd,\r\n        className: model.classNameInput,\r\n      }}\r\n      onSave={({ _id }) => {\r\n        view.event(\"referenceAdd\", {\r\n          model,\r\n          path,\r\n          value: { _id },\r\n          close: true,\r\n        });\r\n        setIsAdding(false);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst ReferenceInput = ({ model, view, value = [], setValue, path }) => {\r\n  const { exposed } = model;\r\n  const [inFocus, setInFocus] = useState(false);\r\n  const [searchVal, setSearchVal] = useState(\"\");\r\n  const [error] = UseValidator({ view, validate, value, model });\r\n\r\n  value = value instanceof Array ? value : [value];\r\n\r\n  useEffect(() => {\r\n    const modelId = model.id;\r\n    const events = exposed\r\n      ? { add: \"exposedReferenceAdd\", remove: \"exposedReferenceRemove\" }\r\n      : { add: \"referenceAdd\", remove: \"referenceRemove\" };\r\n\r\n    const add = ({ model, value: addValue, close, path: atPath }) => {\r\n      if (path !== atPath || modelId !== model.id) return;\r\n\r\n      const newVal = [...value, addValue._id];\r\n      setValue(model.limit === 1 ? newVal[0] : newVal);\r\n\r\n      const addable = !model.limit || newVal.length < model.limit;\r\n      if (!close) setInFocus(addable);\r\n\r\n      setSearchVal(\"\");\r\n    };\r\n    const remove = ({ model, value: removeValue, path: atPath }) => {\r\n      if (path !== atPath || modelId !== model.id) return;\r\n\r\n      const newVal = value.filter((id) => `${id}` !== `${removeValue._id}`);\r\n      setValue(newVal.length ? newVal : undefined);\r\n      setInFocus(true);\r\n    };\r\n    view.on(events.add, add);\r\n    view.on(events.remove, remove);\r\n    return () => {\r\n      view.off(events.add, add);\r\n      view.off(events.remove, remove);\r\n    };\r\n  }, [view, setValue, value, setInFocus, model.id, model.limit, path, exposed]);\r\n\r\n  let clicked = false;\r\n\r\n  const addable = !model.limit || value.length < model.limit || null;\r\n\r\n  return (\r\n    <InputWrapper\r\n      model={{ ...model, classNameInput: \"relative flex-grow\" }}\r\n      error={error}\r\n    >\r\n      {(value.length || null) && (\r\n        <Wrapper className=\"px-1 pb-2 pt-1 w-full max-w-sm\">\r\n          <ReferenceSortable\r\n            model={model}\r\n            view={view}\r\n            value={value}\r\n            setValue={setValue}\r\n            path={path}\r\n          />\r\n        </Wrapper>\r\n      )}\r\n      {addable && (\r\n        <>\r\n          <InlineAdd model={model} view={view} path={path} />\r\n          <InputSpes\r\n            onFocus={() => setInFocus(true)}\r\n            onBlur={() => {\r\n              if (!clicked) setInFocus(false);\r\n            }}\r\n            onChange={(value) => setSearchVal(value)}\r\n            value={searchVal}\r\n            placeholder=\"Search and add existing\"\r\n            focus={inFocus}\r\n          />\r\n        </>\r\n      )}\r\n      {addable && inFocus && (\r\n        <Wrapper\r\n          className=\"absolute shadow-md sm:w-1/2 w-full overflow-y-auto z-10 max-h-400\"\r\n          onMouseDown={() => {\r\n            clicked = true;\r\n            setInFocus(true);\r\n            setTimeout(() => {\r\n              clicked = false;\r\n            }, 500);\r\n          }}\r\n        >\r\n          <ContentTypeView\r\n            contentType={model.source}\r\n            baseView={view}\r\n            format={model.renderFormatSelect}\r\n            onReference={(item) =>\r\n              view.event(item.event, { ...item, model, path })\r\n            }\r\n            value={{ exclude: value, searchVal }}\r\n          />\r\n        </Wrapper>\r\n      )}\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default ReferenceInput;\r\n","import React from \"react\";\r\nimport { TextQueryValue } from \"nystem-components\";\r\n\r\nconst ReferenceQueryValue = (props) => <TextQueryValue {...props} />;\r\n\r\nexport default ReferenceQueryValue;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport { SelectInput } from \"nystem-components\";\r\n\r\nconst ReferenceSelect = ({ model, setValue, value, view, path }) => {\r\n  const [option, setOption] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const loadOption = ({ connected }) => {\r\n      if (!connected) return;\r\n\r\n      const namefield = model.namefield ? model.namefield : \"name\";\r\n      app()\r\n        .database[model.source].search({\r\n          filter: app().parseFilter(model.filter, view.getValue, path),\r\n          count: 100,\r\n        })\r\n        .then(({ data }) => {\r\n          app().connection.on(\"connection\", loadOption);\r\n\r\n          setOption(\r\n            data\r\n              ? data.map((item) => ({ _id: item._id, text: item[namefield] }))\r\n              : []\r\n          );\r\n        });\r\n    };\r\n    loadOption({ connected: true });\r\n    return () => {\r\n      app().connection.off(\"connection\", loadOption);\r\n    };\r\n  }, [model, path, view]);\r\n\r\n  if (!value) value = [];\r\n  if (!(value instanceof Array)) value = [value];\r\n\r\n  return (\r\n    <SelectInput\r\n      view={view}\r\n      model={{ ...model, option }}\r\n      setValue={setValue}\r\n      value={value}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ReferenceSelect;\r\n// 57 40 35\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport {\r\n  ContentTypeView,\r\n  InputWrapper,\r\n  DragAndDropList\r\n} from \"nystem-components\";\r\n\r\nclass ReferenceSortable extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    this.localValue = {};\r\n    [\"setValue\", \"onSave\", \"onDelete\", \"addField\"].forEach(func => {\r\n      this[func] = this[func].bind(this);\r\n    });\r\n    this.props.view.on(\"save\", this.onSave);\r\n    this.state = {\r\n      value: this.props.value\r\n    };\r\n  }\r\n  setValue(id, val) {\r\n    let { value } = this.state;\r\n    if (!value) value = [];\r\n    if (id) value[id] = val;\r\n    else value = val;\r\n    if (this.props.setValue) this.props.setValue(this.model.id, value);\r\n  }\r\n  onSave(data) {\r\n    if (!this.state.value) return true;\r\n    for (let i = 0; i < this.state.value.length; i++)\r\n      if (this.localValue[this.state.value[i]])\r\n        app().database[this.model.source].save({\r\n          data: this.localValue[this.state.value[i]]\r\n        });\r\n    return true;\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    this.setState({\r\n      value: nextProps.value\r\n    });\r\n  }\r\n  onDelete(id) {\r\n    this.state.value.splice(this.state.value.indexOf(id), 1);\r\n    const self = this;\r\n    setTimeout(() => {\r\n      if (self.props.setValue)\r\n        self.props.setValue(self.props.model.id, self.state.value);\r\n    }, 0);\r\n    return true;\r\n  }\r\n  addField(data) {\r\n    if (!data.hashtag || !this.model.addTransform) return;\r\n    const fieldBase = JSON.parse(data.hashtag.replace(/'/g, '\"'));\r\n    const out = {};\r\n    for (\r\n      let i = 0;\r\n      this.model.addTransform && i < this.model.addTransform.length;\r\n      i++\r\n    )\r\n      out[this.model.addTransform[i][0]] = app().utils.insertValues(\r\n        this.model.addTransform[i][1],\r\n        fieldBase\r\n      );\r\n    return out;\r\n  }\r\n  render() {\r\n    const { model } = this.props;\r\n    let { value } = this.state;\r\n    if (!value) value = [];\r\n    if (!(value instanceof Array)) value = [value];\r\n    const className =\r\n      model.className && !this.props.wrapper ? model.className.join(\" \") : \"\";\r\n    const self = this;\r\n    function option(item, index) {\r\n      let id = item;\r\n      function onChange(fieldId, value) {\r\n        self.localValue[id] = value;\r\n      }\r\n      if (typeof item !== \"string\") {\r\n        if (!item._id) item._id = app.uuid();\r\n        id = item._id;\r\n        self.localValue[id] = item;\r\n        self.state.value[index] = id;\r\n      }\r\n      return (\r\n        <ContentTypeView\r\n          key={id}\r\n          noForm=\"true\"\r\n          contentType={model.source}\r\n          format={model.renderFormat ? model.renderFormat : \"view\"}\r\n          onDelete={self.onDelete}\r\n          onMissing={self.onDelete}\r\n          onChange={onChange}\r\n          value={self.localValue[id] ? self.localValue[id] : null}\r\n          id={self.localValue[id] ? null : id}\r\n          baseView={self.props.view}\r\n        />\r\n      );\r\n    }\r\n    this.id = app().uuid();\r\n    if (model.wrapper)\r\n      return (\r\n        <InputWrapper model={model} error={this.state.error}>\r\n          <div className=\"row col-sm-12\">\r\n            <DragAndDropList\r\n              ref=\"list\"\r\n              value={this.state.value}\r\n              setValue={this.setValue}\r\n              onAdd={this.addField}\r\n            >\r\n              {value.map(option)}\r\n            </DragAndDropList>\r\n          </div>\r\n        </InputWrapper>\r\n      );\r\n    return (\r\n      <div className={className}>\r\n        <DragAndDropList\r\n          ref=\"list\"\r\n          value={this.state.value}\r\n          setValue={this.setValue}\r\n          onAdd={this.addField}\r\n        >\r\n          {value.map(option)}\r\n        </DragAndDropList>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default ReferenceSortable;\r\n","import { TextSortBy } from \"nystem-components\";\r\nimport React from \"react\";\r\n\r\nconst ReferenceSortBy = (props) => <TextSortBy {...props} />;\r\nexport default ReferenceSortBy;\r\n","import React from \"react\";\r\nimport { ContentTypeView, InputWrapper, Wrapper } from \"nystem-components\";\r\n\r\nconst ReferenceView = ({ model, view, value = [], path }) => {\r\n  value = value instanceof Array ? value : [value];\r\n  const { renderFormat, className, source, itemClassName } = model;\r\n\r\n  const option = (item) => (\r\n    <ContentTypeView\r\n      key={item}\r\n      contentType={source}\r\n      baseView={view}\r\n      format={renderFormat || \"view\"}\r\n      id={item}\r\n      params={view.params}\r\n      className={itemClassName}\r\n      onReference={(item) => view.event(item.event, { ...item, model, path })}\r\n    />\r\n  );\r\n\r\n  if (model.wrapper)\r\n    return <InputWrapper model={model}>{value.map(option)}</InputWrapper>;\r\n\r\n  return <Wrapper className={className}>{value.map(option)}</Wrapper>;\r\n};\r\nexport default ReferenceView;\r\n","import React from \"react\";\r\nimport { Button } from \"nystem-components\";\r\n\r\nconst SelectButton = ({ model, setValue, value }) => {\r\n  const { trueState, trueOnState, falseState, btnType, falseOnState } = model;\r\n\r\n  const handleChange = () =>\r\n    setValue(trueOnState.indexOf(value) ? trueState : falseState);\r\n\r\n  let text = \"\";\r\n  let type = false;\r\n\r\n  if (trueOnState.indexOf(value) !== -1) {\r\n    ({ text } = model);\r\n    type = btnType;\r\n  } else if (falseOnState.indexOf(value) !== -1) {\r\n    text = model.falseText;\r\n    type = model.falseBtnType;\r\n  }\r\n\r\n  return (\r\n    <Button type={type} className={model.className} onClick={handleChange}>\r\n      {text || \"...\"}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default SelectButton;\r\n","import React, { useEffect } from \"react\";\r\nimport { SelectInput, UseSearch, RouterUseQueryStore } from \"nystem-components\";\r\n\r\nconst SelectExposedField = ({ model, view }) => {\r\n  const [value, setValue] = RouterUseQueryStore(model.saveId);\r\n  UseSearch({ view, id: model.id, value, exact: model.exact });\r\n\r\n  useEffect(() => {\r\n    if (value && !model.option.map((option) => option._id).includes(value))\r\n      setValue(false);\r\n  }, [model.option, setValue, value]);\r\n\r\n  return (\r\n    <SelectInput\r\n      model={{\r\n        ...model,\r\n        clearButton: true,\r\n        selectAllOnFocus: true,\r\n      }}\r\n      value={value}\r\n      setValue={setValue}\r\n    />\r\n  );\r\n};\r\nexport default SelectExposedField;\r\n","export default ({ value, model }) => {\r\n  value = value || [];\r\n  if (!(value instanceof Array)) value = [value];\r\n\r\n  return (\r\n    model.mandatory &&\r\n    !value.length &&\r\n    (model.text_mandatory || \"Field is mandatory\")\r\n  );\r\n};\r\n","import React, { useRef, useMemo, useEffect, useState } from \"react\";\r\nimport app from \"nystem\";\r\nimport {\r\n  InputWrapper,\r\n  UseValidator,\r\n  Button,\r\n  Wrapper,\r\n  Select,\r\n} from \"nystem-components\";\r\nimport validate from \"./validate\";\r\n\r\nconst normalizeOption = ({ option, optionObj }) =>\r\n  !option\r\n    ? optionObj || []\r\n    : option.map((item) =>\r\n        typeof item === \"string\" || typeof item === \"number\"\r\n          ? {\r\n              _id: item,\r\n              text: item,\r\n            }\r\n          : item\r\n      );\r\n\r\nconst RenderButton = ({ option, handleChange, value, model }) => (\r\n  <Wrapper className={model.classNameInput}>\r\n    {option.map(({ text, _id }) => (\r\n      <Button\r\n        onClick={() => handleChange(_id)}\r\n        className={[model.classNameItem, \"mr-2 my-1\"]}\r\n        key={_id}\r\n        type={value.indexOf(_id) !== -1 ? \"primary\" : \"secondary\"}\r\n        size=\"xs\"\r\n      >\r\n        {text}\r\n      </Button>\r\n    ))}\r\n  </Wrapper>\r\n);\r\n\r\nconst RenderCheckbox = ({\r\n  model,\r\n  option,\r\n  handleChange,\r\n  value,\r\n  limit,\r\n  inline,\r\n}) => {\r\n  const ref = useRef();\r\n  useEffect(() => {\r\n    if (!ref.current || !model.focus) return;\r\n    ref.current.focus();\r\n  }, [model.focus, option.length]);\r\n\r\n  return (\r\n    <Wrapper className={inline && \"flex flex-wrap items-center\"}>\r\n      {option.map(({ text, _id }, index) => (\r\n        <Wrapper className={[\"px-2\", \"my-1\"]} key={_id}>\r\n          <label>\r\n            <input\r\n              ref={index === 0 ? ref : undefined}\r\n              onChange={() => handleChange(_id)}\r\n              type={limit === 1 ? \"radio\" : \"checkbox\"}\r\n              checked={value.indexOf(_id) !== -1 ? \"checked\" : false}\r\n              className=\"p-1 mr-2\"\r\n            />\r\n            {text}\r\n          </label>\r\n        </Wrapper>\r\n      ))}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst RenderDropdown = ({\r\n  option,\r\n  handleChange,\r\n  value,\r\n  placeholder,\r\n  model,\r\n}) => (\r\n  // eslint-disable-next-line jsx-a11y/no-onchange\r\n  <Select\r\n    className={model.classNameInput || \"sm:w-1/2 w-full p-2 border\"}\r\n    onChange={(e) => handleChange(e.target.value)}\r\n    value={value[0]}\r\n  >\r\n    <option key=\"_empty\" value=\"\">\r\n      {placeholder || \" - choose - \"}\r\n    </option>\r\n    {option.map(({ text, _id }) => (\r\n      <option key={_id || \"___\"} value={_id || \"___\"}>\r\n        {text}\r\n      </option>\r\n    ))}\r\n  </Select>\r\n);\r\n\r\nconst renderTypes = {\r\n  dropdown: RenderDropdown,\r\n  button: RenderButton,\r\n  checkbox: RenderCheckbox,\r\n};\r\n\r\nconst SelectInput = ({ model, value, view, setValue }) => {\r\n  const [id] = useState(app().uuid);\r\n  const [error, setValidated] = UseValidator({ view, validate, value, model });\r\n\r\n  useEffect(() => {\r\n    if (!view || view.value._id || value.length || !model.default) return;\r\n\r\n    setTimeout(() => {\r\n      setValue(model.default);\r\n    }, 0);\r\n  }, [view, value, model, setValue]);\r\n\r\n  const { placeholder, inline, render } = model;\r\n\r\n  const limit = render === \"dropdown\" ? 1 : parseInt(model.limit, 10);\r\n  if (!value) value = [];\r\n  if (!(value instanceof Array)) value = [value];\r\n\r\n  const option = useMemo(() => normalizeOption(model), [model]);\r\n\r\n  const handleChange = (id) => {\r\n    if (id === \"\") id = undefined;\r\n    if (value.indexOf(id) !== -1) value.splice(value.indexOf(id), 1);\r\n    else value.push(id);\r\n\r\n    if (limit && limit < value.length) value.shift();\r\n\r\n    if (limit === 1) setValue(value[0]);\r\n    else setValue(value);\r\n    setValidated(true);\r\n  };\r\n  useEffect(() => {\r\n    if (value.length === 0 && model.default) handleChange(model.default);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <InputWrapper id={id} model={model} error={error}>\r\n      {renderTypes[render || \"checkbox\"]({\r\n        option,\r\n        handleChange,\r\n        value,\r\n        limit,\r\n        inline,\r\n        placeholder,\r\n        model,\r\n        id,\r\n      })}\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default SelectInput;\r\n","import React from \"react\";\r\nimport { TextQueryValue } from \"nystem-components\";\r\n\r\nconst SelectQueryValue = (props) => <TextQueryValue {...props} />;\r\n\r\nexport default SelectQueryValue;\r\n","import React from \"react\";\r\nimport { TextSortBy } from \"nystem-components\";\r\n\r\nconst SelectSortBy = (props) => <TextSortBy {...props} />;\r\nexport default SelectSortBy;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst SelectView = ({ model, value }) => {\r\n  const { className, renderAs, option } = model;\r\n  let val = value || model.fallback;\r\n\r\n  val =\r\n    option\r\n      .map((item) =>\r\n        typeof item === \"string\" ? { _id: item, text: item } : item\r\n      )\r\n      .find(({ _id }) => value === _id) || {};\r\n\r\n  return (\r\n    <Wrapper renderAs={renderAs} className={className}>\r\n      {app().t(val.text)}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default SelectView;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst Select = ({ className, ...props }) => (\r\n  <Wrapper renderAs=\"select\" className={className} {...props} />\r\n);\r\nexport default Select;\r\n","import React, { useState } from \"react\";\r\nimport { Input, Wrapper, InputWrapper } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst SliderInput = ({ model, setValue, value }) => {\r\n  const [id] = useState(app().uuid);\r\n  const val = model.absolute ? value : ((value - model.min) / model.max) * 100;\r\n  const display = model.precision\r\n    ? parseFloat(val).toFixed(model.precision)\r\n    : parseInt(val, 10);\r\n\r\n  return (\r\n    <InputWrapper id={id} model={model} className={model.className}>\r\n      <Input\r\n        id={id}\r\n        placeholder={app().t(model.text)}\r\n        className=\"w-full\"\r\n        value={parseInt(value * 10, 10) || 0}\r\n        onChange={(value) => setValue(value / 10)}\r\n        type=\"range\"\r\n        min={model.min * 10}\r\n        max={model.max * 10}\r\n      />\r\n      <Wrapper className={model.textClass}>{`(${display || 0}%)`}</Wrapper>\r\n    </InputWrapper>\r\n  );\r\n};\r\n\r\nexport default SliderInput;\r\n","import React from \"react\";\r\nimport { TextLink } from \"nystem-components\";\r\n\r\nconst SliderLink = (props) => <TextLink {...props} />;\r\nexport default SliderLink;\r\n","import React from \"react\";\r\nimport { TextView } from \"nystem-components\";\r\n\r\nconst SliderView = ({ value, ...props }) => {\r\n  const { precision } = props.model;\r\n  // eslint-disable-next-line eqeqeq\r\n  value = precision == 0 ? parseInt(value, 10) : value.toFixed(precision);\r\n  return <TextView value={value} {...props} />;\r\n};\r\nexport default SliderView;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { TextInput, UseSearch, RouterUseQueryStore } from \"nystem-components\";\r\n\r\nconst TextExposedField = ({ model, view }) => {\r\n  const [className, setClassName] = useState(\"\");\r\n  const [value, setValue, ref] = RouterUseQueryStore(model.saveId);\r\n  UseSearch({ view, id: model.id, value, exact: model.exact || undefined });\r\n\r\n  useEffect(() => {\r\n    if (!value) {\r\n      setClassName(\"\");\r\n      return;\r\n    }\r\n\r\n    setClassName(\"border-orange-300 outline-none\");\r\n\r\n    let timer = setTimeout(() => {\r\n      setClassName(\"border-green-500 outline-none\");\r\n      timer = setTimeout(() => {\r\n        timer = false;\r\n        setClassName(\"\");\r\n      }, 500);\r\n    }, 200);\r\n\r\n    return () => {\r\n      if (timer) clearTimeout(timer);\r\n    };\r\n  }, [value]);\r\n\r\n  return (\r\n    <TextInput\r\n      ref={ref}\r\n      model={{\r\n        ...model,\r\n        mandatory: false,\r\n        clearButton: !model.noClearButton,\r\n        classNameInput: [\r\n          !model.noWrapper && \"w-full\",\r\n          className,\r\n          model.classNameInput,\r\n        ],\r\n        selectAllOnFocus: true,\r\n      }}\r\n      value={value}\r\n      setValue={setValue}\r\n    />\r\n  );\r\n};\r\n\r\nexport default TextExposedField;\r\n","export default ({ value, model }) =>\r\n  model.mandatory && !value && (model.text_mandatory || \"Field is mandatory\");\r\n","import React, { useState } from \"react\";\r\nimport { InputWrapper, Input, Icon, UseValidator } from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport validate from \"./validate\";\r\nimport \"./input.css\";\r\n\r\nconst ClearButton = ({ value, setValue }) =>\r\n  !value ? null : (\r\n    <Icon\r\n      onClick={() => setValue(\"\")}\r\n      className=\"w-8 h-8 p-2 relative right-8 cursor-pointer\"\r\n      icon=\"close\"\r\n      aria-hidden=\"true\"\r\n    />\r\n  );\r\n\r\nconst TextInput = ({ model, view, focus, setValue, value }, ref) => {\r\n  const [error, setValidated] = UseValidator({ view, validate, value, model });\r\n  const { disabled, length, text, clearButton, classNameInput = [] } = model;\r\n  const [id] = useState(app().uuid);\r\n\r\n  return (\r\n    <InputWrapper\r\n      id={id}\r\n      model={{\r\n        ...model,\r\n        classNameInput: \"relative flex w-full\",\r\n      }}\r\n      error={error}\r\n    >\r\n      <Input\r\n        id={id}\r\n        ref={ref}\r\n        placeholder={model.placeholder || app().t(text)}\r\n        className={classNameInput}\r\n        value={value || \"\"}\r\n        maxLength={length}\r\n        onChange={(value) => setValue(value)}\r\n        disabled={disabled}\r\n        type=\"text\"\r\n        focus={model.focus || focus}\r\n        onBlur={() => setValidated(true)}\r\n        selectAllOnFocus={model.selectAllOnFocus}\r\n      />\r\n      {clearButton ? <ClearButton value={value} setValue={setValue} /> : null}\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default React.forwardRef(TextInput);\r\n","import React from \"react\";\r\nimport { Link, Wrapper } from \"nystem-components\";\r\n\r\nconst TextLink = ({ model, view, value }) => {\r\n  const id = view.value ? `/${view.value._id}` : \"\";\r\n  const format = model.toFormat || \"input\";\r\n\r\n  if (model.renderAs)\r\n    return (\r\n      <Wrapper renderAs={model.renderAs} className={model.className}>\r\n        <Link\r\n          to={`${model.addToPath || \"\"}/${view.contentType}/${format}${id}`}\r\n        >\r\n          {value || model.fallback}\r\n        </Link>\r\n      </Wrapper>\r\n    );\r\n\r\n  return (\r\n    <Link\r\n      renderAs={model.renderAs}\r\n      className={model.className}\r\n      to={`${model.addToPath || \"\"}/${view.contentType}/${format}${id}`}\r\n    >\r\n      {value || model.fallback}\r\n    </Link>\r\n  );\r\n};\r\nexport default TextLink;\r\n","import { useState, useEffect, useCallback } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst toType = {\r\n  reference: (val) => val,\r\n  text: (val) => val,\r\n  select: (val) => val,\r\n  int: (val) => parseInt(val || 0, 10),\r\n  float: (val) => parseFloat(val),\r\n  array: (val) => (val === \"\" ? undefined : val),\r\n};\r\n\r\nconst TextQueryValue = ({ model, setValue, value }) => {\r\n  const { saveId, type, push } = model;\r\n  const history = useHistory();\r\n  const [enabled, setEnabled] = useState(false);\r\n\r\n  const { search } = history.location;\r\n\r\n  const getQueryValue = useCallback(\r\n    (query) => {\r\n      if (!saveId) return \"\";\r\n      const reg = `\\\\&${saveId}=([^\\\\s&]+)`;\r\n      const [, value = \"\"] = query.match(new RegExp(reg, \"im\")) || [];\r\n      return type ? toType[type](value) : value;\r\n    },\r\n    [saveId, type]\r\n  );\r\n\r\n  const setRouterValue = (value) => {\r\n    if (!saveId) return;\r\n\r\n    const { pathname, search } = history.location;\r\n\r\n    const reg = `(^\\\\?)|(\\\\&${saveId}=[^\\\\s&]*)`;\r\n    const rest = search.replace(new RegExp(reg, \"gi\"), \"\");\r\n    const add = value ? `&${saveId}=${value}` : \"\";\r\n\r\n    history[push ? \"push\" : \"replace\"](`${pathname}?${rest}${add}`);\r\n  };\r\n\r\n  const qVal = getQueryValue(search);\r\n\r\n  value = value || \"\";\r\n  if (enabled && value !== qVal) setRouterValue(value);\r\n\r\n  useEffect(() => {\r\n    if (value) return;\r\n\r\n    setTimeout(() => {\r\n      if (qVal) setValue(qVal);\r\n      setEnabled(true);\r\n    }, 10);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return null;\r\n};\r\n\r\nexport default TextQueryValue;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Wrapper, DatabaseSearchContext, Icon } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst TextSortBy = ({ model, view }) => {\r\n  const { search } = useContext(DatabaseSearchContext);\r\n  const { id, text, className } = model;\r\n  const { sortby, reverse } = search;\r\n  const [ev, setEv] = useState(false);\r\n\r\n  const sortbyId = sortby instanceof Array ? sortby[0] : sortby;\r\n  const reverse1 = reverse instanceof Array ? reverse[0] : reverse;\r\n\r\n  const handleSort = (event) => {\r\n    if (event) event.preventDefault();\r\n\r\n    const rev = sortbyId === id ? !reverse : false;\r\n    const setSearch = (search) => ({\r\n      ...search,\r\n      reverse: rev,\r\n      sortby: id,\r\n    });\r\n\r\n    setEv(setSearch);\r\n    view.on(\"setSearch\", 200, setSearch);\r\n    view.event(\"setSearch\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!ev) return;\r\n\r\n    return () => {\r\n      view.off(\"setSearch\", ev);\r\n      setEv(false);\r\n    };\r\n  }, [ev, view]);\r\n\r\n  return (\r\n    <Wrapper\r\n      className={[className, \"flex\"]}\r\n      renderAs=\"a\"\r\n      href={id}\r\n      onClick={handleSort}\r\n    >\r\n      <Wrapper renderAs=\"span\">{`${app().t(text)} `}</Wrapper>\r\n      {sortbyId === id ? (\r\n        <Icon\r\n          icon={`arrow-${reverse1 ? \"up\" : \"down\"}`}\r\n          className=\"ml-1 w-4 font-bold\"\r\n        />\r\n      ) : null}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default TextSortBy;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst TextView = ({ model, value }) => (\r\n  <Wrapper\r\n    className={model.className}\r\n    renderAs={model.renderAs}\r\n    translate={model.translate}\r\n    title={value || model.fallback}\r\n  >\r\n    {value || model.fallback}\r\n  </Wrapper>\r\n);\r\n\r\nexport default TextView;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst TextareaFormatted = ({ model, value }) => (\r\n  <Wrapper\r\n    className={model.className}\r\n    renderAs={model.renderAs}\r\n    translate={model.translate}\r\n    dangerouslySetInnerHTML={{\r\n      __html: (value || model.fallback || \"\")\r\n        .substring(0, model.cutPoint || 100000)\r\n        .replace(\r\n          /(https?:\\/\\/[^\\s]+)/gim,\r\n          '<a target=\"_blank\" class=\"text-gray-400\" href=\"$1\">$1</a>'\r\n        )\r\n        .replace(/[\\n]/g, \"<br>\"),\r\n    }}\r\n  />\r\n);\r\n\r\nexport default TextareaFormatted;\r\n","export default ({ value, model }) =>\r\n  model.mandatory && !value && (model.text_mandatory || \"Field is mandatory\");\r\n","import React, { useState } from \"react\";\r\nimport { InputWrapper, Input, UseValidator } from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport validate from \"./validate\";\r\n\r\nconst TextInput = ({ model, view, focus, setValue, value }, ref) => {\r\n  const [error, setValidated] = UseValidator({ view, validate, value, model });\r\n  const { disabled, length, text, classNameInput = [] } = model;\r\n  const [id] = useState(app().uuid);\r\n\r\n  const style = model.height && { height: `${model.height}px` };\r\n  const contents = (\r\n    <Input\r\n      id={id}\r\n      ref={ref}\r\n      placeholder={model.placeholder || app().t(text)}\r\n      className={classNameInput}\r\n      value={value || \"\"}\r\n      maxLength={length}\r\n      onChange={(value) => setValue(value)}\r\n      disabled={disabled}\r\n      type=\"textarea\"\r\n      focus={model.focus || focus}\r\n      onBlur={() => setValidated(true)}\r\n      selectAllOnFocus={model.selectAllOnFocus}\r\n      style={style}\r\n    />\r\n  );\r\n\r\n  return model.noWrapper ? (\r\n    contents\r\n  ) : (\r\n    <InputWrapper\r\n      id={id}\r\n      model={{\r\n        ...model,\r\n        classNameInput: \"relative flex-grow flex\",\r\n      }}\r\n      error={error}\r\n    >\r\n      {contents}\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default React.forwardRef(TextInput);\r\n","import React from \"react\";\r\nimport { TextLink } from \"nystem-components\";\r\n\r\nconst TextareaLink = (props) => <TextLink {...props} />;\r\nexport default TextareaLink;\r\n","import React from \"react\";\r\nimport { TextSortBy } from \"nystem-components\";\r\n\r\nconst TextareaSortBy = (props) => <TextSortBy {...props} />;\r\nexport default TextareaSortBy;\r\n","import React from \"react\";\r\nimport { TextView } from \"nystem-components\";\r\n\r\nconst TextareaView = (props) => <TextView {...props} />;\r\nexport default TextareaView;\r\n","import { useEffect } from \"react\";\r\nimport app from \"nystem\";\r\n\r\nconst ViewButtonAutoSave = ({ view }) => {\r\n  useEffect(() => {\r\n    let saveIds = [];\r\n    let saveDelay = false;\r\n\r\n    const saveToDb = async () => {\r\n      const { errors = [] } = await view.event(\"validate\");\r\n      if (!saveIds.length || errors.length) return;\r\n\r\n      const reduceById = (res, id) => ({ ...res, [id]: view.getValue(id) });\r\n\r\n      const data = await app().database[view.contentType].save({\r\n        data: saveIds.reduce(reduceById, {\r\n          _id: view.value._id || view.id,\r\n        }),\r\n        fields: true,\r\n      });\r\n\r\n      if (!view.value._id) view.setValue({ path: \"_id\", value: data.id });\r\n\r\n      view.event(\"save\", view.value);\r\n\r\n      saveIds = [];\r\n    };\r\n\r\n    const handleChange = ({ id, value }) => {\r\n      if (id === \"_id\" || ((!value || value._id) && !id)) return;\r\n\r\n      if (!id) saveIds = Object.keys(value);\r\n      else {\r\n        [id] = id.split(\".\");\r\n\r\n        if (saveIds.includes(id)) return;\r\n        saveIds.push(id);\r\n      }\r\n\r\n      saveDelay = setTimeout(saveToDb, 200);\r\n    };\r\n\r\n    view.on(\"change\", -2100, handleChange);\r\n    return () => {\r\n      view.off(\"change\", handleChange);\r\n      if (saveDelay) clearTimeout(saveDelay);\r\n    };\r\n  }, [view]);\r\n\r\n  return null;\r\n};\r\nexport default ViewButtonAutoSave;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Icon, Wrapper, Button } from \"nystem-components\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nconst ViewButtonBack = ({ children, model, history }) => {\r\n  model = model || {};\r\n  const { className, text } = model;\r\n\r\n  if (model.icon)\r\n    return (\r\n      <Icon\r\n        className={className}\r\n        icon={model.icon}\r\n        onClick={() => history.go(-1)}\r\n      />\r\n    );\r\n\r\n  return (\r\n    <Button\r\n      size={model.size}\r\n      type={model.btnType}\r\n      className={className}\r\n      onClick={() => history.go(-1)}\r\n    >\r\n      <Icon icon=\"arrow-left\" className=\"w-6 h-6\" />\r\n      <Wrapper>{children || app().t(text)}</Wrapper>\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default withRouter(ViewButtonBack);\r\n","import React, { useState } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Button } from \"nystem-components\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nconst ViewButtonDelete = ({ view, model, history }) => {\r\n  const { className, size, btnType, deletedText } = model;\r\n  const [text, setText] = useState(model.text);\r\n\r\n  const handleDelete = (event) => {\r\n    if (model.stopPropagation) event.stopPropagation();\r\n\r\n    if (view.event(\"delete\"))\r\n      app()\r\n        .database[view.contentType].delete({ id: view.value._id })\r\n        .then(() =>\r\n          model.redirectURL\r\n            ? history.replace(model.redirectURL)\r\n            : setText(deletedText)\r\n        );\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      className={className}\r\n      size={size}\r\n      onMouseDown={(event) => {\r\n        if (model.stopPropagation) event.stopPropagation();\r\n      }}\r\n      onClick={handleDelete}\r\n      type={btnType}\r\n    >\r\n      {app().t(text || \"Delete\")}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default withRouter(ViewButtonDelete);\r\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Button, Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst EventButton = ({ model, view, sendEvent }) => {\r\n  const buttonStates = useMemo(\r\n    () => ({\r\n      default: {\r\n        text: model.text ? model.text : \"Send\",\r\n        type: model.btnType ? model.btnType : \"secondary\",\r\n      },\r\n      confirm: {\r\n        text: \"Are you sure?\",\r\n        type: \"danger\",\r\n      },\r\n      saving: {\r\n        text: \"Sending ...\",\r\n        type: \"warning\",\r\n      },\r\n      success: {\r\n        text: \"Sent\",\r\n        type: \"success\",\r\n      },\r\n    }),\r\n    [model.btnType, model.text]\r\n  );\r\n\r\n  const [button, setButton] = useState(buttonStates.default);\r\n  const [savedTimer, setSavedTimer] = useState(false);\r\n  const [activeKeySaveView, setActiveKeySaveView] = useState(false);\r\n  const [error, setError] = useState(false);\r\n\r\n  const handleSubmit = useCallback(\r\n    async (event) => {\r\n      if (event) event.preventDefault();\r\n      const { errors = [] } = await view.event(\"validate\");\r\n      if (errors.length) {\r\n        setError(\"Correct validation errors\");\r\n        return;\r\n      }\r\n\r\n      if (model.confirm && button !== buttonStates.confirm) {\r\n        setButton(buttonStates.confirm);\r\n        setSavedTimer(setTimeout(() => setButton(buttonStates.default), 1000));\r\n      } else {\r\n        setButton(buttonStates.saving);\r\n\r\n        const data = await sendEvent();\r\n        setButton(buttonStates.success);\r\n        setSavedTimer(setTimeout(() => setButton(buttonStates.default), 1000));\r\n\r\n        if (data.redirectToPath) app().router.click(data.redirectToPath);\r\n      }\r\n    },\r\n    [button, buttonStates, model.confirm, sendEvent, view]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handleKeySave = () => {\r\n      if (activeKeySaveView) handleSubmit();\r\n    };\r\n    const inactivateKeySaveView = () => setActiveKeySaveView(false);\r\n    const activateKeySaveView = () => {\r\n      app().event(\"inactivateKeySaveView\");\r\n      setActiveKeySaveView(true);\r\n    };\r\n\r\n    if (model.saveOnKey) {\r\n      view.on(\"submit\", handleSubmit);\r\n      app().on(\"keypressSaveEvent\", handleKeySave);\r\n      app().on(\"inactivateKeySaveView\", inactivateKeySaveView);\r\n      setActiveKeySaveView(false);\r\n      view.on(\"change\", activateKeySaveView);\r\n    }\r\n\r\n    return () => {\r\n      if (savedTimer) clearTimeout(savedTimer);\r\n      if (model.saveOnKey) {\r\n        view.off(\"submit\", handleSubmit);\r\n        view.off(\"change\", activateKeySaveView);\r\n        app().off(\"keypressSaveEvent\", handleKeySave);\r\n        app().off(\"inactivateKeySaveView\", inactivateKeySaveView);\r\n      }\r\n    };\r\n  }, [activeKeySaveView, handleSubmit, model.saveOnKey, savedTimer, view]);\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={handleSubmit}\r\n        className={model.className}\r\n        type={model.btnType}\r\n        size={model.size}\r\n      >\r\n        {app().t(button.text)}\r\n      </Button>\r\n      {error}\r\n    </>\r\n  );\r\n};\r\n\r\nconst pick = (fields, value) =>\r\n  fields\r\n    ? fields.reduce(\r\n        (prev, [id, to]) => (value[id] ? { ...prev, [to]: value[id] } : prev),\r\n        {}\r\n      )\r\n    : value;\r\n\r\nconst ViewButtonEventEmitter = ({ model, view, path }) => {\r\n  const [active, setActive] = useState(false);\r\n\r\n  const emitterByType = {\r\n    connection: {\r\n      event: (type, data) => app().connection.emit({ type, ...data }),\r\n    },\r\n    view: view,\r\n    baseView: view.baseView,\r\n    baseViewBaseView: view.baseView?.baseView,\r\n    baseViewBaseViewBaseView: view.baseView?.baseView?.baseView,\r\n    app: app(),\r\n  };\r\n  const emitter = emitterByType[model.eventType || \"connection\"];\r\n\r\n  useEffect(() => {\r\n    if (!emitter.on) return;\r\n\r\n    const checkActive = () => {\r\n      setActive(false);\r\n    };\r\n\r\n    emitter.on(model.event, checkActive);\r\n    return () => {\r\n      emitter.off(model.event, checkActive);\r\n    };\r\n  }, [emitter, model.event, view.value._id]);\r\n\r\n  const sendEvent = async () => {\r\n    await emitter.event(model.event, {\r\n      event: model.subEvent,\r\n      value: active ? false : pick(model.fields, view.value),\r\n      contentType: view.contentType,\r\n    });\r\n    if (model.inactiveClass || model.activeClass) setActive(!active);\r\n  };\r\n\r\n  if (model.item)\r\n    return (\r\n      <Wrapper\r\n        className={[\r\n          model.className,\r\n          active && model.activeClass,\r\n          !active && model.inactiveClass,\r\n        ]}\r\n        onClick={sendEvent}\r\n      >\r\n        <ContentTypeRender path={path} items={model.item} />\r\n      </Wrapper>\r\n    );\r\n\r\n  return <EventButton model={model} view={view} path={path} />;\r\n};\r\nexport default ViewButtonEventEmitter;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport * as components from \"nystem-components\";\r\n\r\nconst ViewButtonField2Event = ({ model, view }) => {\r\n  const { capFirst } = app();\r\n\r\n  const { type, format } = model.field[0];\r\n  const [value, setValue] = useState(model.default);\r\n\r\n  const componentName = `${capFirst(type)}${capFirst(\r\n    format || view.viewFormat || \"view\"\r\n  )}`;\r\n  const component =\r\n    components[componentName] || components[`${capFirst(type)}View`];\r\n\r\n  useEffect(() => {\r\n    view.event(model.event, { value });\r\n  }, [model.event, value, view]);\r\n\r\n  return React.createElement(component, {\r\n    value,\r\n    view,\r\n    model: model.field[0],\r\n    setValue,\r\n  });\r\n};\r\nexport default ViewButtonField2Event;\r\n","import React, { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Button, Wrapper } from \"nystem-components\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nconst baseButtonStates = {\r\n  default: {\r\n    text: \"Save\",\r\n    type: \"secondary\",\r\n  },\r\n  saving: {\r\n    text: \"Saving ...\",\r\n    type: \"warning\",\r\n  },\r\n  success: {\r\n    text: \"Saved\",\r\n    type: \"success\",\r\n  },\r\n  deleted: {\r\n    text: \"Undo delete\",\r\n    type: \"warning\",\r\n  },\r\n};\r\n\r\nconst ViewButtonInput = ({ view, model, value, history, location }) => {\r\n  const { text, btnType } = model;\r\n\r\n  const buttonStates = useMemo(\r\n    () =>\r\n      text\r\n        ? {\r\n            ...baseButtonStates,\r\n            default: {\r\n              text,\r\n              type: `${btnType || \"secondary\"}`,\r\n            },\r\n          }\r\n        : baseButtonStates,\r\n    [btnType, text]\r\n  );\r\n  const [button, setButton] = useState(\"default\");\r\n  const [error, setError] = useState(false);\r\n  const [savedTimer, setSavedTimer] = useState(false);\r\n  const [activeKeySaveView, setActiveKeySaveView] = useState(false);\r\n\r\n  const inactivateKeySaveView = () => {\r\n    setActiveKeySaveView(false);\r\n  };\r\n  const activateKeySaveView = () => {\r\n    app().event(\"inactivateKeySaveView\");\r\n    setActiveKeySaveView(true);\r\n  };\r\n  const handleCancel = () => {\r\n    if (view.event(\"cancel\")) view.event(\"reload\");\r\n  };\r\n  const handleDelete = () => {\r\n    if (view.event(\"delete\"))\r\n      app()\r\n        .database[view.contentType].delete({ id: view.value._id })\r\n        .then(() => setButton(\"deleted\"));\r\n  };\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    if (button !== \"default\") return;\r\n\r\n    const { errors = [] } = await view.event(\"validate\");\r\n    if (errors.length) {\r\n      setError(\"Correct validation errors\", errors);\r\n      setSavedTimer(\r\n        setTimeout(() => {\r\n          setSavedTimer(false);\r\n        }, 1000)\r\n      );\r\n      return;\r\n    }\r\n    setError(false);\r\n    setButton(\"saving\");\r\n\r\n    const { data, error } = await app().database[view.contentType].save({\r\n      data: { ...value },\r\n      view: view.format,\r\n    });\r\n\r\n    console.log(\"zzave\", { data, error }, value._id);\r\n\r\n    if (error) {\r\n      view.event(\"error\", error);\r\n      setButton(\"default\");\r\n      return;\r\n    }\r\n\r\n    const saved = await view.event(\"save\", data);\r\n    const { pathname } = location;\r\n\r\n    if (data && view.value._id && view.value._id !== data._id) {\r\n      history.replace(\r\n        pathname.replace(`/${view.value._id}`, `/${data._id || \"\"}`)\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (!model.noRedirect && !view.value._id) {\r\n      view.setValue({ path: \"_id\", value: data._id });\r\n      history.replace(`${model.redirectURL || pathname}/${data._id || \"\"}`);\r\n      return;\r\n    }\r\n\r\n    if (!saved) return;\r\n\r\n    if (model.clearOnSave) view.setValue({ value: {} });\r\n\r\n    setButton(\"success\");\r\n    setSavedTimer(\r\n      setTimeout(() => {\r\n        setButton(\"default\");\r\n        setSavedTimer(false);\r\n      }, 1000)\r\n    );\r\n  }, [button, history, location, model, value, view]);\r\n\r\n  useEffect(() => () => savedTimer && clearTimeout(savedTimer), [savedTimer]);\r\n\r\n  useEffect(() => {\r\n    const handleKeySave = () => {\r\n      if (activeKeySaveView) handleSubmit();\r\n    };\r\n\r\n    view.on(\"submit\", handleSubmit);\r\n    app().on(\"keypressSaveEvent\", handleKeySave);\r\n    app().on(\"inactivateKeySaveView\", inactivateKeySaveView);\r\n    view.on(\"change\", activateKeySaveView);\r\n\r\n    return () => {\r\n      view.off(\"submit\", handleSubmit);\r\n      view.off(\"change\", activateKeySaveView);\r\n      app().off(\"keypressSaveEvent\", handleKeySave);\r\n      app().off(\"inactivateKeySaveView\", inactivateKeySaveView);\r\n    };\r\n  }, [activeKeySaveView, handleSubmit, view]);\r\n\r\n  return (\r\n    <>\r\n      <Wrapper className={model.className}>\r\n        <Button\r\n          size={model.size}\r\n          onClick={handleSubmit}\r\n          type={buttonStates[button].type}\r\n        >\r\n          {app().t(buttonStates[button].text)}\r\n        </Button>\r\n        {button === \"default\" && !model.sendOnly && view.value._id && (\r\n          <>\r\n            <Button size={model.size} onClick={handleCancel} type=\"warning\">\r\n              Cancel\r\n            </Button>\r\n            <Button size={model.size} onClick={handleDelete} type=\"danger\">\r\n              {app().t(\"Delete\")}\r\n            </Button>\r\n          </>\r\n        )}\r\n      </Wrapper>\r\n      {error && (\r\n        <Wrapper className={`red py-2 px-1 ${savedTimer ? \"font-bold\" : \"\"}`}>\r\n          {error}\r\n        </Wrapper>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withRouter(ViewButtonInput);\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Button, Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst ViewButtonReference = ({ model, view, path }) => {\r\n  const { event, item, className } = model;\r\n  const callView = event.includes(\"Add\") ? view.baseView : view;\r\n\r\n  if (item && item.length)\r\n    return (\r\n      <Wrapper\r\n        className={className}\r\n        onClick={() =>\r\n          callView.event(\"reference\", { event, value: view.value })\r\n        }\r\n      >\r\n        <ContentTypeRender path={path} items={item} />\r\n      </Wrapper>\r\n    );\r\n\r\n  return (\r\n    <Button\r\n      onClick={() => callView.event(\"reference\", { event, value: view.value })}\r\n      className={className}\r\n      type={model.btnType}\r\n      size={model.btnSize}\r\n    >\r\n      {app().t(model.text)}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default ViewButtonReference;\r\n","import React from \"react\";\r\nimport { Button } from \"nystem-components\";\r\n\r\nconst ViewButtonSetValue = ({ model, view }) => {\r\n  const value = view.getValue(model.field);\r\n  const modelValue =\r\n    model.value.replace(/[0-9]/, \"\") === \"\"\r\n      ? parseInt(model.value, 10)\r\n      : model.value;\r\n\r\n  const setValue = () =>\r\n    view.setValue({ path: model.field, value: modelValue });\r\n\r\n  return (\r\n    <Button\r\n      type={value === modelValue ? model.btnType : model.falseBtnType}\r\n      size={model.size}\r\n      className={model.className}\r\n      onClick={() => setValue()}\r\n    >\r\n      {value ? model.text : model.falseText || model.text}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default ViewButtonSetValue;\r\n","import { useEffect } from \"react\";\r\n\r\nconst byType = {\r\n  false: false,\r\n  true: true,\r\n  undefined: undefined,\r\n};\r\n\r\nconst ViewButtonSetValueOnLoad = ({ model, view }) => {\r\n  useEffect(() => {\r\n    let value = view.getValue(model.field);\r\n\r\n    if (model.value) {\r\n      let modelValue =\r\n        model.value.replace(/[0-9]/, \"\") === \"\"\r\n          ? parseInt(model.value, 10)\r\n          : model.value;\r\n\r\n      if (byType.hasOwnProperty(modelValue)) modelValue = byType[modelValue];\r\n\r\n      if (value !== modelValue)\r\n        setTimeout(() => {\r\n          view.setValue({ path: model.field, value: modelValue });\r\n        }, 0);\r\n    } else if (model.arrValue) {\r\n      value = value || [];\r\n\r\n      const modelValue = model.arrValue\r\n        .map((val) =>\r\n          val.replace(/[0-9]/, \"\") === \"\" ? parseInt(val, 10) : val\r\n        )\r\n        .map((val) => (byType.hasOwnProperty(val) ? byType[val] : val));\r\n\r\n      const add = modelValue\r\n        .filter((val) => val)\r\n        .filter((val) => !value.includes(val));\r\n\r\n      if (add.length)\r\n        setTimeout(() => {\r\n          view.setValue({ path: model.field, value: [...value, ...add] });\r\n        }, 0);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [view, view.id]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default ViewButtonSetValueOnLoad;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { Button, Wrapper, Icon } from \"nystem-components\";\r\n\r\nconst ViewButtonUndoRedo = ({ model, view }) => {\r\n  const { iconClassName, className } = model;\r\n  const history = useRef([view.value]);\r\n  const at = useRef(false);\r\n\r\n  useEffect(() => {\r\n    const onChange = ({ value, isHistory }) => {\r\n      if (isHistory) return;\r\n\r\n      if (at.current) history.current = history.current.slice(0, at.current);\r\n      history.current.push(value);\r\n      at.current = false;\r\n    };\r\n    view.on(\"change\", -1000, onChange);\r\n    return () => {\r\n      view.off(\"change\", onChange);\r\n    };\r\n  }, [view]);\r\n\r\n  const IconButton = ({ icon, onClick }) => (\r\n    <Button onClick={onClick} type={model.btnType} size={model.btnSize}>\r\n      <Icon className={iconClassName || \"w-4 h-4\"} icon={icon} />\r\n    </Button>\r\n  );\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <IconButton\r\n        icon=\"undo\"\r\n        onClick={() => {\r\n          const atPos = at.current || history.current.length - 1;\r\n\r\n          const value = history.current[atPos - 1];\r\n          if (value) view.event(\"change\", { value, isHistory: true });\r\n          if (atPos) at.current = atPos - 1;\r\n        }}\r\n      />\r\n      <IconButton\r\n        icon=\"redo\"\r\n        onClick={() => {\r\n          if (!at.current || at.current === history.current.length - 1) return;\r\n\r\n          const value = history.current[at.current + 1];\r\n          if (value) view.event(\"change\", { value, isHistory: true });\r\n          if (at.current !== history.current.length - 1) at.current += 1;\r\n        }}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default ViewButtonUndoRedo;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Button, Wrapper } from \"nystem-components\";\r\n\r\nconst ViewButtonView = ({ model, view }) => (\r\n  <Wrapper className={model.className}>\r\n    <Button\r\n      type={model.btnType}\r\n      onClick={() => view.event(model.event || \"submit\", view.value)}\r\n    >\r\n      {app().t(model.text || \"...\")}\r\n    </Button>\r\n  </Wrapper>\r\n);\r\n\r\nexport default ViewButtonView;\r\n","import React from \"react\";\r\nimport { ContentTypeView } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst ViewInViewEmpty = ({ model, view, path }) => {\r\n  const { contentType, className, viewId } = model;\r\n\r\n  const insertVal = (val) => {\r\n    if (!val) return val;\r\n    return val.replace(/\\{([a-z_.0-9]+)\\}/gim, (str, p1) => {\r\n      if (p1 === \"_language\") return app().settings.lang;\r\n      if (p1 === \"id\") return view.id;\r\n      if (p1.indexOf(\"baseView.\") !== 0)\r\n        return view.getValue(p1.replace(\"..\", path));\r\n      p1 = p1.replace(\"baseView.\", \"\");\r\n      return view.baseView.getValue(p1.replace(\"..\", path));\r\n    });\r\n  };\r\n\r\n  return (\r\n    <ContentTypeView\r\n      className={className}\r\n      contentType={contentType}\r\n      format={model.view}\r\n      baseView={view}\r\n      id={insertVal(viewId)}\r\n    />\r\n  );\r\n};\r\nexport default ViewInViewEmpty;\r\n","import React from \"react\";\r\nimport { ContentTypeView } from \"nystem-components\";\r\n\r\nconst ViewInViewSetValue = ({ model, view, path, value }) => {\r\n  const { addid, viewId, contentType } = model;\r\n\r\n  const setValue = (id, value) => {\r\n    if (!id && !value) return;\r\n    if (model.addid) view.setValue({ path: model.addid, value });\r\n    else view.setValue(id, value);\r\n  };\r\n\r\n  const insertVal = (val) =>\r\n    val &&\r\n    val.replace(/\\{([a-z_.]+)\\}/gim, (str, p1) =>\r\n      view.getValue(p1.replace(\"..\", path))\r\n    );\r\n\r\n  return (\r\n    <ContentTypeView\r\n      className={model.className}\r\n      setValue={setValue}\r\n      contentType={contentType}\r\n      format={model.view}\r\n      value={addid ? value[addid] : value}\r\n      id={insertVal(viewId)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ViewInViewSetValue;\r\n","import React from \"react\";\r\nimport { ContentTypeView } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst ViewInViewView = ({ model, view, value, path, onSave }) => {\r\n  const { addid, contentType, className, viewId } = model;\r\n\r\n  const insertVal = (val) => {\r\n    if (!val) return val;\r\n    return val.replace(/\\{([a-z_.0-9]+)\\}/gim, (str, p1) => {\r\n      if (p1 === \"id\") return view.id;\r\n      if (p1 === \"_language\") return app().settings.lang;\r\n\r\n      if (p1.indexOf(\"params.\") === 0)\r\n        return view.params[p1.replace(\"params.\", \"\")];\r\n\r\n      if (p1.indexOf(\"baseView.\") !== 0)\r\n        return view.getValue(p1.replace(\"..\", path));\r\n\r\n      p1 = p1.replace(\"baseView.\", \"\");\r\n      return view.baseView.getValue(p1.replace(\"..\", path));\r\n    });\r\n  };\r\n\r\n  return (\r\n    <ContentTypeView\r\n      className={className}\r\n      contentType={contentType}\r\n      format={model.view}\r\n      value={(addid && value[addid]) || value}\r\n      id={insertVal(viewId)}\r\n      baseView={view}\r\n      params={view.params}\r\n      {...(onSave ? { onSave } : {})}\r\n    />\r\n  );\r\n};\r\nexport default ViewInViewView;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Link } from \"nystem-components\";\r\n\r\nclass ViewLinkButton extends React.Component {\r\n  render() {\r\n    const { model } = this.props;\r\n    let className = model.className ? model.className.join(\" \") : \"\";\r\n    let { href } = model;\r\n    if (model.renderType) className += ` btn-${model.renderType}`;\r\n    if (href[href.length - 1] === \"/\" && this.props.view.value)\r\n      href += this.props.view.value._id;\r\n    return (\r\n      <Link\r\n        className={`${className} btn`}\r\n        to={href}\r\n        match={model.match}\r\n        type=\"button\"\r\n        title={this.props.title ? this.props.title : \"\"}\r\n      >\r\n        {app().t(model.text)}\r\n      </Link>\r\n    );\r\n  }\r\n}\r\nexport default ViewLinkButton;\r\n","import React from \"react\";\r\nimport { Link, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst ViewLinkDynamicFields = ({ view, path, model }) => {\r\n  const insertVal = (val) => {\r\n    if (!val) return val;\r\n    return val.replace(/\\{([a-z_.0-9]+)\\}/gim, (str, p1) => {\r\n      if (p1 === \"id\") return view.id;\r\n\r\n      if (p1.indexOf(\"params.\") === 0)\r\n        return view.params[p1.replace(\"params.\", \"\")];\r\n\r\n      if (p1.indexOf(\"baseView.\") !== 0)\r\n        return view.getValue(p1.replace(\"..\", path));\r\n\r\n      p1 = p1.replace(\"baseView.\", \"\");\r\n      return view.baseView.getValue(p1.replace(\"..\", path));\r\n    });\r\n  };\r\n\r\n  const { className, exact, match, item, href } = model;\r\n\r\n  return (\r\n    <Link\r\n      className={className}\r\n      to={insertVal(href)}\r\n      match={match}\r\n      exact={exact}\r\n    >\r\n      <ContentTypeRender path={path} items={item} />\r\n    </Link>\r\n  );\r\n};\r\nexport default ViewLinkDynamicFields;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Link } from \"nystem-components\";\r\n\r\nconst ViewLinkDynamicLink = ({ model, view, path }) => {\r\n  const insertVal = (val) =>\r\n    val &&\r\n    val.replace(/\\{([a-z_.0-9]+)\\}/gim, (str, p1) => {\r\n      let val = \"\";\r\n      if (p1 === \"_language\") val = app().settings.lang;\r\n      else if (p1 === \"id\") val = view.id;\r\n      else if (p1.indexOf(\"params.\") === 0)\r\n        val = view.params[p1.replace(\"params.\", \"\")];\r\n      else if (p1.indexOf(\"baseView.\") !== 0)\r\n        val = view.getValue(p1.replace(\"..\", path));\r\n      else {\r\n        p1 = p1.replace(\"baseView.\", \"\");\r\n        val = view.baseView.getValue(p1.replace(\"..\", path));\r\n      }\r\n      if (val instanceof Array) val = val.join(\"|\");\r\n      return val;\r\n    });\r\n\r\n  const { href, match, className } = model;\r\n\r\n  return (\r\n    <Link\r\n      className={className ? className.join(\" \") : \"\"}\r\n      to={insertVal(href)}\r\n      match={insertVal(match)}\r\n    >\r\n      {app().t(model.text)}\r\n    </Link>\r\n  );\r\n};\r\nexport default ViewLinkDynamicLink;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst ViewLinkExternal = ({ view, path, model }) => {\r\n  const insertVal = (val) => {\r\n    if (!val) return val;\r\n    return val.replace(/\\{([a-z_.0-9]+)\\}/gim, (str, p1) => {\r\n      if (/pathItem[0-9]/.test(p1) && view.params) return view.params[p1[8]];\r\n      return view.getValue(p1.replace(\"..\", path));\r\n    });\r\n  };\r\n\r\n  const { className, item, href } = model;\r\n  let link = insertVal(href);\r\n  if (!/https?:\\/\\//im.test(link) && !link.startsWith(\"mailto:\"))\r\n    link = `https://${link}`;\r\n\r\n  return (\r\n    <Wrapper\r\n      className={className}\r\n      href={link}\r\n      target=\"_blank\"\r\n      renderAs=\"a\"\r\n      rel=\"noopener\"\r\n    >\r\n      <ContentTypeRender path={path} items={item} />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default ViewLinkExternal;\r\n","import React from \"react\";\r\nimport { Link, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst ViewLinkFields = ({ model, value, path }) => {\r\n  const { className, contentType, view: toView, add, addId, item } = model;\r\n\r\n  let href = `/${contentType}/${toView}`;\r\n  if (addId && value) href += `/${value._id}`;\r\n\r\n  return (\r\n    <Link to={(add || \"\") + href} className={className}>\r\n      <ContentTypeRender path={path} items={item} />\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default ViewLinkFields;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Link, Icon } from \"nystem-components\";\r\n\r\nclass ViewLinkLink extends React.Component {\r\n  render() {\r\n    const { model } = this.props;\r\n    const className = model.className ? model.className.join(\" \") : \"\";\r\n    const href =\r\n      model.href && this.props.view.id\r\n        ? model.href.replace(\"{id}\", this.props.view.id)\r\n        : model.href;\r\n\r\n    if (model.blank)\r\n      return (\r\n        <a\r\n          className={className}\r\n          href={href}\r\n          rel=\"noopener noreferrer\"\r\n          target=\"_blank\"\r\n        >\r\n          {app().t(model.text)}\r\n        </a>\r\n      );\r\n\r\n    if (model.renderType === \"icon\")\r\n      return (\r\n        <Link to={href} match={model.match} type=\"link\">\r\n          <Icon className={className} />\r\n        </Link>\r\n      );\r\n\r\n    return (\r\n      <Link className={className} to={href} match={model.match} type=\"link\">\r\n        {app().t(model.text)}\r\n      </Link>\r\n    );\r\n  }\r\n}\r\nexport default ViewLinkLink;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Link, Button } from \"nystem-components\";\r\n\r\nconst ViewLinkView = ({ model, value }) => {\r\n  const {\r\n    renderType,\r\n    className,\r\n    contentType,\r\n    view: toView,\r\n    text,\r\n    add,\r\n    addId,\r\n    btnType,\r\n    size,\r\n  } = model;\r\n\r\n  let href = `/${contentType}/${toView}`;\r\n  if (addId && value) href += `/${value._id}`;\r\n\r\n  if (renderType === \"button\")\r\n    return (\r\n      <Button\r\n        type={btnType}\r\n        size={size}\r\n        to={(add || \"\") + href}\r\n        className={className}\r\n        Component={Link}\r\n      >\r\n        {app().t(text)}\r\n      </Button>\r\n    );\r\n\r\n  return (\r\n    <Link\r\n      type={renderType || \"list\"}\r\n      to={(add || \"\") + href}\r\n      className={className}\r\n    >\r\n      {app().t(text)}\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default ViewLinkView;\r\n","/* eslint-disable space-in-parens */\r\nimport React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport app from \"nystem\";\r\nimport {\r\n  Wrapper,\r\n  DatabaseSearchContext,\r\n  ContentTypeRender,\r\n} from \"nystem-components\";\r\n\r\nfunction getScrollParent(element, includeHidden) {\r\n  let { position, overflowY, overflowX, overflow } = getComputedStyle(element);\r\n  const overflowRegex = includeHidden\r\n    ? /(auto|scroll|hidden)/\r\n    : /(auto|scroll)/;\r\n\r\n  if (position === \"fixed\") return document.body;\r\n\r\n  // eslint-disable-next-line no-cond-assign\r\n  for (let parent = element; (parent = parent.parentElement); ) {\r\n    ({ position, overflowY, overflowX, overflow } = getComputedStyle(parent));\r\n\r\n    if (position === \"absolute\" && position === \"static\") continue;\r\n    if (overflowRegex.test(overflow + overflowY + overflowX)) return parent;\r\n  }\r\n\r\n  return document.body;\r\n}\r\n\r\nconst SlotContent = ({ slot, model, view }) => {\r\n  const context = useContext(DatabaseSearchContext);\r\n  const [slotSearch, setSlotSearch] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (slot === 0) return;\r\n    let mounted = true;\r\n    setSlotSearch(false);\r\n    const db = app().database[view.contentType];\r\n\r\n    const timer = setTimeout(() => {\r\n      db.search({\r\n        ...context.search,\r\n        position: slot * context.search.count,\r\n        data: undefined,\r\n      }).then((search) => mounted && search.data && setSlotSearch(search));\r\n    }, model.searchDelay || 100);\r\n\r\n    return () => {\r\n      mounted = false;\r\n      clearTimeout(timer);\r\n    };\r\n  }, [context.search, model.searchDelay, slot, view.contentType]);\r\n\r\n  if (slot !== 0 && !slotSearch)\r\n    return <div className=\"loading p-4 m-4 rounded-lg shadow h-4 max-w-xl\" />;\r\n\r\n  if (slot !== 0 && context.search.count * slot === context.search.searchTotal)\r\n    return null;\r\n\r\n  if (slot === 0)\r\n    return <ContentTypeRender path={model.path} items={model.item} />;\r\n\r\n  return (\r\n    <DatabaseSearchContext.Provider value={{ search: slotSearch }}>\r\n      <ContentTypeRender path={model.path} items={model.item} />\r\n    </DatabaseSearchContext.Provider>\r\n  );\r\n};\r\n\r\nconst InfiniteSlot = ({ slot, model, view }) => {\r\n  const ref = useRef();\r\n  const [top, setTop] = useState();\r\n\r\n  useEffect(() => {\r\n    const element = ref.current;\r\n    let setViewListHeight;\r\n    let ro;\r\n\r\n    view.event(\"getViewListHeight\", { slot }).then(({ height }) => {\r\n      setViewListHeight = (query) => {\r\n        query.slotHeights[slot] = height;\r\n\r\n        if (query.top < height) query.top = height;\r\n        let top = 0;\r\n        for (let pos = 0; pos < slot; pos++)\r\n          top += query.slotHeights[pos] || query.top;\r\n\r\n        setTop(top);\r\n        return query;\r\n      };\r\n      ro = new ResizeObserver(() => {\r\n        const newH = element.offsetHeight;\r\n        if (newH < 10 || newH < height) return;\r\n\r\n        height = newH;\r\n        view.event(\"setViewListHeight\");\r\n      });\r\n      ro.observe(element);\r\n\r\n      view.on(\"setViewListHeight\", -slot, setViewListHeight);\r\n    });\r\n\r\n    return () => {\r\n      view.off(\"setViewListHeight\", setViewListHeight);\r\n      if (ro) ro.unobserve(element);\r\n    };\r\n  }, [slot, view]);\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      style={{ position: \"absolute\", top: `${top}px`, width: \"100%\" }}\r\n    >\r\n      <SlotContent slot={slot} model={model} view={view} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ViewListDynamicInfinite = ({ view, model }) => {\r\n  const { search, loading } = useContext(DatabaseSearchContext);\r\n  const { searchTotal } = search;\r\n  const ref = useRef();\r\n  const [slotCount, setSlotCount] = useState(0);\r\n\r\n  const [pos, setPos] = useState(0);\r\n  const [heightTotal, setHeightTotal] = useState(0);\r\n  const heights = useRef([]);\r\n  const slotsTotal = parseInt((searchTotal || 0) / search.count, 10) || 0;\r\n  let slotLimit = parseInt(slotCount || model.slotLimit || 3, 10);\r\n  if (slotLimit > slotsTotal) slotLimit = slotsTotal;\r\n\r\n  useEffect(() => {\r\n    if (!slotsTotal) return;\r\n    view.event(\"infiniteScrollPos\", { pos, total: slotsTotal - slotLimit + 1 });\r\n  }, [pos, slotLimit, slotsTotal, view]);\r\n\r\n  useEffect(() => {\r\n    let pos = 0;\r\n    let top = 0;\r\n    let innerHeight = 0;\r\n    const slotHeights = new Array(slotsTotal);\r\n    heights.current = slotHeights;\r\n    let height = 0;\r\n    const offset = (height) => (height < top ? 0 : height - top);\r\n    let slotCount = 0;\r\n\r\n    let updateTimer = false;\r\n    const updateSlots = () => {\r\n      clearTimeout(updateTimer);\r\n      updateTimer = false;\r\n\r\n      if (!element) return;\r\n      const top = offset(element.scrollY || element.scrollTop || 0);\r\n      const bottom = top + innerHeight;\r\n\r\n      let topPos = 0;\r\n      let newPos = 0;\r\n      let toPos = 0;\r\n      while (newPos < slotsTotal && topPos < bottom + 200) {\r\n        topPos += slotHeights[newPos] || height;\r\n        if (topPos < top) newPos++;\r\n        toPos++;\r\n      }\r\n      newPos -= 2;\r\n      if (newPos < 0) newPos = 0;\r\n\r\n      if (pos !== newPos) setPos(newPos);\r\n      pos = newPos;\r\n      if (toPos - pos !== slotCount) setSlotCount(toPos - pos);\r\n      slotCount = toPos - pos;\r\n    };\r\n\r\n    const scrollEvent = () => {\r\n      if (!updateTimer) updateTimer = setTimeout(updateSlots, 200);\r\n    };\r\n\r\n    let timer = false;\r\n    let element = false;\r\n    const start = () => {\r\n      element = ref.current;\r\n      if (!element) {\r\n        timer = setTimeout(start, 20);\r\n        return;\r\n      }\r\n      const { top: newTop } = element.getBoundingClientRect();\r\n      if (newTop > 0) top = newTop;\r\n\r\n      element = getScrollParent(element, true);\r\n      if (element === window.document.body) {\r\n        element = window;\r\n        // eslint-disable-next-line prefer-destructuring\r\n        innerHeight = window.innerHeight;\r\n      } else innerHeight = window.innerHeight - top;\r\n\r\n      element.addEventListener(\"scroll\", scrollEvent);\r\n    };\r\n    start();\r\n\r\n    const setViewListHeight = () => ({ innerHeight, slotHeights, top: 0 });\r\n    view.on(\"setViewListHeight\", 1000, setViewListHeight);\r\n\r\n    const getViewListHeight = ({ slot }) => ({\r\n      slot,\r\n      height: slotHeights[slot],\r\n    });\r\n    view.on(\"getViewListHeight\", getViewListHeight);\r\n\r\n    let heightTimer = false;\r\n    const setHeight = () => {\r\n      let totHeight = 0;\r\n      for (let i = 0; i < slotsTotal; i++)\r\n        totHeight += slotHeights[i] || height;\r\n\r\n      setHeightTotal(totHeight);\r\n      heightTimer = false;\r\n      if (!updateTimer) updateTimer = setTimeout(updateSlots, 200);\r\n    };\r\n\r\n    const setViewListHeightTotal = ({ top }) => {\r\n      if (!heightTimer) heightTimer = setTimeout(setHeight, 200);\r\n      height = top;\r\n    };\r\n    view.on(\"setViewListHeight\", -1000, setViewListHeightTotal);\r\n\r\n    return () => {\r\n      if (timer) clearTimeout(timer);\r\n      if (updateTimer) clearTimeout(updateTimer);\r\n      view.off(\"getViewListHeight\", getViewListHeight);\r\n      view.off(\"setViewListHeight\", setViewListHeight);\r\n      view.off(\"setViewListHeight\", setViewListHeightTotal);\r\n\r\n      if (!element) return;\r\n      element.removeEventListener(\"scroll\", scrollEvent);\r\n    };\r\n  }, [model, search, slotsTotal, view]);\r\n\r\n  if (loading) return null;\r\n\r\n  const slots = [];\r\n  for (let count = pos; count === 0 || slotLimit + pos > count; count++)\r\n    slots.push(\r\n      <InfiniteSlot\r\n        key={`${slotsTotal}_${count}`}\r\n        slot={count}\r\n        model={model}\r\n        view={view}\r\n      />\r\n    );\r\n\r\n  return (\r\n    <Wrapper\r\n      ref={ref}\r\n      className={model.className}\r\n      style={{\r\n        position: \"relative\",\r\n        height: `${heightTotal}px`,\r\n      }}\r\n    >\r\n      {slots}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default ViewListDynamicInfinite;\r\n","import React, { useContext } from \"react\";\r\nimport {\r\n  Wrapper,\r\n  ContentTypeRender,\r\n  DatabaseSearchContext,\r\n} from \"nystem-components\";\r\n\r\nconst ViewListEmptySearchresult = ({ model, path }) => {\r\n  const { search = {} } = useContext(DatabaseSearchContext);\r\n  const { filter = {} } = search;\r\n  const searchText = ((filter.$and || []).find((item) => item.$all) || {}).$all;\r\n\r\n  if ((!searchText && model.inverse) || (searchText && !model.inverse))\r\n    return (\r\n      <Wrapper className={model.className} renderAs={model.renderAs}>\r\n        <ContentTypeRender path={path} items={model.item} />\r\n      </Wrapper>\r\n    );\r\n\r\n  return null;\r\n};\r\nexport default ViewListEmptySearchresult;\r\n","/* eslint-disable space-in-parens */\r\nimport React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport app from \"nystem\";\r\nimport {\r\n  Wrapper,\r\n  DatabaseSearchContext,\r\n  ContentTypeRender,\r\n} from \"nystem-components\";\r\n\r\nfunction getScrollParent(element, includeHidden) {\r\n  let { position, overflowY, overflowX, overflow } = getComputedStyle(element);\r\n  const overflowRegex = includeHidden\r\n    ? /(auto|scroll|hidden)/\r\n    : /(auto|scroll)/;\r\n\r\n  if (position === \"fixed\") return document.body;\r\n\r\n  // eslint-disable-next-line no-cond-assign\r\n  for (let parent = element; (parent = parent.parentElement); ) {\r\n    ({ position, overflowY, overflowX, overflow } = getComputedStyle(parent));\r\n\r\n    if (position === \"absolute\" && position === \"static\") continue;\r\n    if (overflowRegex.test(overflow + overflowY + overflowX)) return parent;\r\n  }\r\n\r\n  return document.body;\r\n}\r\n\r\nconst getStyle = (top, extend) => ({\r\n  position: \"absolute\",\r\n  top: `${top}px`,\r\n  width: \"100%\",\r\n  ...extend,\r\n});\r\n\r\nconst ViewListInfiniteSlot = ({ pos, hidden, slot, model, setSize, view }) => {\r\n  const context = useContext(DatabaseSearchContext);\r\n  const [slotSearch, setSlotSearch] = useState(false);\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    if (slot === 0) return;\r\n    const db = app().database[view.contentType];\r\n\r\n    const timer = setTimeout(() => {\r\n      db.search({\r\n        ...context.search,\r\n        position: slot * context.search.count,\r\n        data: undefined,\r\n      }).then((search) => search.data && setSlotSearch(search));\r\n    }, model.searchDelay || 10);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [context.search, model.searchDelay, slot, view.contentType]);\r\n\r\n  useEffect(() => {\r\n    const setHeight = () => {\r\n      if (ref.current && ref.current.offsetHeight)\r\n        setSize(ref.current.offsetHeight);\r\n      else setTimeout(setHeight, 20);\r\n    };\r\n    setTimeout(setHeight, 0);\r\n  }, [setSize]);\r\n\r\n  if (slot !== 0 && context.search.count * slot === context.search.searchTotal)\r\n    return null;\r\n\r\n  if (slot !== 0 && !slotSearch)\r\n    return (\r\n      <div\r\n        className=\"loading p-4 m-4 rounded-lg shadow h-4 max-w-xl\"\r\n        style={getStyle(pos)}\r\n      />\r\n    );\r\n\r\n  const contents = (\r\n    <div\r\n      ref={ref}\r\n      style={getStyle(pos, { visibility: hidden ? \"hidden\" : \"visible\" })}\r\n    >\r\n      <ContentTypeRender path={model.path} items={model.item} />\r\n    </div>\r\n  );\r\n\r\n  if (slot === 0) return contents;\r\n\r\n  return (\r\n    <DatabaseSearchContext.Provider value={{ search: slotSearch }}>\r\n      {contents}\r\n    </DatabaseSearchContext.Provider>\r\n  );\r\n};\r\n\r\nconst ViewListInfinite = ({ view, model }) => {\r\n  const { search, loading } = useContext(DatabaseSearchContext);\r\n  const { searchTotal } = search;\r\n  const ref = useRef();\r\n\r\n  const [pos, setPos] = useState(0);\r\n  const [height, setHeight] = useState(0);\r\n  const heightRef = useRef();\r\n  heightRef.current = height;\r\n  const slotHeights = useRef({});\r\n  if (!height) slotHeights.current = {};\r\n\r\n  const slotsTotal = parseInt((searchTotal || 0) / search.count, 10) || 0;\r\n  const slotLimit = parseInt(model.slotLimit || 3, 10);\r\n\r\n  useEffect(() => {\r\n    if (model.clearHeightOnUpdate) setHeight(0);\r\n  }, [model, searchTotal]);\r\n\r\n  useEffect(() => {\r\n    if (!slotsTotal) return;\r\n    view.event(\"infiniteScrollPos\", { pos, total: slotsTotal - slotLimit + 1 });\r\n  }, [pos, slotLimit, slotsTotal, view]);\r\n\r\n  useEffect(() => {\r\n    let updateTimer = false;\r\n    let pos = 0;\r\n    let element = false;\r\n    let top = 0;\r\n    let timer = false;\r\n    const offset = (height) => (height < top ? 0 : height - top);\r\n\r\n    const updateSlots = () => {\r\n      clearTimeout(updateTimer);\r\n      updateTimer = false;\r\n\r\n      const top = element.scrollY || element.scrollTop || 0;\r\n\r\n      const newPos =\r\n        parseInt((offset(top) / (height * slotsTotal)) * slotsTotal, 10) || 0;\r\n\r\n      if (pos === newPos) return;\r\n      pos = newPos;\r\n      setPos(pos);\r\n    };\r\n\r\n    const scrollEvent = () => {\r\n      if (!updateTimer)\r\n        updateTimer = setTimeout(updateSlots, model.slotUpdateDelay || 200);\r\n    };\r\n\r\n    let width = window.innerWidth;\r\n    const resizeEvent = () => {\r\n      if (width === window.innerWidth) return;\r\n\r\n      width = window.innerWidth;\r\n      scrollEvent();\r\n      setHeight(0);\r\n    };\r\n\r\n    const start = () => {\r\n      element = ref.current;\r\n      if (!element) {\r\n        timer = setTimeout(start, 20);\r\n        return;\r\n      }\r\n      const { top: newTop } = element.getBoundingClientRect();\r\n      if (newTop > 0) top = newTop;\r\n\r\n      element = getScrollParent(element, true);\r\n      if (element === window.document.body) element = window;\r\n\r\n      element.addEventListener(\"scroll\", scrollEvent);\r\n      element.addEventListener(\"resize\", resizeEvent);\r\n    };\r\n    start();\r\n\r\n    return () => {\r\n      if (timer) clearTimeout(timer);\r\n      if (updateTimer) clearTimeout(updateTimer);\r\n      if (!element) return;\r\n\r\n      element.removeEventListener(\"scroll\", scrollEvent);\r\n      element.removeEventListener(\"resize\", resizeEvent);\r\n    };\r\n  }, [height, model, search.count, search.searchTotal, slotsTotal]);\r\n\r\n  if (loading) return null;\r\n\r\n  const slots = Array(\r\n    slotsTotal - pos < slotLimit - 1 ? slotsTotal - pos + 1 : slotLimit\r\n  ).fill();\r\n\r\n  let at = pos * height;\r\n  const getPos = () => {\r\n    const old = at;\r\n    at += height;\r\n    return old;\r\n  };\r\n\r\n  return (\r\n    <Wrapper\r\n      ref={ref}\r\n      className={model.className}\r\n      style={{\r\n        position: \"relative\",\r\n        height: `${height * (slotsTotal || slots.length)}px`,\r\n      }}\r\n    >\r\n      {slots.map((und, index) => (\r\n        <ViewListInfiniteSlot\r\n          key={index + pos}\r\n          pos={getPos(index + pos)}\r\n          slot={index + pos}\r\n          model={model}\r\n          hidden={height === 0}\r\n          setSize={(newHeight) => {\r\n            slotHeights.current[index + pos] = newHeight;\r\n\r\n            if (heightRef.current < newHeight) setHeight(newHeight);\r\n          }}\r\n          view={view}\r\n          search={search}\r\n        />\r\n      ))}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default ViewListInfinite;\r\n","import React from \"react\";\r\nimport { Wrapper, UseEventListner } from \"nystem-components\";\r\n\r\nconst ViewListInfiniteScrollPos = ({ model, view }) => {\r\n  const { text, className, classNameLabel, classNameInfo } = model;\r\n  const { pos, total } = UseEventListner(view, \"infiniteScrollPos\");\r\n\r\n  if (!total) return null;\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <Wrapper className={classNameLabel}>{text}</Wrapper>\r\n      <Wrapper className={classNameInfo}>\r\n        {pos + 1} of {total + 1}\r\n      </Wrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default ViewListInfiniteScrollPos;\r\n","import React, { useContext } from \"react\";\r\nimport { Wrapper, DatabaseSearchContext } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst ViewListListStat = ({ model }) => {\r\n  const { search } = useContext(DatabaseSearchContext);\r\n  function total() {\r\n    if (\r\n      search.searchTotal === search.total ||\r\n      model.show.indexOf(\"total\") === -1\r\n    )\r\n      return null;\r\n    return (\r\n      <Wrapper renderAs=\"span\">\r\n        {`, ${search.total}${app().t(\" in total\")}`}\r\n      </Wrapper>\r\n    );\r\n  }\r\n\r\n  let text = \"\";\r\n  if (!model.show) model.show = [];\r\n  if (model.show.indexOf(\"currentPos\") !== -1)\r\n    text += search.position ? search.position : 0;\r\n  if (\r\n    model.show.indexOf(\"currentPos\") !== -1 &&\r\n    model.show.indexOf(\"toPos\") !== -1\r\n  )\r\n    text += \" - \";\r\n  if (model.show.indexOf(\"toPos\") !== -1)\r\n    text += search.count ? search.count : 0;\r\n  if (\r\n    model.show.indexOf(\"searchTotal\") !== -1 &&\r\n    (model.show.indexOf(\"currentPos\") !== -1 ||\r\n      model.show.indexOf(\"toPos\") !== -1)\r\n  )\r\n    text += \" of \";\r\n  if (model.show.indexOf(\"searchTotal\") !== -1)\r\n    text += search.searchTotal ? search.searchTotal : 0;\r\n\r\n  /* const toPos = settings.searchTotal < settings.position + settings.count\r\n      ? settings.searchTotal\r\n      : settings.position + settings.count; */\r\n  return (\r\n    <Wrapper className={[model.className, \"control-label\"]}>\r\n      <Wrapper>{model.text}</Wrapper>\r\n      <Wrapper>{text}</Wrapper>\r\n      {total()}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default ViewListListStat;\r\n","import React, { useEffect, useRef, useContext } from \"react\";\r\nimport {\r\n  Button,\r\n  Wrapper,\r\n  RouterUseQueryStore,\r\n  DatabaseSearchContext,\r\n} from \"nystem-components\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport app from \"nystem\";\r\n\r\nconst ViewListPager = ({ view, model }) => {\r\n  const { search } = useContext(DatabaseSearchContext);\r\n  const [value, setValue, ref] = RouterUseQueryStore(model.saveId, \"int\", true);\r\n  const history = useHistory();\r\n\r\n  const last = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (!value && !last.current) return;\r\n\r\n    const setSearch = (query) => {\r\n      if (!value) return;\r\n      query.position = value;\r\n    };\r\n    if (value) view.on(\"setSearch\", setSearch);\r\n    view.event(\"setSearch\");\r\n\r\n    last.current = value;\r\n    return () => {\r\n      if (value) view.off(\"setSearch\", setSearch);\r\n    };\r\n  }, [value, view]);\r\n\r\n  const relUrl = (value) => {\r\n    const { saveId } = model;\r\n\r\n    if (!saveId) return;\r\n\r\n    const { pathname, search } = history.location;\r\n\r\n    const reg = `(^\\\\?)|(\\\\&${saveId}=[^\\\\s&]*)`;\r\n    const rest = search.replace(new RegExp(reg, \"gi\"), \"\");\r\n    const add = value ? `&${saveId}=${value}` : \"\";\r\n\r\n    return `${pathname}?${rest}${add}`;\r\n  };\r\n\r\n  const update = (move) => {\r\n    if (move === -1) setValue(prev(search));\r\n    if (move === 1) setValue(next(search));\r\n  };\r\n\r\n  const prev = () =>\r\n    search.position !== 0 ? search.position - search.count : -1;\r\n  const next = () =>\r\n    search.position + search.count < search.searchTotal\r\n      ? search.position + search.count\r\n      : -1;\r\n\r\n  const hasPrev = prev() !== -1;\r\n  const hasNext = next() !== -1;\r\n\r\n  return (\r\n    <Wrapper ref={ref} className={[model.className, \"flex\", \"py-4\"]}>\r\n      <Button\r\n        renderAs=\"a\"\r\n        disabled={!hasPrev && \"disabled\"}\r\n        className=\"mr-2\"\r\n        onClick={hasPrev ? () => update(-1) : undefined}\r\n        href={hasPrev ? relUrl(prev(search)) : undefined}\r\n      >\r\n         {app().t(\"Previous\")}\r\n      </Button>\r\n      <Button\r\n        renderAs=\"a\"\r\n        disabled={!hasNext && \"disabled\"}\r\n        onClick={hasNext ? () => update(1) : undefined}\r\n        href={hasNext ? relUrl(next(search)) : undefined}\r\n      >\r\n        {app().t(\"Next\")} \r\n      </Button>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default ViewListPager;\r\n","import React from \"react\";\r\nimport { TextExposedField } from \"nystem-components\";\r\n\r\nconst ViewListSearch = ({ model, view }) => (\r\n  <TextExposedField\r\n    view={view}\r\n    model={{ text: \"Search\", ...model, id: \"$all\" }}\r\n  />\r\n);\r\n\r\nexport default ViewListSearch;\r\n","import React, { useContext } from \"react\";\r\nimport {\r\n  DatabaseSearchContext,\r\n  Wrapper,\r\n  ContentTypeRender,\r\n  ContentTypeView,\r\n} from \"nystem-components\";\r\n\r\nimport \"./table.css\";\r\n\r\nconst ViewListRender = ({ model, view, value }) => {\r\n  const { rowClassName = [] } = model;\r\n  value = model.value || value;\r\n\r\n  function createItem(item) {\r\n    const id = [\"number\", \"string\"].includes(typeof item) ? item : item._id;\r\n\r\n    const settings = {\r\n      view: model,\r\n      contentType: view.contentType,\r\n      id,\r\n      key: id,\r\n      noForm: true,\r\n      baseView: view,\r\n      params: view.params,\r\n      className: rowClassName,\r\n      renderAs: item.renderAs,\r\n      itemRenderAs: item.renderAs === \"tr\" && \"td\",\r\n    };\r\n\r\n    return <ContentTypeView {...settings} />;\r\n  }\r\n\r\n  return value.map(createItem);\r\n};\r\n\r\nconst ViewListView = ({ model, view }) => {\r\n  const { search } = useContext(DatabaseSearchContext);\r\n\r\n  const value = (search && search.data) || [];\r\n  const { emptyFields, className = [], headerFields, renderFormat } = model;\r\n\r\n  if (value.length === 0 && emptyFields && emptyFields.length > 0)\r\n    return (\r\n      <Wrapper className={className}>\r\n        <ContentTypeRender items={emptyFields} />\r\n      </Wrapper>\r\n    );\r\n\r\n  if (model.renderFormat === \"table\")\r\n    return (\r\n      <Wrapper renderAs=\"table\" className={className}>\r\n        <Wrapper renderAs=\"thead\">\r\n          <Wrapper renderAs=\"tr\">\r\n            <ContentTypeRender items={headerFields} renderAs=\"th\" />\r\n          </Wrapper>\r\n        </Wrapper>\r\n        <Wrapper renderAs=\"tbody\">\r\n          <ViewListRender\r\n            value={value.map((data) => ({ ...data, renderAs: \"tr\" }))}\r\n            model={model}\r\n            view={view}\r\n          />\r\n        </Wrapper>\r\n      </Wrapper>\r\n    );\r\n\r\n  if (renderFormat === \"list\")\r\n    return (\r\n      <Wrapper className={className}>\r\n        <ViewListRender value={value} model={model} view={view} />\r\n      </Wrapper>\r\n    );\r\n\r\n  if (headerFields && headerFields.length)\r\n    return (\r\n      <Wrapper className={className}>\r\n        <ContentTypeRender items={headerFields} />\r\n        <ViewListRender value={value} model={model} view={view} />\r\n      </Wrapper>\r\n    );\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <ViewListRender value={value} model={model} view={view} />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default ViewListView;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst ViewTextBreak = ({ model }) => {\r\n  const className = model.className ? model.className.join(\" \") : \"\";\r\n  return (\r\n    <Wrapper className={className} renderAs={model.renderAs} translate=\"true\">\r\n      <br />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default ViewTextBreak;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nclass ViewTextToken extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    this.view = props.view;\r\n    const state = {\r\n      value: app().utils.clone(this.view.value),\r\n      text: this.insertVal(this.model.text),\r\n    };\r\n    this.view.on(\"change\", this.setValueView);\r\n    this.state = state;\r\n  }\r\n  setValueView() {\r\n    const self = this;\r\n    if (JSON.stringify(this.view.value) !== JSON.stringify(this.state.value))\r\n      setTimeout(() => {\r\n        if (self.isMounted())\r\n          self.setState({\r\n            value: app().utils.clone(self.view.value),\r\n            text: self.insertVal(self.model.text),\r\n          });\r\n      }, 0);\r\n  }\r\n  insertVal(val) {\r\n    if (!val) return val;\r\n    const self = this;\r\n    this.val = false;\r\n    return val.replace(/\\{([a-z_.]+)\\}/gim, (str, p1) => {\r\n      const val = self.view.getValue(p1.replace(\"..\", self.props.path));\r\n      return typeof val === \"undefined\" ? \"\" : val;\r\n    });\r\n  }\r\n  componentWillUnmount() {\r\n    this.view.off(\"change\", this.setValueView);\r\n  }\r\n  render() {\r\n    const className = this.model.className\r\n      ? this.model.className.join(\" \")\r\n      : \"\";\r\n    const renderAs = this.props.model.renderAs\r\n      ? this.props.model.renderAs\r\n      : this.props.model.format;\r\n    return (\r\n      <Wrapper renderAs={renderAs} className={className}>\r\n        {app().t(this.state.text)}\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\nexport default ViewTextToken;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nclass ViewTextTokenFallbackNew extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    this.view = props.view;\r\n    const state = {\r\n      value: app().utils.clone(this.view.value),\r\n      text: this.insertVal(this.model.text),\r\n    };\r\n    this.view.on(\"change\", this.setValueView);\r\n    this.state = state;\r\n  }\r\n  setValueView() {\r\n    const self = this;\r\n    if (JSON.stringify(this.view.value) !== JSON.stringify(this.state.value))\r\n      setTimeout(() => {\r\n        if (self.isMounted())\r\n          self.setState({\r\n            value: app().utils.clone(self.view.value),\r\n            text: self.insertVal(self.model.text),\r\n          });\r\n      }, 0);\r\n  }\r\n  insertVal(val) {\r\n    if (!val) return val;\r\n    const self = this;\r\n    this.val = false;\r\n    return val.replace(/\\{([a-z_.]+)\\}/gim, (str, p1) => {\r\n      const val = self.view.getValue(p1.replace(\"..\", self.props.path));\r\n      self.val = self.val || val;\r\n      return typeof val === \"undefined\" ? \"\" : val;\r\n    });\r\n  }\r\n  componentWillUnmount() {\r\n    this.view.off(\"change\", this.setValueView);\r\n  }\r\n  render() {\r\n    const className = this.model.className\r\n      ? this.model.className.join(\" \")\r\n      : \"\";\r\n    const renderAs = this.props.model.renderAs\r\n      ? this.props.model.renderAs\r\n      : this.props.model.format;\r\n    const text = this.val\r\n      ? this.state.text\r\n      : `New ${app().contentType[this.view.contentType].name}`;\r\n    return (\r\n      <Wrapper renderAs={renderAs} className={className}>\r\n        {app().t(text)}\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\nexport default ViewTextTokenFallbackNew;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst ViewTextView = ({ model }) => {\r\n  const className = model.className ? model.className.join(\" \") : \"\";\r\n  return (\r\n    <Wrapper className={className} renderAs={model.renderAs} translate=\"true\">\r\n      {app().t(model.text)}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default ViewTextView;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst ConnectionCssclass = ({ children, path, model }) => {\r\n  const [connected, setConnected] = useState(app().connection.connected);\r\n\r\n  useEffect(() => {\r\n    const update = () => setConnected(app().connection.connected);\r\n    app().connection.on(\"connection\", update);\r\n    return () => {\r\n      app().connection.off(\"connection\", update);\r\n    };\r\n  });\r\n\r\n  const connectionClass =\r\n    (connected ? model.onlineClass : model.offlineClass) || \"\";\r\n\r\n  return (\r\n    <Wrapper className={[model.className, connectionClass]}>\r\n      {children || <ContentTypeRender path={path} items={model.item} />}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default ConnectionCssclass;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst ConnectionView = ({ model = {}, offline, className, path, children }) => {\r\n  const [connected, setConnectedState] = useState();\r\n\r\n  useEffect(() => {\r\n    const update = ({ connected }) => setConnectedState(connected);\r\n\r\n    app().connection.on(\"connection\", update);\r\n    setConnectedState(app().connection.connected);\r\n\r\n    return () => {\r\n      app().connection.off(\"connection\", update);\r\n    };\r\n  }, []);\r\n\r\n  className = className || model.className;\r\n  offline = offline || model.offline;\r\n\r\n  if ((connected && offline) || (!connected && !offline)) return null;\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      {children || <ContentTypeRender path={path} items={model.item} />}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default ConnectionView;\r\n","import React from \"react\";\r\n\r\nclass Offline extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"cssload-loader\">\r\n        <div className=\"cssload-inner cssload-one\" />\r\n        <div className=\"cssload-inner cssload-two\" />\r\n        <div className=\"cssload-inner cssload-three\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Offline;\r\n","import React from \"react\";\r\n\r\nconst ContentTypeContext = React.createContext();\r\n\r\nexport default ContentTypeContext;\r\n\r\nexport const ViewContextProvider = ContentTypeContext.Provider;\r\n","import React, { useContext } from \"react\";\r\nimport app from \"nystem\";\r\nimport * as components from \"nystem-components\";\r\n\r\nconst createItem = ({ item, value, path, view, ...context }) => {\r\n  const { capFirst } = app();\r\n  const { id, type, format } = item;\r\n\r\n  const componentName = `${capFirst(type)}${capFirst(\r\n    format || view.viewFormat || \"view\"\r\n  )}`;\r\n\r\n  let component =\r\n    components[componentName] || components[`${capFirst(type)}View`];\r\n\r\n  const { getValue, getValuePath } = view;\r\n  const valuePath = getValuePath(path, id);\r\n  const setValue = (value) => view.setValue({ path: valuePath, value });\r\n\r\n  if (!component)\r\n    return (\r\n      <div\r\n        key={context.key}\r\n        className=\"red\"\r\n      >{`Missing component ${componentName}`}</div>\r\n    );\r\n\r\n  const focus =\r\n    item.format === \"input\" &&\r\n    item.category !== \"view\" &&\r\n    view.focus &&\r\n    !view.focused;\r\n\r\n  if (focus) view.focused = true;\r\n  if (typeof component === \"object\" && !component.render) {\r\n    console.log(component, item);\r\n    component = \"div\";\r\n  }\r\n  return React.createElement(component, {\r\n    ...context,\r\n    value: getValue(valuePath),\r\n    path,\r\n    view,\r\n    model: item,\r\n    setValue,\r\n    focus,\r\n  });\r\n};\r\n\r\nconst ContentTypeRender = (props) => {\r\n  const { path, items, renderAs } = props;\r\n  const context = useContext(components.ContentTypeContext);\r\n\r\n  if (!items) return <div className=\"red\">Missing items</div>;\r\n\r\n  return items.map((item, key) => {\r\n    const out = createItem({ key, item, path, ...context });\r\n    return (renderAs && React.createElement(renderAs, { key }, out)) || out;\r\n  });\r\n};\r\nexport default ContentTypeRender;\r\n","import React, { useState, useEffect, useMemo } from \"react\";\r\nimport app from \"nystem\";\r\nimport {\r\n  Loading,\r\n  Wrapper,\r\n  ContentTypeRender,\r\n  DatabaseSearchContextProvider,\r\n} from \"nystem-components\";\r\nimport { getDiff, applyDiff } from \"recursive-diff\";\r\n\r\nimport { ViewContextProvider } from \"./context\";\r\nimport \"./view.css\";\r\n\r\nconst setValueAtPath = ({ path, current, value }) => {\r\n  if (!path) return value;\r\n\r\n  const parts = path.split(\".\");\r\n  const out = { ...current };\r\n  let at = out;\r\n\r\n  parts.forEach((key, index) => {\r\n    if (parts.length - 1 === index) at[key] = value;\r\n    else {\r\n      at[key] = at[key] instanceof Array ? [...at[key]] : { ...at[key] };\r\n      at = at[key];\r\n    }\r\n  });\r\n\r\n  if (app().settings.debug) console.log(out);\r\n  return out;\r\n};\r\n\r\nconst getValuePath = (path = \"\", id = \"\") => {\r\n  if (id) {\r\n    id = id.substring(id.lastIndexOf(\".\") + 1);\r\n    return path ? `${path}.${id}` : id;\r\n  }\r\n  return path;\r\n};\r\n\r\nconst useValue = ({ view, propvalue }) => {\r\n  const [value, setValue] = useState({});\r\n  const [loading, setLoading] = useState(!!view.id);\r\n\r\n  useEffect(() => {\r\n    if (!propvalue || view.id) return;\r\n    setTimeout(() => {\r\n      view.event(\"change\", { value: propvalue });\r\n    }, 10);\r\n  }, [view, propvalue]);\r\n\r\n  useEffect(() => {\r\n    if (!view.on) return;\r\n\r\n    const { id, contentType, noAutoUpdate } = view;\r\n    const db = app().database[contentType];\r\n    let firstData = id ? false : {};\r\n    let value = false;\r\n    let savedData = false;\r\n\r\n    const doGet = ({ ids } = {}) => {\r\n      if (!ids || ids.includes(id))\r\n        db.get({ id }).then(({ data }) => {\r\n          if (!data) data = {};\r\n          if (!firstData) {\r\n            view.event(\"change\", { value: data });\r\n            return;\r\n          }\r\n\r\n          const diff = getDiff(savedData, data);\r\n          value = applyDiff(value, diff);\r\n\r\n          if (diff.length) view.event(\"change\", { value });\r\n        });\r\n    };\r\n    if (id) {\r\n      if (!db) console.error(\"Missing db\", view);\r\n      doGet();\r\n      if (!noAutoUpdate) db.on(\"update\", doGet);\r\n    }\r\n\r\n    const changeData = (props) => ({\r\n      ...props,\r\n      id: props.path,\r\n      value: props.path\r\n        ? setValueAtPath({ ...props, current: value })\r\n        : props.value,\r\n      oldValue: value,\r\n    });\r\n\r\n    view.on(\"change\", 1000, changeData);\r\n\r\n    const setData = async ({ value: newValue }) => {\r\n      value = newValue;\r\n      await setValue({ ...value });\r\n\r\n      if (!firstData) {\r\n        // eslint-disable-next-line no-multi-assign\r\n        firstData = savedData = value;\r\n        setLoading(false);\r\n      }\r\n    };\r\n    view.on(\"change\", -999, setData);\r\n\r\n    const saveData = (data) => {\r\n      savedData = data;\r\n    };\r\n    view.on(\"save\", -1000, saveData);\r\n\r\n    const reload = () => {\r\n      view.event(\"clearErrorValidation\");\r\n      view.event(\"change\", { value: firstData });\r\n    };\r\n    view.on(\"reload\", reload);\r\n\r\n    return () => {\r\n      if (id && !noAutoUpdate) db.off(\"update\", doGet);\r\n      view.off(\"reload\", reload);\r\n      view.off(\"change\", changeData);\r\n      view.off(\"change\", setData);\r\n      view.on(\"save\", saveData);\r\n    };\r\n  }, [view]);\r\n\r\n  view.getValue = (path) =>\r\n    path ? path.split(\".\").reduce((val, key) => val && val[key], value) : value;\r\n\r\n  view.setValue = (props) => view.event(\"change\", props);\r\n  view.value = value;\r\n\r\n  return { value, loading };\r\n};\r\n\r\nconst ContentTypeView = ({\r\n  id,\r\n  contentType,\r\n  baseView,\r\n  addForm,\r\n  className,\r\n  itemFrom,\r\n  itemTo,\r\n  format,\r\n  children,\r\n  view: viewModel,\r\n  value: propvalue,\r\n  renderAs,\r\n  itemRenderAs,\r\n  params,\r\n  ...events\r\n}) => {\r\n  const view = useMemo(() => {\r\n    const model = app().populatedViews[contentType];\r\n\r\n    if (!viewModel && !(model && model.views)) {\r\n      console.error(\"View creation error\", {\r\n        contentType,\r\n        baseView,\r\n        format,\r\n      });\r\n      return { model: {} };\r\n    }\r\n\r\n    const base = viewModel || model.views[format] || {};\r\n    return app().addeventhandler(\r\n      {\r\n        ...base,\r\n        baseView,\r\n        model,\r\n        format,\r\n        viewFormat: base.format,\r\n        contentType,\r\n        getValuePath,\r\n        id,\r\n      },\r\n      `view ${contentType} ${format}`\r\n    );\r\n  }, [contentType, viewModel, format, baseView, id]);\r\n\r\n  const { model } = view;\r\n  view.params = params;\r\n\r\n  useEffect(() => {\r\n    if (!view.on) return;\r\n\r\n    Object.keys(events).forEach((event) => {\r\n      if (event.substring(0, 2) === \"on\" && event[2].toUpperCase() === event[2])\r\n        view.on(event.substring(2).toLowerCase(), events[event]);\r\n    });\r\n\r\n    return () => {\r\n      Object.keys(events).forEach((event) => {\r\n        if (\r\n          event.substring(0, 2) === \"on\" &&\r\n          event[2].toUpperCase() === event[2]\r\n        )\r\n          view.off(event.substring(2).toLowerCase(), events[event]);\r\n      });\r\n    };\r\n  }, [events, view]);\r\n\r\n  const { value, loading } = useValue({ view, propvalue });\r\n\r\n  if (!model) return \"Missing model to create view\";\r\n  if (loading) return <Loading />;\r\n\r\n  const context = { contentType, model, view, value };\r\n  const items = view.item ? view.item.slice(itemFrom, itemTo) : [];\r\n\r\n  if (!renderAs) renderAs = !(addForm || view.addForm) ? undefined : \"form\";\r\n\r\n  return (\r\n    <ViewContextProvider value={context}>\r\n      <Wrapper\r\n        renderAs={renderAs}\r\n        className={className}\r\n        {...(!addForm\r\n          ? {}\r\n          : {\r\n              onSubmit: (e) => {\r\n                e.preventDefault();\r\n                view.event(\"submit\");\r\n              },\r\n            })}\r\n      >\r\n        <DatabaseSearchContextProvider view={view}>\r\n          {children || (\r\n            <ContentTypeRender items={items} renderAs={itemRenderAs} />\r\n          )}\r\n        </DatabaseSearchContextProvider>\r\n      </Wrapper>\r\n    </ViewContextProvider>\r\n  );\r\n};\r\n\r\nexport default ContentTypeView;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nconst UseValidator = ({ validate, view, model, value }) => {\r\n  const [isValidated, setValidated] = useState(view && view.isValidated);\r\n  const error = isValidated && validate({ value, model });\r\n\r\n  useEffect(() => {\r\n    const validator = async ({ errors, silent }) => {\r\n      if (!silent) setValidated(true);\r\n\r\n      const error = await Promise.resolve(validate({ value, model }) || false);\r\n      if (error) errors = [...(errors || []), error];\r\n      return errors ? { errors, silent } : undefined;\r\n    };\r\n\r\n    const clearErrorValidation = () => {\r\n      setValidated(false);\r\n    };\r\n    if (!view) return;\r\n    view.on(\"validate\", validator);\r\n    view.on(\"clearErrorValidation\", clearErrorValidation);\r\n\r\n    return () => {\r\n      if (!view) return;\r\n      view.off(\"validate\", validator);\r\n      view.off(\"clearErrorValidation\", clearErrorValidation);\r\n    };\r\n  }, [view, validate, value, model]);\r\n\r\n  return [error, setValidated];\r\n};\r\nexport default UseValidator;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst types = {\r\n  primary: \"bg-blue-500 hover:bg-blue-500 text-white rounded shadow-sm\",\r\n  secondary:\r\n    \"bg-gray-200 hover:bg-gray-300 text-gray-900 border border-gray-300 rounded shadow-sm\",\r\n  \"ehc-primary\": \"floatlabel bg-primary text-white w-full\",\r\n  \"ehc-secondary\": \"floatlabel bg-secondary border border-gray-300 w-full\",\r\n  danger: \"bg-red-700 hover:bg-red-600 text-white rounded shadow-sm\",\r\n  warning: \"bg-yellow-600 hover:bg-yellow-500 text-white rounded shadow-sm\",\r\n  success: \"bg-green-600 hover:bg-green-500 text-white rounded shadow-sm\",\r\n  info: \"btn\",\r\n  error: \"btn\",\r\n  default: \"bg-gray-200 hover:bg-gray-300 text-gray-900 border border-gray-300\",\r\n  primaryDisabled: \"bg-blue-400 cursor-not-allowed\",\r\n  secondaryDisabled: \"bg-gray-600 text-white cursor-not-allowed\",\r\n  dangerDisabled: \"bg-red-400 text-white cursor-not-allowed\",\r\n  warningDisabled: \"bg-yellow-300 text-white cursor-not-allowed\",\r\n  infoDisabled: \"btn\",\r\n  errorDisabled: \"btn\",\r\n  defaultDisabled: \"bg-gray-300 text-white cursor-not-allowed\",\r\n};\r\n\r\nconst sizes = {\r\n  xs: \"py-1 px-2 text-xs\",\r\n  sm: \"py-1 px-2 text-sm\",\r\n  base: \"py-2 px-4 text-base\",\r\n  lg: \"py-4 px-6 text-lg\",\r\n  xl: \"py-4 px-8 text-xl\",\r\n  \"2xl\": \"py-4 px-8 text-xl2\",\r\n};\r\n\r\nconst Button = ({\r\n  onClick,\r\n  className = [],\r\n  type,\r\n  size,\r\n  disabled,\r\n  ...props\r\n}) => {\r\n  className = className instanceof Array ? [...className] : [className];\r\n\r\n  if (!className.includes(\"floatlabel\")) {\r\n    className.push(types[(type || \"default\") + (disabled ? \"Disabled\" : \"\")]);\r\n    className.push(sizes[size] || sizes.base);\r\n  }\r\n\r\n  if (props.Component)\r\n    return React.createElement(props.Component, {\r\n      className,\r\n      ...props,\r\n    });\r\n\r\n  return (\r\n    <Wrapper\r\n      renderAs=\"button\"\r\n      className={className}\r\n      {...props}\r\n      onClick={(e) => {\r\n        e.preventDefault();\r\n        onClick();\r\n      }}\r\n    />\r\n  );\r\n};\r\nexport default Button;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Button } from \"nystem-components\";\r\n\r\nclass ErrorManager extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.disconnectEvent = this.disconnectEvent.bind(this);\r\n    this.errorEvent = this.errorEvent.bind(this);\r\n    this.connectEvent = this.connectEvent.bind(this);\r\n    // window.onerror = this.errorEvent;\r\n    app().connection.on(\"disconnect\", this.disconnectEvent);\r\n    app().connection.on(\"connect\", this.connectEvent);\r\n    this.state = {\r\n      error: false,\r\n      offline: false,\r\n    };\r\n  }\r\n  disconnectEvent() {\r\n    this.setState({\r\n      offline: true,\r\n    });\r\n  }\r\n  connectEvent() {\r\n    if (this.state)\r\n      this.setState({\r\n        offline: false,\r\n      });\r\n  }\r\n  errorEvent(error, url, line) {\r\n    const self = this;\r\n    console.log(error);\r\n    console.log(`URL: ${url}`);\r\n    console.log(`Line Number: ${line}`);\r\n    this.setState({ error: \"An error occured. Reload?\" });\r\n    if (this.errorTimer) clearTimeout(this.errorTimer);\r\n    this.errorTimer = setTimeout(() => {\r\n      self.setState({ error: false });\r\n    }, 5000);\r\n  }\r\n  errorReload() {\r\n    window.location.reload();\r\n  }\r\n  componentWillUnmount() {\r\n    clearTimeout(this.errorTimer);\r\n    app().connection.off(\"disconnect\", this.disconnectEvent);\r\n    app().connection.off(\"connect\", this.connectEvent);\r\n  }\r\n  render() {\r\n    if (this.state.error || this.state.offline)\r\n      return (\r\n        <Button className=\"btn-danger btn\" onClick={this.errorReload}>\r\n          {this.state.error || \"Site is offline\"}\r\n        </Button>\r\n      );\r\n    return <div />;\r\n  }\r\n}\r\nexport default ErrorManager;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\n\r\nclass ErrorMsg extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { error: this.props.error };\r\n  }\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    this.setState({ error: nextProps.error });\r\n  }\r\n  render() {\r\n    const error =\r\n      this.state.error === true ? \"Required field\" : this.state.error;\r\n    const defaultType = \"danger\";\r\n    const className = [\"alert\"];\r\n    className.push(`alert-${this.props.type ? this.props.type : defaultType}`);\r\n    if (this.props.className) className.push(this.props.className);\r\n    if (error)\r\n      return (\r\n        <p\r\n          className={className.join(\" \")}\r\n          dangerouslySetInnerHTML={{ __html: app().t(error) }}\r\n        />\r\n      );\r\n    return null;\r\n  }\r\n}\r\nexport default ErrorMsg;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\n\r\nconst byType = {\r\n  text:\r\n    \"appearance-none block bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-1 px-3 shadow-sm\",\r\n  password:\r\n    \"appearance-none block bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-1 px-3 shadow-sm\",\r\n  checkbox: \"m-4\",\r\n};\r\n\r\nconst Input = ({ type, value, ...props }, parentRef) => {\r\n  const localRef = useRef(null);\r\n  const [val, setVal] = useState(value);\r\n  const ref = parentRef || localRef;\r\n\r\n  const valRef = useRef();\r\n  valRef.current = val;\r\n  useEffect(() => {\r\n    if (valRef.current === value) return;\r\n    setVal(value);\r\n  }, [value]);\r\n\r\n  useEffect(() => {\r\n    if (props.focus) ref.current.focus();\r\n  }, [props.focus, ref]);\r\n\r\n  let { className } = props;\r\n  className =\r\n    className instanceof Array\r\n      ? className\r\n          .flat(Infinity)\r\n          .filter((item) => item)\r\n          .join(\" \")\r\n      : className;\r\n\r\n  type = type || \"text\";\r\n  if (!className && [\"text\", \"password\"].includes(type))\r\n    className = \"sm:w-1/2 w-full\";\r\n\r\n  const elementProps = {\r\n    ...props,\r\n    ref,\r\n    onChange: (e) => {\r\n      setVal(e.target.value);\r\n      props.onChange(e.target.value);\r\n    },\r\n    onFocus: (ev) => {\r\n      if (props.selectAllOnFocus) ref.current.select();\r\n      if (props.onFocus) return props.onFocus(ev);\r\n    },\r\n    className: `${byType[type]} ${className}`,\r\n    type,\r\n    value: val,\r\n    focus: undefined,\r\n    renderAs: undefined,\r\n    accessibilityLabel: undefined,\r\n    accessible: undefined,\r\n    translate: undefined,\r\n    accessibilityTraits: undefined,\r\n    selectAllOnFocus: undefined,\r\n  };\r\n\r\n  Object.keys(elementProps)\r\n    .filter((key) => elementProps[key] === undefined)\r\n    .forEach((key) => {\r\n      delete elementProps[key];\r\n    });\r\n\r\n  return type === \"textarea\" ? (\r\n    <textarea {...elementProps} />\r\n  ) : (\r\n    <input {...elementProps} />\r\n  );\r\n};\r\n\r\nexport default React.forwardRef(Input);\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst InputWrapper = ({\r\n  model,\r\n  error,\r\n  className: pClassName,\r\n  children,\r\n  id,\r\n}) => {\r\n  const inputWidth = model.classNameInput;\r\n\r\n  function label() {\r\n    const classNameLabel = [...(model.classNameLabel || [])];\r\n    if (!model.floatlabel)\r\n      classNameLabel.push(\r\n        \"mr-3 font-semibold sm:w-32 min-w-32 text-right align-top mt-1\"\r\n      );\r\n\r\n    if (!model.text) return null;\r\n    const text =\r\n      typeof model.text === \"string\" ? app().t(model.text) : model.text;\r\n\r\n    return (\r\n      <Wrapper renderAs=\"label\" htmlFor={id} className={classNameLabel}>\r\n        {text}\r\n        {model.mandatory && <span className=\"text-red-800 text-sm\">*</span>}\r\n      </Wrapper>\r\n    );\r\n  }\r\n\r\n  function errorMsg() {\r\n    error = error === true ? \"Required field\" : error;\r\n\r\n    const className = [\"text-red-600 ml-3\"];\r\n    if (pClassName) className.push(pClassName);\r\n\r\n    if (error) return <p className={className.join(\" \")}>{app().t(error)}</p>;\r\n    return null;\r\n  }\r\n\r\n  const info = () =>\r\n    model.info ? (\r\n      <span className=\"help-block\">{app().t(model.info)}</span>\r\n    ) : null;\r\n\r\n  const className = pClassName || model.className || [];\r\n\r\n  if (model.nolabel)\r\n    return (\r\n      <Wrapper className={className}>\r\n        {children}\r\n        {info()}\r\n        {errorMsg()}\r\n      </Wrapper>\r\n    );\r\n\r\n  if (model.floatlabel)\r\n    return (\r\n      <Wrapper className={className}>\r\n        {label()}\r\n        <Wrapper renderAs=\"div\">\r\n          {children}\r\n          {info()}\r\n          {errorMsg()}\r\n        </Wrapper>\r\n      </Wrapper>\r\n    );\r\n\r\n  return (\r\n    <Wrapper className={[...className, \"sm:flex my-2\"]}>\r\n      {label()}\r\n      <Wrapper renderAs=\"div\" className={inputWidth || \"flex-grow\"}>\r\n        {children}\r\n        {info()}\r\n        {errorMsg()}\r\n      </Wrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default InputWrapper;\r\n","import React from \"react\";\r\n\r\nclass Label extends React.Component {\r\n  render() {\r\n    if (!this.props.model.text) return null;\r\n    if (this.props.model.mandatory)\r\n      return (\r\n        <label htmlFor=\"id_input\" className=\"col-sm-2 col-form-label\">\r\n          {this.props.model.text}\r\n          <span className=\"red\">*</span>\r\n        </label>\r\n      );\r\n    return (\r\n      <label htmlFor=\"id_input\" className=\"col-sm-2 col-form-label\">\r\n        {this.props.model.text}\r\n      </label>\r\n    );\r\n  }\r\n}\r\nexport default Label;\r\n","import React from \"react\";\r\nimport \"./loading.css\";\r\n\r\nclass Loading extends React.Component {\r\n  state = { inDelay: true };\r\n  componentDidMount() {\r\n    this.delayTimer = setTimeout(() => this.setState({ inDelay: false }), 200);\r\n  }\r\n  componentWillUnmount() {\r\n    clearTimeout(this.delayTimer);\r\n  }\r\n  render() {\r\n    const { inDelay } = this.state;\r\n    return inDelay ? null : (\r\n      <div className=\"loading m-2 rounded-lg shadow h-2\" />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Loading;\r\n","import { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\n\r\nconst UseEvent = (event, data) => {\r\n  const [result, setResult] = useState({});\r\n\r\n  useEffect(() => {\r\n    app()\r\n      .event(event, data)\r\n      .then((result) => setResult(result));\r\n  }, [data, event]);\r\n\r\n  return result;\r\n};\r\n\r\nexport default UseEvent;\r\n","import { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\n\r\nconst UseEventListner = (handler, event) => {\r\n  const [result, setResult] = useState({});\r\n  handler = handler || app();\r\n\r\n  useEffect(() => {\r\n    handler.on(event, setResult);\r\n    return () => {\r\n      handler.off(event, setResult);\r\n    };\r\n  }, [event, handler]);\r\n\r\n  return result;\r\n};\r\n\r\nexport default UseEventListner;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst ViewSmallComponentErrorMsg = ({ view, model }) => {\r\n  const [error, setError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const errorSetter = error => {\r\n      setError(error);\r\n    };\r\n    view.on(\"error\", errorSetter);\r\n\r\n    return () => {\r\n      view.off(\"error\", errorSetter);\r\n    };\r\n  });\r\n\r\n  const className = model.className ? model.className.join(\" \") : \"\";\r\n\r\n  if (error)\r\n    return (\r\n      <Wrapper className={`text-red-500 ml-32 pl-12 ${className}`}>\r\n        {app().t(error)}\r\n      </Wrapper>\r\n    );\r\n  return null;\r\n};\r\n\r\nexport default ViewSmallComponentErrorMsg;\r\n","import React from \"react\";\r\n\r\nconst tags = [\r\n  \"p\",\r\n  \"a\",\r\n  \"h1\",\r\n  \"h2\",\r\n  \"h3\",\r\n  \"h4\",\r\n  \"h5\",\r\n  \"h6\",\r\n  \"div\",\r\n  \"nav\",\r\n  \"section\",\r\n  \"span\",\r\n  \"b\",\r\n  \"em\",\r\n  \"strong\",\r\n  \"i\",\r\n  \"form\",\r\n  \"button\",\r\n  \"label\",\r\n  \"table\",\r\n  \"tbody\",\r\n  \"thead\",\r\n  \"tr\",\r\n  \"th\",\r\n  \"td\",\r\n  \"sup\",\r\n  \"main\",\r\n  \"header\",\r\n  \"select\",\r\n  \"iframe\",\r\n  \"svg\",\r\n].reduce((prev, tag) => {\r\n  prev[tag] = true;\r\n  return prev;\r\n}, {});\r\n\r\nconst Wrapper = (\r\n  {\r\n    renderAs,\r\n    className,\r\n    model,\r\n    accessibilityLabel,\r\n    accessible,\r\n    translate,\r\n    accessibilityTraits,\r\n    children,\r\n    onClick,\r\n    style,\r\n    ...props\r\n  },\r\n  ref\r\n) => {\r\n  className =\r\n    className instanceof Array\r\n      ? className\r\n          .flat(Infinity)\r\n          .filter((item) => item)\r\n          .join(\" \")\r\n      : className;\r\n\r\n  if (\r\n    !ref &&\r\n    !className &&\r\n    !renderAs &&\r\n    !onClick &&\r\n    !style &&\r\n    !Object.keys(props).length\r\n  )\r\n    return children || null;\r\n\r\n  if (!tags[renderAs] || renderAs === \"input\") renderAs = \"div\";\r\n\r\n  return React.createElement(\r\n    renderAs,\r\n    { ...props, ref, className, onClick, style },\r\n    children\r\n  );\r\n};\r\nexport default React.forwardRef(Wrapper);\r\n","import { useEffect } from \"react\";\r\nimport app from \"nystem\";\r\n\r\nconst DatabaseAddToCache = ({ options = {}, contentType, addMedia }) => {\r\n  useEffect(() => {\r\n    const doSearch = () => {\r\n      if (options.count) options.count = parseInt(options.count, 10);\r\n\r\n      app()\r\n        .database[contentType].search(options)\r\n        .then(({ data }) => {\r\n          if (!data) return;\r\n\r\n          data.forEach((item) =>\r\n            app().event(\"addToCache\", {\r\n              id: item._id,\r\n              contentType,\r\n              addReferencesToCache: options.addReferencesToCache,\r\n              addMedia,\r\n              value: item,\r\n            })\r\n          );\r\n        });\r\n    };\r\n\r\n    let timer = false;\r\n    const doSearchDebounce = () => {\r\n      clearTimeout(timer);\r\n      timer = setTimeout(() => {\r\n        timer = false;\r\n        doSearch();\r\n      }, 5000);\r\n    };\r\n\r\n    app().database[contentType].on(\"update\", -1000, doSearchDebounce);\r\n    app().on([\"login\", \"logout\"], -1000, doSearchDebounce);\r\n\r\n    return () => {\r\n      if (timer) clearTimeout(timer);\r\n\r\n      app().database[contentType].off(\"update\", doSearchDebounce);\r\n      app().off([\"login\", \"logout\"], doSearchDebounce);\r\n    };\r\n  });\r\n\r\n  return null;\r\n};\r\nexport default DatabaseAddToCache;\r\n","import { useEffect, useContext, useState } from \"react\";\r\nimport { DatabaseSearchContext } from \"nystem-components\";\r\n\r\nconst DatabaseBaseViewSearch = ({ view }) => {\r\n  const [baseFilter, setBaseFilter] = useState({});\r\n  const { search } = useContext(DatabaseSearchContext);\r\n\r\n  useEffect(() => {\r\n    const updateSearch = ({ filter }) => {\r\n      setBaseFilter(filter);\r\n    };\r\n    view.baseView.on(\"search\", -100, updateSearch);\r\n    return () => {\r\n      view.baseView.off(\"search\", updateSearch);\r\n    };\r\n  }, [view]);\r\n\r\n  useEffect(() => {\r\n    if (!search.contentType || search.filter) return;\r\n\r\n    setTimeout(() => {\r\n      view.baseView\r\n        .event(\"getSearch\")\r\n        .then(({ filter }) => setBaseFilter(filter));\r\n    }, 0);\r\n  }, [search, view]);\r\n\r\n  useEffect(() => {\r\n    if (!baseFilter) return;\r\n\r\n    const onSearch = (search) => ({ ...search, filter: baseFilter });\r\n\r\n    view.on(\"setSearch\", 10, onSearch);\r\n    view.event(\"setSearch\");\r\n    return () => {\r\n      view.off(\"setSearch\", onSearch);\r\n    };\r\n  }, [baseFilter, view]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default DatabaseBaseViewSearch;\r\n","import { useEffect, useRef } from \"react\";\r\nimport { UseSearch, RouterUseQueryStore } from \"nystem-components\";\r\n\r\nconst DatabaseFilter = ({ model, view }) => {\r\n  const [value, setValue] = RouterUseQueryStore(model.saveId);\r\n  const firstVal = useRef();\r\n  firstVal.current = firstVal.current || value;\r\n  UseSearch({ view, id: model.field, value, exact: model.exact || undefined });\r\n\r\n  const emitterByType = {\r\n    view,\r\n    baseView: view.baseView,\r\n    baseViewBaseView: view.baseView?.baseView,\r\n    baseViewBaseViewBaseView: view.baseView?.baseView?.baseView,\r\n  };\r\n  const emitter = emitterByType[model.eventType || \"baseView\"];\r\n\r\n  useEffect(() => {\r\n    if (!firstVal.current) return;\r\n    setTimeout(() => {\r\n      if (emitter.getValue(model.value) !== firstVal.current)\r\n        emitter.setValue({ path: model.value, value: firstVal.current });\r\n    }, 0);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const onChange = () => {\r\n      const val = emitter.getValue(model.value);\r\n      if (value !== val) setValue(emitter.getValue(model.value));\r\n    };\r\n\r\n    onChange();\r\n    emitter.on(\"change\", -100, onChange);\r\n    return () => {\r\n      emitter.off(\"change\", onChange);\r\n    };\r\n  }, [emitter, model.value, setValue, value]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default DatabaseFilter;\r\n","import { useEffect, useState } from \"react\";\r\nimport app from \"nystem\";\r\n\r\nconst DatabaseGet = ({ id, contentType, noAutoUpdate }) => {\r\n  const db = app().database[contentType];\r\n  const [result, setResult] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!id) {\r\n      setResult(false);\r\n      return;\r\n    }\r\n    if (!db) {\r\n      console.error({ id, contentType, noAutoUpdate });\r\n      return;\r\n    }\r\n\r\n    let first = true;\r\n\r\n    const doGet = ({ ids } = {}) => {\r\n      if (!ids || ids.includes(id))\r\n        db.get({ id }).then((result) => {\r\n          setResult({ first, ...result });\r\n          first = false;\r\n        });\r\n    };\r\n    doGet();\r\n    if (noAutoUpdate) return;\r\n\r\n    db.on(\"update\", doGet);\r\n    return () => {\r\n      db.off(\"update\", doGet);\r\n    };\r\n  }, [noAutoUpdate, contentType, db, id]);\r\n\r\n  return { loading: id && !result, ...result };\r\n};\r\nexport default DatabaseGet;\r\n","import React, { useContext } from \"react\";\r\nimport { ContentTypeRender, DatabaseSearchContext } from \"nystem-components\";\r\n\r\nconst DatabaseMissing = ({ model, path }) => {\r\n  const { search } = useContext(DatabaseSearchContext);\r\n\r\n  if (!search.data) return <ContentTypeRender path={path} items={model.item} />;\r\n  return null;\r\n};\r\nexport default DatabaseMissing;\r\n","import { useState, useEffect, useCallback } from \"react\";\r\nimport app from \"nystem\";\r\n\r\nconst DatabaseOneSearch = ({ noAutoUpdate, contentType, search: inSearch }) => {\r\n  const db = app().database[contentType];\r\n  const searchString = JSON.stringify(inSearch);\r\n\r\n  const [search, setSearchState] = useState(inSearch);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const setSearch = useCallback(\r\n    (search, loading) => {\r\n      if (loading) setLoading(true);\r\n\r\n      db.search({ ...search, data: undefined }).then((search) => {\r\n        setSearchState(search);\r\n        if (loading) setLoading(false);\r\n      });\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [db, searchString]\r\n  );\r\n\r\n  useEffect(() => {\r\n    setSearch(inSearch, true);\r\n    if (!noAutoUpdate) db.on(\"update\", () => setSearch(search));\r\n    return () => {\r\n      if (!noAutoUpdate) db.off(\"update\", setSearch);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [noAutoUpdate, db, setSearch]);\r\n\r\n  return { loading, search, setSearch };\r\n};\r\n\r\nexport default DatabaseOneSearch;\r\n","import { useEffect } from \"react\";\r\nimport app from \"nystem\";\r\n\r\nconst DatabaseSearch = ({ view, model, path, children }) => {\r\n  const { exact, count, subView, filter } = model;\r\n\r\n  let { sortby } = model;\r\n\r\n  useEffect(() => {\r\n    const reverse = [\r\n      model.reversesortby,\r\n      model.reversesortby2,\r\n      model.reversesortby3,\r\n    ];\r\n\r\n    const getFilter = () => {\r\n      const searchFilter = { $and: [] };\r\n      if (!filter) return searchFilter;\r\n\r\n      const insertVal = (val) =>\r\n        val.replace(/\\{([a-z_.0-9]+)\\}/gim, (str, p1) => {\r\n          let val = \"\";\r\n          if (p1 === \"_language\") val = app().settings.lang;\r\n          else if (p1 === \"id\") val = view.id;\r\n          else if (p1.indexOf(\"params.\") === 0)\r\n            val = view.params[p1.replace(\"params.\", \"\")];\r\n          else if (p1.indexOf(\"baseView.\") !== 0)\r\n            val = view.getValue(p1.replace(\"..\", path));\r\n          else {\r\n            p1 = p1.replace(\"baseView.\", \"\");\r\n            val = view.baseView.getValue(p1.replace(\"..\", path));\r\n          }\r\n          if (val instanceof Array) val = val.join(\"|\");\r\n          return val || \"\";\r\n        });\r\n\r\n      filter.forEach((ofilter) => {\r\n        const oneFilter = {};\r\n\r\n        ofilter.and.forEach((oneFilterIn) => {\r\n          oneFilter[insertVal(oneFilterIn[0])] = insertVal(oneFilterIn[1]);\r\n        });\r\n\r\n        if (ofilter.exact) oneFilter.__exact = true;\r\n\r\n        if (\r\n          !ofilter.removeifempty ||\r\n          Object.values(oneFilter).find((val) => val)\r\n        )\r\n          searchFilter.$and.push(oneFilter);\r\n      });\r\n\r\n      return searchFilter;\r\n    };\r\n\r\n    const { contentType } = view;\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    sortby = sortby instanceof Array ? sortby : sortby && [sortby];\r\n\r\n    const options = {\r\n      position: 0,\r\n      exact,\r\n      sortby: sortby && sortby.map((item) => item.id),\r\n      reverse,\r\n      contentType,\r\n      delay: model.button ? -1 : parseInt(model.delay, 10),\r\n      noAutoUpdate: model.noAutoUpdate,\r\n    };\r\n\r\n    if (count) options.count = parseInt(count, 10);\r\n    if (view.id && subView) options.database = view.id;\r\n\r\n    let searchFilter = getFilter();\r\n    const onChange = () => {\r\n      const before = JSON.stringify(searchFilter);\r\n      searchFilter = getFilter();\r\n\r\n      if (before !== JSON.stringify(searchFilter)) view.event(\"setSearch\");\r\n    };\r\n\r\n    const onSearch = () => ({ ...options, filter: getFilter() });\r\n    view.on(\"setSearch\", 1000, onSearch);\r\n    view.on(\"change\", -1000, onChange);\r\n\r\n    setTimeout(() => {\r\n      view.event(\"setSearch\", options);\r\n    }, 0);\r\n    return () => {\r\n      view.off(\"setSearch\", onSearch);\r\n      view.off(\"change\", -10, onChange);\r\n    };\r\n  }, [count, exact, path, sortby, subView, view]);\r\n\r\n  return children || null;\r\n};\r\n\r\nexport default DatabaseSearch;\r\n","import React from \"react\";\r\n\r\nconst DatabaseSearchContext = React.createContext();\r\n\r\nexport default DatabaseSearchContext;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport SearchContext from \"./searchContext\";\r\n\r\nconst DatabaseSearchContextProvider = ({ children, view }) => {\r\n  const [search, setSearchState] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const { contentType } = view;\r\n    let search = {};\r\n    let timer = false;\r\n    let active = false;\r\n    let mounted = true;\r\n\r\n    const setSearchDebounce = async (newSearch) => {\r\n      if (!mounted) return;\r\n      if (!active) {\r\n        setLoading(true);\r\n        view.on(\"search\", 200, doSearch);\r\n        if (!newSearch.noAutoUpdate)\r\n          app().database[contentType].on(\"update\", -1000, setSearch);\r\n        app().on([\"login\", \"logout\"], -1000, setSearch);\r\n        active = true;\r\n      }\r\n      if (newSearch) search = { ...newSearch, isDirty: true };\r\n      if (!timer && search.delay !== -1)\r\n        timer = setTimeout(() => setSearch(), 0);\r\n    };\r\n\r\n    const setSearch = async () => {\r\n      if (!mounted) return;\r\n      timer = false;\r\n\r\n      const searchResult = await view.event(\"search\", {\r\n        ...search,\r\n        data: undefined,\r\n      });\r\n      setSearchState({ ...searchResult, isDirty: false });\r\n\r\n      setLoading(false);\r\n      return searchResult;\r\n    };\r\n\r\n    const getSearch = () => search;\r\n    view.on(\"getSearch\", getSearch);\r\n\r\n    view.on(\"setSearch\", -500, setSearchDebounce);\r\n\r\n    const doSearch = (search) =>\r\n      app().database[contentType].search({\r\n        ...search,\r\n        data: undefined,\r\n      });\r\n\r\n    return () => {\r\n      mounted = false;\r\n      view.off(\"setSearch\", setSearchDebounce);\r\n\r\n      if (active) {\r\n        view.off(\"search\", doSearch);\r\n        app().database[contentType].off(\"update\", setSearch);\r\n        app().off([\"login\", \"logout\"], setSearch);\r\n      }\r\n      view.off(\"getSearch\", getSearch);\r\n    };\r\n  }, [view]);\r\n\r\n  return (\r\n    <SearchContext.Provider value={{ loading, search }}>\r\n      {children}\r\n    </SearchContext.Provider>\r\n  );\r\n};\r\nexport default DatabaseSearchContextProvider;\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { Button, DatabaseSearchContext } from \"nystem-components\";\r\n\r\nconst DatabaseShowMoreButton = ({ model, view }) => {\r\n  const { search } = useContext(DatabaseSearchContext);\r\n  const [count, setCount] = useState();\r\n\r\n  useEffect(() => {\r\n    if (!count) return;\r\n\r\n    const onSearch = (search) => ({ ...search, count });\r\n    view.on(\"setSearch\", onSearch);\r\n    view.event(\"setSearch\");\r\n    return () => {\r\n      view.off(\"setSearch\", onSearch);\r\n    };\r\n  }, [count, view]);\r\n\r\n  if (search.count > search.searchTotal) return null;\r\n\r\n  return (\r\n    <Button\r\n      className={model.className}\r\n      type=\"lsdkfh\"\r\n      onClick={() => {\r\n        setCount((count || search.count || 0) + parseInt(model.amount, 10));\r\n      }}\r\n    >\r\n      {model.text}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default DatabaseShowMoreButton;\r\n","import React, { useContext } from \"react\";\r\nimport { ContentTypeRender, DatabaseSearchContext } from \"nystem-components\";\r\n\r\nconst DatabaseView = ({ model, path }) => {\r\n  const { search } = useContext(DatabaseSearchContext);\r\n\r\n  if (search.data) return <ContentTypeRender path={path} items={model.item} />;\r\n  return null;\r\n};\r\nexport default DatabaseView;\r\n","import { useRef, useEffect } from \"react\";\r\n\r\nconst UseSearch = ({ view, id, value, exact = false }) => {\r\n  const last = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (!value && !last.current) return;\r\n\r\n    const setSearch = (query) => {\r\n      query.filter = query.filter || {};\r\n      query.filter.$and = query.filter.$and || [];\r\n      const search = exact ? { [id]: value, __exact: true } : { [id]: value };\r\n      query.filter.$and.push(search);\r\n    };\r\n    if (value) view.on(\"setSearch\", setSearch);\r\n    view.event(\"setSearch\");\r\n\r\n    last.current = value;\r\n    return () => {\r\n      if (value) view.off(\"setSearch\", setSearch);\r\n    };\r\n  }, [exact, id, value, view]);\r\n};\r\nexport default UseSearch;\r\n","import React from \"react\";\r\nimport { DateInput } from \"nystem-components\";\r\n\r\nclass DateExposedField extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    this.props.view.searchProp.onUpdate(this.update);\r\n    this.classNameBase = this.model.className ? this.model.className : [];\r\n    this.updateCounter = 0;\r\n  }\r\n  update() {\r\n    if (this.id) {\r\n      const state = {};\r\n      const modelId = this.model.id;\r\n\r\n      state.from = this.props.view.searchProp.filter.get(`${this.id}_from`);\r\n      if (typeof state.from !== \"undefined\" && state.from[modelId])\r\n        state.from = state.from[modelId].substring(1);\r\n      else delete state.from;\r\n\r\n      state.to = this.props.view.searchProp.filter.get(`${this.id}_to`);\r\n      if (typeof state.to !== \"undefined\" && state.to[modelId])\r\n        state.to = state.to[modelId].substring(1);\r\n      else delete state.to;\r\n      if (typeof state.from !== \"undefined\" || typeof state.to !== \"undefined\")\r\n        this.setState(state);\r\n    }\r\n    const self = this;\r\n    if (this.updateCounter > 0) this.updateCounter--;\r\n    if (this.state.className === \"\" || this.updateCounter > 0) return;\r\n    this.setState({\r\n      className: \"has-success\",\r\n    });\r\n    this.delayTimer = setTimeout(() => {\r\n      if (self.isMounted())\r\n        self.setState({\r\n          className: \"\",\r\n        });\r\n    }, 1000);\r\n  }\r\n  search(id, value) {\r\n    const self = this;\r\n    clearTimeout(this.delayTimer);\r\n    const state = {\r\n      className: \"has-warning\",\r\n    };\r\n    state[id] = value;\r\n    this.setState(state);\r\n    this.delayTimer = setTimeout(() => {\r\n      self.updateCounter++;\r\n      if (value)\r\n        if (id === \"to\") value = `<${value}`;\r\n        else value = `>${value}`;\r\n      self.props.view.searchProp.filter.add(\r\n        self.model.id,\r\n        value,\r\n        `${self.id}_${id}`\r\n      );\r\n    }, 200);\r\n  }\r\n  componentDidMount() {}\r\n  componentWillUnmount() {\r\n    this.props.view.searchProp.offUpdate(this.update);\r\n    clearTimeout(this.delayTimer);\r\n  }\r\n  render() {\r\n    const { model } = this.props;\r\n    const className =\r\n      model.className && !this.props.wrapper ? model.className.join(\" \") : \"\";\r\n    const modelFrom = {\r\n      id: \"from\",\r\n      placeholder: \"From\",\r\n      clearButton: true,\r\n    };\r\n    const modelTo = {\r\n      id: \"to\",\r\n      placeholder: \"To\",\r\n      clearButton: true,\r\n    };\r\n    const style = {\r\n      width: \"150px\",\r\n    };\r\n    return (\r\n      <div className={`${className} form-inline`}>\r\n        {this.model.text}\r\n        <DateInput\r\n          style={style}\r\n          model={modelFrom}\r\n          value={this.state.from}\r\n          setValue={this.search}\r\n        />\r\n        {\" - \"}\r\n        <DateInput\r\n          style={style}\r\n          model={modelTo}\r\n          value={this.state.to}\r\n          setValue={this.search}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default DateExposedField;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  InputWrapper,\r\n  SelectInput,\r\n  UseSearch,\r\n  RouterUseQueryStore,\r\n} from \"nystem-components\";\r\n\r\nconst modelYear = {\r\n  id: \"year\",\r\n  option: [1200],\r\n  render: \"button\",\r\n  limit: 1,\r\n  text: \"Year\",\r\n};\r\n\r\nconst months = Array.from({ length: 12 }, (e, i) =>\r\n  new Date(null, i + 1, null).toLocaleDateString(\"en\", {\r\n    month: \"short\",\r\n  })\r\n);\r\nconst modelMonth = {\r\n  id: \"month\",\r\n  option: months,\r\n  render: \"button\",\r\n  limit: 1,\r\n  text: \"Month\",\r\n};\r\n\r\nconst modelDay = {\r\n  id: \"day\",\r\n  option: [],\r\n  render: \"button\",\r\n  limit: 1,\r\n  text: \"Day\",\r\n};\r\n\r\nconst daysInMonth = (year, month) => new Date(year, month, 0).getDate();\r\nconst getArray = (from, to) =>\r\n  Array.from({ length: to - from }, (e, i) => parseInt(from, 10) + i);\r\n\r\nconst getDate = ({ utc, year, month = 0, day = 1 }) =>\r\n  utc ? Date.UTC(year, month, day) : new Date(year, month, day).getTime();\r\n\r\nconst addUTC = {\r\n  getFullYear: \"getUTCFullYear\",\r\n  getMonth: \"getUTCMonth\",\r\n  getDate: \"getUTCDate\",\r\n};\r\n\r\nconst getByType = (utc, val, func) =>\r\n  val ? new Date(val)[utc ? addUTC[func] : func]() : undefined;\r\n\r\nconst DateExposedYearMonth = ({ model, view }) => {\r\n  const [years] = useState(getArray(model.from, model.to));\r\n  const [from, setFrom] = RouterUseQueryStore(model.saveIdFrom, \"int\");\r\n  const [to, setTo] = RouterUseQueryStore(model.saveIdTo, \"int\");\r\n  UseSearch({ view, id: model.id, value: from && `>${from - 1}` });\r\n  UseSearch({ view, id: model.id, value: to && `<${to + 1}` });\r\n\r\n  const { utc } = model;\r\n\r\n  const year = getByType(utc, from, \"getFullYear\");\r\n\r\n  const fromMonth = getByType(utc, from, \"getMonth\");\r\n  const toMonth = getByType(utc, to, \"getMonth\");\r\n  const month = fromMonth === toMonth ? months[fromMonth] : null;\r\n\r\n  const fromDay = getByType(utc, from, \"getDate\");\r\n  const toDay = getByType(utc, to, \"getDate\");\r\n  const day = fromDay === toDay ? toDay : null;\r\n\r\n  const setYear = (year) => {\r\n    setFrom(year && getDate({ utc, year }));\r\n    setTo(year && getDate({ utc, year: year + 1 }) - 1);\r\n  };\r\n\r\n  const setMonth = (value) => {\r\n    if (!value) setYear(year);\r\n    else {\r\n      const month = months.indexOf(value);\r\n      setFrom(getDate({ utc, year, month }));\r\n      setTo(getDate({ utc, year, month: month + 1 }) - 1);\r\n    }\r\n  };\r\n\r\n  const setDay = (day) => {\r\n    const month = fromMonth;\r\n    if (!day) setMonth(months[month]);\r\n    else {\r\n      setFrom(getDate({ utc, year, month, day }));\r\n      setTo(getDate({ utc, year, month, day: day + 1 }) - 1);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <InputWrapper model={model}>\r\n      <SelectInput\r\n        model={{\r\n          ...modelYear,\r\n          classNameInput: \"yearExposedField\",\r\n          option: years,\r\n        }}\r\n        value={year}\r\n        setValue={setYear}\r\n      />\r\n      {year && model.month && (\r\n        <SelectInput model={modelMonth} value={month} setValue={setMonth} />\r\n      )}\r\n      {month && model.day && (\r\n        <SelectInput\r\n          model={{\r\n            ...modelDay,\r\n            option: getArray(1, daysInMonth(year, fromMonth) + 1),\r\n            classNameInput: \"dayExposedField\",\r\n          }}\r\n          value={day}\r\n          setValue={setDay}\r\n        />\r\n      )}\r\n    </InputWrapper>\r\n  );\r\n};\r\n\r\nexport default DateExposedYearMonth;\r\n","export default ({ value, model }) =>\r\n  model.mandatory && !value && (model.text_mandatory || \"Field is mandatory\");\r\n","import React from \"react\";\r\nimport {\r\n  InputWrapper,\r\n  DateInputDate,\r\n  UseValidator,\r\n  Wrapper,\r\n  DateInputTime,\r\n} from \"nystem-components\";\r\nimport validate from \"./validate\";\r\n\r\nconst DateInput = ({ model, view, setValue, value }) => {\r\n  const { dateType = [\"date\", \"time\"] } = model;\r\n  const [error, setValidated] = UseValidator({ view, validate, value, model });\r\n  const validateAndSet = (value) => {\r\n    setValue(value);\r\n    setValidated(true);\r\n  };\r\n\r\n  return (\r\n    <InputWrapper model={model} error={error}>\r\n      <Wrapper className=\"flex\">\r\n        {dateType.includes(\"date\") && (\r\n          <DateInputDate\r\n            model={model}\r\n            value={value}\r\n            setValue={validateAndSet}\r\n          />\r\n        )}\r\n        {dateType.includes(\"time\") && (\r\n          <DateInputTime\r\n            model={model}\r\n            value={value}\r\n            setValue={validateAndSet}\r\n          />\r\n        )}\r\n      </Wrapper>\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default DateInput;\r\n","import React, { useEffect, useRef, useCallback, useState } from \"react\";\r\nimport { Icon, Wrapper } from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport moment from \"my-moment\";\r\n\r\nconst ClearButton = ({ setValue }) => (\r\n  <Icon\r\n    onClick={() => setValue(\"\")}\r\n    className=\"absolute w-4 right-0 top-0 m-3\"\r\n    icon=\"close\"\r\n    aria-hidden=\"true\"\r\n  />\r\n);\r\n\r\nconst dateFormat = \"YYYY-MM-DD\";\r\n\r\nconst DateInputDate = ({ model, focus, setValue, value }) => {\r\n  const [inputVal, setInputVal] = useState(\r\n    value ? moment(value).format(dateFormat) : \"\"\r\n  );\r\n  const { disabled, length, text } = model;\r\n\r\n  const inputEl = useRef(null);\r\n\r\n  const setFromPicker = useCallback(\r\n    function () {\r\n      const formVal = this.getMoment().format(dateFormat);\r\n      setValue(moment(formVal).valueOf());\r\n    },\r\n    [setValue]\r\n  );\r\n\r\n  useEffect(() => {\r\n    setInputVal(value ? moment(value).format(dateFormat) : \"\");\r\n  }, [value]);\r\n\r\n  useEffect(() => {\r\n    const start = async () => {\r\n      const { pikaday } = await import(\"../../client/pikaday\");\r\n      pikaday({\r\n        field: inputEl.current,\r\n        format: dateFormat,\r\n        onSelect: setFromPicker,\r\n        firstDay: 1,\r\n      });\r\n    };\r\n    start();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <Wrapper className=\"relative w-1/3\">\r\n      <input\r\n        ref={inputEl}\r\n        placeholder={app().t(text)}\r\n        className={\r\n          \"appearance-none block bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-2 px-3 w-full\"\r\n        }\r\n        value={inputVal}\r\n        maxLength={length}\r\n        onChange={(e) => setInputVal(e.target.value)}\r\n        disabled={disabled}\r\n        type=\"text\"\r\n        focus={focus}\r\n        onBlur={() => setValue(moment(inputVal).valueOf())}\r\n      />\r\n      {value ? <ClearButton setValue={setValue} /> : null}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default DateInputDate;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Wrapper, Input } from \"nystem-components\";\r\nimport app from \"nystem\";\r\nimport moment from \"my-moment\";\r\n\r\nconst parseVal = (val) => {\r\n  if (val > 100) val /= 100;\r\n\r\n  const parts = val\r\n    .toString()\r\n    .split(/[^0-9]/)\r\n    .filter((part) => part);\r\n\r\n  const min = parseFloat(`.${parts[1] || 0}`) * 100;\r\n  return `${parts[0]}:${min < 10 ? `0${min}` : min}`;\r\n};\r\n\r\nconst DateInputTime = ({ model, focus, setValue, value }) => {\r\n  const { disabled, length, inputClassName = [] } = model;\r\n  const [inputVal, setInputVal] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setInputVal(value ? moment(value).format(\"HH:mm\") : \"\");\r\n  }, [value]);\r\n\r\n  return (\r\n    <Wrapper className=\"flex\">\r\n      <Input\r\n        placeholder={app().t(\"Time\")}\r\n        className={[\"w-40\", inputClassName]}\r\n        value={inputVal}\r\n        maxLength={length}\r\n        onChange={(value) => setInputVal(value)}\r\n        disabled={disabled}\r\n        type=\"text\"\r\n        focus={focus}\r\n        onBlur={() => {\r\n          if (!inputVal) return;\r\n          const datePart = moment(value || Date.now()).format(\"YYYY-MM-DD\");\r\n          setValue(moment(`${datePart} ${parseVal(inputVal)}`).valueOf());\r\n        }}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default DateInputTime;\r\n","import { TextSortBy } from \"nystem-components\";\r\nimport React from \"react\";\r\n\r\nconst DateSortBy = props => <TextSortBy {...props} />;\r\nexport default DateSortBy;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport moment from \"my-moment\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst dateTimeFormats = {\r\n  year: \"YYYY\",\r\n  dateLong: \"YYYY-MM-DD\",\r\n  timeLong: \"H:mm\",\r\n  dateTimeLong: \"YYYY-MM-DD HH:mm\",\r\n  dateTimeNoYear: \"D/M H:mm\",\r\n  dateTimeNoYearDay: \"ddd D/M H:mm\",\r\n  dateNoYearDay: \"ddd D/M\",\r\n  timeDay: \"ddd D/M H:mm\",\r\n  day: \"dddd\",\r\n};\r\n\r\nconst hourInMs = 1000 * 60 * 60;\r\n\r\nconst DateView = ({ model, value }) => {\r\n  const { className, renderAs, dateFormat } = model;\r\n  const format = dateTimeFormats[dateFormat]\r\n    ? dateTimeFormats[dateFormat]\r\n    : dateFormat || dateTimeFormats.dateTimeLong;\r\n\r\n  value = parseInt(value, 10);\r\n  let rel = value && model.relative && value + hourInMs * 24 - Date.now();\r\n  rel = !rel || rel < 0 ? 0 : rel;\r\n  if (rel && moment().startOf(\"day\").valueOf() > value) rel = 0;\r\n\r\n  const formatDate = useCallback(\r\n    () => (rel ? moment(value).format(\"H:mm\") : moment(value).format(format)),\r\n    [format, rel, value]\r\n  );\r\n  const [result, setResult] = useState(formatDate());\r\n\r\n  useEffect(() => {\r\n    if (!rel) return;\r\n\r\n    const update = () => setResult(formatDate());\r\n    const timer = setInterval(update, 30000);\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, [formatDate, rel]);\r\n\r\n  return (\r\n    <Wrapper renderAs={renderAs} className={className}>\r\n      {app().t(value ? result : \"\")}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default DateView;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\n\r\nconst add = (path) => {\r\n  if (/^https?:/im.test(path)) return path;\r\n\r\n  const { domain, secure } = app().settings;\r\n  return `http${secure ? \"s\" : \"\"}://${domain}${path}`;\r\n};\r\n\r\nconst Image = ({ className, alt, src, ...props }) => (\r\n  <img\r\n    alt={alt}\r\n    {...props}\r\n    className={\r\n      className instanceof Array\r\n        ? className\r\n            .flat(Infinity)\r\n            .filter((item) => item)\r\n            .join(\" \")\r\n        : className\r\n    }\r\n    src={add(src)}\r\n  />\r\n);\r\n\r\nexport default Image;\r\n","import React from \"react\";\r\nimport { Image } from \"nystem-components\";\r\n\r\nconst ViewImageView = ({ model }) => (\r\n  <Image\r\n    alt=\"logo\"\r\n    className={model.className}\r\n    width={model.width}\r\n    height={model.height}\r\n    src={model.fullPath ? model.filename : `/image/${model.filename}`}\r\n  />\r\n);\r\nexport default ViewImageView;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { InputWrapper, Input } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nlet isInstalled =\r\n  navigator.standalone || matchMedia(\"(display-mode: standalone)\").matches;\r\n\r\nconst ServiceWorkerSelectBox = ({ model, view }) => {\r\n  const [install, setInstall] = useState(false);\r\n  const [id] = useState(app().uuid);\r\n\r\n  useEffect(() => {\r\n    if (!install) return;\r\n    app()\r\n      .event(\"canRunAppInstall\")\r\n      .then(({ installable }) => {\r\n        isInstalled = isInstalled || !installable;\r\n      });\r\n\r\n    const runInstall = () => app().event(\"runAppInstall\");\r\n\r\n    view.on([\"save\"], runInstall);\r\n    app().on([\"login\"], runInstall);\r\n    return () => {\r\n      view.off([\"save\"], runInstall);\r\n\r\n      setTimeout(() => {\r\n        app().off([\"login\"], runInstall);\r\n      }, 200);\r\n    };\r\n  }, [install, view]);\r\n\r\n  return isInstalled ? null : (\r\n    <InputWrapper id={id} model={model} error={false}>\r\n      <Input\r\n        id={id}\r\n        className={model.classNameInput}\r\n        checked={install}\r\n        onChange={() => setInstall(!install)}\r\n        disabled={model.disabled}\r\n        type=\"checkbox\"\r\n      />\r\n    </InputWrapper>\r\n  );\r\n};\r\n\r\nexport default ServiceWorkerSelectBox;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Button } from \"nystem-components\";\r\n\r\nconst isInstalled =\r\n  navigator.standalone || matchMedia(\"(display-mode: standalone)\").matches;\r\n\r\nconst ServiceWorkerView = ({ model }) =>\r\n  isInstalled ? null : (\r\n    <div className={model.className}>\r\n      <Button type={model.btnType} onClick={() => app().event(\"runAppInstall\")}>\r\n        {app().t(model.text || \"...\")}\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\nexport default ServiceWorkerView;\r\n\r\nif (navigator.standalone) {\r\n  console.log(\"Launched: Installed (iOS)\");\r\n} else if (matchMedia(\"(display-mode: standalone)\").matches) {\r\n  console.log(\"Launched: Installed\");\r\n} else {\r\n  console.log(\"Launched: Browser Tab\");\r\n}\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Button, Wrapper, UseEvent } from \"nystem-components\";\r\n\r\nconst ViewButtonDebugAndClear = ({ model }) => {\r\n  const { appVersion } = UseEvent(\"getAppVersion\");\r\n  return (\r\n    <Wrapper className={model.className}>\r\n      <Wrapper className=\"mb-2\">App version: {appVersion || \"\"}</Wrapper>\r\n      <Wrapper className=\"mb-2\">\r\n        The button below will require you to log in again.\r\n      </Wrapper>\r\n      <Button\r\n        type={model.btnType}\r\n        onClick={() => app().event(\"clearCacheAndReload\")}\r\n      >\r\n        {app().t(model.text || \"...\")}\r\n      </Button>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default ViewButtonDebugAndClear;\r\n","import { useEffect } from \"react\";\r\nimport app from \"nystem\";\r\n\r\nconst findByType = {\r\n  description: 'meta[name=\"description\"]',\r\n  \"og:title\": 'meta[property=\"og:title\"]',\r\n  \"og:description\": 'meta[property=\"og:description\"]',\r\n  \"og:url\": 'meta[property=\"og:url\"]',\r\n  \"og:image\": 'meta[property=\"og:image\"]',\r\n};\r\n\r\nconst getValue = (field) => {\r\n  const obj = document.querySelector(findByType[field]);\r\n  return obj ? obj.getAttribute(\"content\") : \"\";\r\n};\r\nconst setValue = (field, value) => {\r\n  let obj = document.querySelector(findByType[field]);\r\n\r\n  if (!obj) {\r\n    const head = document.getElementsByTagName(\"head\")[0];\r\n    obj = document.createElement(\"meta\");\r\n    obj.setAttribute(\"property\", field);\r\n    head.appendChild(obj);\r\n  }\r\n\r\n  obj.setAttribute(\"content\", value);\r\n};\r\n\r\nconst ViewTextPageMeta = ({ model, view, path }) => {\r\n  useEffect(() => {\r\n    const insertVal = (val) => {\r\n      if (!val) return val;\r\n\r\n      return val.replace(/\\{([a-z0-9_.]+)\\}/gim, (str, p1) => {\r\n        if (p1 === \"_language\") return app().settings.lang;\r\n        if (p1 === \"location.href\") return window.location.href;\r\n        if (p1 === \"location.origin\") return window.location.origin;\r\n        if (p1 === \"id\") return view.id;\r\n        return view.getValue(p1.replace(\"..\", path)) || \"{{}}\";\r\n      });\r\n    };\r\n\r\n    const fieldValue = insertVal(model.fieldFormat);\r\n\r\n    if (!fieldValue || fieldValue.indexOf(\"{{}}\") !== -1) return;\r\n\r\n    let oldValue;\r\n    if (model.field === \"title\") {\r\n      oldValue = document.title;\r\n      document.title = fieldValue;\r\n    } else {\r\n      oldValue = getValue(model.field);\r\n\r\n      setValue(model.field, fieldValue);\r\n    }\r\n\r\n    return () => {\r\n      if (model.field === \"title\") document.title = oldValue;\r\n      else setValue(model.field, oldValue);\r\n    };\r\n  }, [model, path, view]);\r\n\r\n  return null;\r\n};\r\nexport default ViewTextPageMeta;\r\n\r\n// {location.origin}/image/{content.0.image.0.id}.{content.0.image.0.ext}\r\n","import { ContentTypeView } from \"nystem-components\";\r\nimport { Route } from \"react-router-dom\";\r\nimport React from \"react\";\r\n\r\nconst Inserter = (props) => {\r\n  const { match, className, children, source, exclude } = props;\r\n  const exact = !(match && match.indexOf(\"*\") === match.length - 1);\r\n  const propMatch = exact ? match : match.substring(0, match.length - 1);\r\n\r\n  return (\r\n    <Route\r\n      className={children instanceof Array && className}\r\n      path={match || source}\r\n      exact={exact}\r\n    >\r\n      {({ location, match }) => {\r\n        if (!match || exclude === location.pathname) return null;\r\n\r\n        if (children)\r\n          return children instanceof Array && children.length ? (\r\n            <div className={className}>{children}</div>\r\n          ) : (\r\n            children\r\n          );\r\n\r\n        let path = location.pathname;\r\n        if (source && (exact || source.indexOf(\"*\") === -1)) path = source;\r\n        else if (propMatch && source) {\r\n          const replace = propMatch.replace(source, \"\");\r\n          path =\r\n            source.substring(0, source.length - 1) + path.replace(replace, \"\");\r\n        }\r\n\r\n        path = path.split(\"/\");\r\n\r\n        return (\r\n          <ContentTypeView\r\n            key={path.join(\"-\")}\r\n            className={className}\r\n            contentType={path[1]}\r\n            format={path[2]}\r\n            id={path[3]}\r\n            params={location.pathname.split(\"/\").slice(1)}\r\n            noForm={props.noForm}\r\n          />\r\n        );\r\n      }}\r\n    </Route>\r\n  );\r\n};\r\nexport default Inserter;\r\n","import React from \"react\";\r\n\r\nimport { Route, Link as RLink } from \"react-router-dom\";\r\n\r\nconst toClassString = (className, match) => {\r\n  className = className instanceof Array ? className.join(\" \") : className;\r\n  return match ? `${className} active` : className;\r\n};\r\n\r\nconst Link = ({ to, className, match, children, exact }) => (\r\n  <Route\r\n    exact={Boolean(exact)}\r\n    path={match || (typeof to === \"object\" ? to.pathname : to)}\r\n  >\r\n    {({ match }) => (\r\n      <RLink to={to || \"/\"} className={toClassString(className, match)}>\r\n        {children}\r\n      </RLink>\r\n    )}\r\n  </Route>\r\n);\r\nexport default Link;\r\n","const RouterBackHandler = () => null;\r\nexport default RouterBackHandler;\r\n","import { withRouter } from \"react-router\";\r\nimport app from \"nystem\";\r\n\r\nlet history = [];\r\nlet at = 0;\r\n\r\nconst RouterHistory = ({ location, history: routerHistory }) => {\r\n  let atNew =\r\n    history.reduce(\r\n      (found, item, index) => found || (location.key === item.key && index + 1),\r\n      false\r\n    ) || history.length + 1;\r\n\r\n  if (atNew === history.length + 1) {\r\n    history = history.slice(0, at);\r\n    atNew = history.length + 1;\r\n  }\r\n\r\n  if (atNew === history.length + 1) history.push(location);\r\n\r\n  at = atNew;\r\n  app().routerHistory = { history, at, routerHistory };\r\n\r\n  return null;\r\n};\r\n\r\nexport default withRouter(RouterHistory);\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { ContentTypeRender } from \"nystem-components\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nconst exclude = [\"style\"].map((item) => item.toUpperCase());\r\n\r\nconst RouterPageNotFound = ({ model, path, children, location, ...rest }) => {\r\n  const { className, renderAs, item } = model || rest;\r\n  const [is404, setIs404] = useState(false);\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    setIs404(false);\r\n    setTimeout(() => {\r\n      const items = [...ref.current.parentElement.children]\r\n        .map((item) => item.nodeName)\r\n        .filter((name) => !exclude.includes(name));\r\n\r\n      if (items.length < 2) setIs404(true);\r\n    }, 200);\r\n  }, [location.pathname, ref, setIs404]);\r\n\r\n  if (!is404) return <div ref={ref} />;\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      className={className && className.join(\" \")}\r\n      renderAs={renderAs}\r\n    >\r\n      {children || <ContentTypeRender path={path} items={item} />}\r\n    </div>\r\n  );\r\n};\r\nexport default withRouter(RouterPageNotFound);\r\n","import { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst RouterRedirect = ({ to, model = {}, view, path }) => {\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const insertVal = (val) =>\r\n      val &&\r\n      val.replace(/\\{([a-z_.0-9]+)\\}/gim, (str, p1) => {\r\n        if (/pathItem[0-9]/.test(p1) && view.params) return view.params[p1[8]];\r\n        return view.getValue(p1.replace(\"..\", path));\r\n      });\r\n\r\n    history.replace(insertVal(model.to || to));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return null;\r\n};\r\n\r\nexport default RouterRedirect;\r\n","import { useEffect } from \"react\";\r\n\r\nconst positions = {};\r\nlet count = 0;\r\n\r\nconst setPos = () => {\r\n  if (\r\n    document.documentElement.scrollTop === positions[window.location.pathname]\r\n  )\r\n    return;\r\n\r\n  count++;\r\n  if (count === 5) {\r\n    count = 0;\r\n    return;\r\n  }\r\n\r\n  document.documentElement.scrollTop = positions[window.location.pathname];\r\n  setTimeout(setPos, 120);\r\n};\r\n\r\nconst RouterScrollpos = () => {\r\n  useEffect(() => {\r\n    window.addEventListener(\r\n      \"popstate\",\r\n      () => positions[window.location.pathname] && setTimeout(setPos, 120)\r\n    );\r\n\r\n    window.addEventListener(\"scroll\", () => {\r\n      positions[window.location.pathname] = document.documentElement.scrollTop;\r\n    });\r\n  }, []);\r\n\r\n  return null;\r\n};\r\n\r\nexport default RouterScrollpos;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass RouterState extends React.Component {\r\n  getPath = (context) => {\r\n    return context.router.history.location.pathname;\r\n  };\r\n  componentDidMount() {\r\n    let pathname = this.getPath(this.context);\r\n    console.log(\"pathname\", pathname);\r\n    if (this.props.save === \"storage\")\r\n      app()\r\n        .storage.getItem({ id: \"router.pathname\" })\r\n        .then(({ value }) => {\r\n          if (value && value !== pathname)\r\n            this.context.router.history.replace(value);\r\n          else if (this.props.start && pathname === \"/\")\r\n            this.context.router.history.replace(this.props.start);\r\n        });\r\n    else if (this.props.save === \"memory\" && app().pathname) {\r\n      if (app().pathname !== pathname)\r\n        this.context.router.history.replace(app().pathname);\r\n    } else if (this.props.start && pathname === \"/\")\r\n      this.context.router.history.replace(this.props.start);\r\n    else if (this.props.redirect) {\r\n      if (pathname.indexOf(this.props.match) === 0) {\r\n        pathname = pathname.replace(this.props.match, \"\");\r\n        this.context.router.history.replace(this.props.redirect + pathname);\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {}\r\n\r\n  UNSAFE_componentWillReceiveProps() {\r\n    if (this.props.save === \"memory\")\r\n      app().pathname = this.getPath(this.context);\r\n    if (this.props.save === \"storage\")\r\n      app().storage.setItem({\r\n        id: \"router.pathname\",\r\n        value: this.getPath(this.context),\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nRouterState.contextTypes = {\r\n  router: PropTypes.object,\r\n};\r\nexport default RouterState;\r\n\r\n// app.storage.getItem({ id: \"language\" }));\r\n","import { withRouter } from \"react-router\";\r\n\r\nlet last = false;\r\nconst RouterToTopOnNav = ({ location }) => {\r\n  if (location.pathname !== last) {\r\n    last = location.pathname;\r\n    document.documentElement.scrollTop = 0;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default withRouter(RouterToTopOnNav);\r\n","import { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst toType = {\r\n  int: (val) => parseInt(val || 0, 10),\r\n  float: (val) => parseFloat(val),\r\n  array: (val) => (val === \"\" ? undefined : val),\r\n};\r\n\r\nconst RouterUseQueryStore = (saveId, type, push) => {\r\n  const history = useHistory();\r\n\r\n  const ref = useRef();\r\n  const { search } = history.location;\r\n\r\n  const getQueryValue = useCallback(\r\n    (query) => {\r\n      if (!saveId) return \"\";\r\n      const reg = `\\\\&${saveId}=([^\\\\s&]+)`;\r\n      const [, value = \"\"] = query.match(new RegExp(reg, \"im\")) || [];\r\n      return type ? toType[type](value) : value;\r\n    },\r\n    [saveId, type]\r\n  );\r\n\r\n  const [value, setValue] = useState(\r\n    saveId ? getQueryValue(search) : type ? toType[type](\"\") : \"\"\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!push) return;\r\n\r\n    const newVal = getQueryValue(search);\r\n    if (newVal !== value) setValue(newVal);\r\n  }, [getQueryValue, push, search, value]);\r\n\r\n  const setRouterValue = (value) => {\r\n    setValue(value);\r\n\r\n    if (!saveId) return;\r\n\r\n    const { pathname, search } = history.location;\r\n\r\n    const reg = `(^\\\\?)|(\\\\&${saveId}=[^\\\\s&]*)`;\r\n    const rest = search.replace(new RegExp(reg, \"gi\"), \"\");\r\n    const add = value ? `&${saveId}=${value}` : \"\";\r\n\r\n    history[push ? \"push\" : \"replace\"](`${pathname}?${rest}${add}`);\r\n  };\r\n\r\n  return [value, setRouterValue, ref];\r\n};\r\n\r\nexport default RouterUseQueryStore;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst RouterView = ({ model, view, path }) => {\r\n  const { className, renderAs, item } = model;\r\n  const { pathname } = useLocation();\r\n\r\n  const insertVal = (val) =>\r\n    val &&\r\n    val.replace(/\\{([a-z_.0-9]+)\\}/gim, (str, p1) => {\r\n      if (/pathItem[0-9]/.test(p1) && view.params) return view.params[p1[8]];\r\n      return view.getValue(p1.replace(\"..\", path));\r\n    });\r\n\r\n  if (!pathname.match(new RegExp(insertVal(model.match)))) return null;\r\n\r\n  return (\r\n    <Wrapper className={className} renderAs={renderAs}>\r\n      <ContentTypeRender path={path} items={item} />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default RouterView;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst sortFuncInt = (key) => (a, b) => {\r\n  const x = a[key];\r\n  const y = b[key];\r\n  if (x === undefined) return y === undefined ? 0 : 1;\r\n  if (y === undefined) return -1;\r\n  return x < y ? -1 : x > y ? 1 : 0;\r\n};\r\n\r\nconst historyPos = (test) => {\r\n  const { history, at } = app().routerHistory;\r\n\r\n  const slice = history.slice(0, at);\r\n  slice.reverse();\r\n\r\n  const pos = slice.reduce((result, { pathname }, index) => {\r\n    if (result) return result;\r\n\r\n    if (test === \"/\") {\r\n      if (pathname === \"/\") return slice.length - index + 1;\r\n    } else if (new RegExp(test).test(pathname)) return slice.length - index + 1;\r\n\r\n    return 0;\r\n  }, 0);\r\n\r\n  return pos;\r\n};\r\n\r\nconst RouterViewByHistory = ({ model, path }) => {\r\n  model = model || {};\r\n  const { className, renderAs, items } = model;\r\n\r\n  const itemsByPosition = items.map((item) => ({\r\n    ...item,\r\n    pos: item.paths.reduce((res, path) => {\r\n      const pos = historyPos(path);\r\n      return pos > res ? pos : res;\r\n    }, 0),\r\n  }));\r\n\r\n  itemsByPosition.sort(sortFuncInt(\"pos\"));\r\n  itemsByPosition.reverse();\r\n\r\n  return (\r\n    <Wrapper className={className} renderAs={renderAs}>\r\n      <ContentTypeRender\r\n        path={path}\r\n        items={itemsByPosition.reduce(\r\n          (res, item) => [...res, ...item.item],\r\n          []\r\n        )}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default RouterViewByHistory;\r\n","export default ({ value, model }) => {\r\n  if (model.mandatory && !value[0]) return model.text_mandatory;\r\n  if (!value[0] && !value[1]) return false;\r\n\r\n  if (value[0].length < model.length)\r\n    return `Password must be at least ${model.length} characters`;\r\n\r\n  if (value[0] !== value[1]) return \"Repeated password must match\";\r\n\r\n  return false;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport app from \"nystem\";\r\nimport { InputWrapper, Input, UseValidator } from \"nystem-components\";\r\nimport validate from \"./validate\";\r\nimport \"./confirmInput.css\";\r\n\r\nconst PasswordConfirmInput = ({ model, value, view, setValue }) => {\r\n  const [value1, setValue1] = useState(\"\");\r\n  const [value2, setValue2] = useState(\"\");\r\n\r\n  const [error, setValidated] = UseValidator({\r\n    view,\r\n    validate,\r\n    value: [value1, value2],\r\n    model,\r\n  });\r\n\r\n  return (\r\n    <InputWrapper model={model} error={error}>\r\n      <div>\r\n        <Input\r\n          placeholder={app().t(model.text)}\r\n          className={[model.classNameInput, \"confirm-input\"]}\r\n          value={value1}\r\n          onChange={(svalue) => {\r\n            setValidated(true);\r\n            setValue1(svalue);\r\n            if (svalue === value2) setValue(value1);\r\n            else if (value) setValue(\"\");\r\n          }}\r\n          type=\"password\"\r\n          autoComplete=\"new-password\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <Input\r\n          placeholder={app().t(\"Repeat\")}\r\n          className={[model.classNameInput, \"confirm-input\"]}\r\n          value={value2}\r\n          onChange={(svalue) => {\r\n            setValidated(true);\r\n            setValue2(svalue);\r\n            if (svalue === value1) setValue(value1);\r\n            else if (value) setValue(\"\");\r\n          }}\r\n          type=\"password\"\r\n          autoComplete=\"new-password\"\r\n        />\r\n      </div>\r\n    </InputWrapper>\r\n  );\r\n};\r\nexport default PasswordConfirmInput;\r\n","import React, { useState } from \"react\";\r\nimport { InputWrapper, Input } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst PasswordInput = ({ model, value, setValue }) => {\r\n  const { disabled, text, classNameInput = [] } = model;\r\n  const [id] = useState(app().uuid);\r\n\r\n  return (\r\n    <InputWrapper model={model} id={id}>\r\n      <Input\r\n        id={id}\r\n        placeholder={app().t(text)}\r\n        className={classNameInput || \"sm:w-1/2 w-full\"}\r\n        value={value || \"\"}\r\n        onChange={setValue}\r\n        type=\"password\"\r\n        disabled={disabled}\r\n      />\r\n    </InputWrapper>\r\n  );\r\n};\r\n\r\nexport default PasswordInput;\r\n","/* eslint-disable react/no-string-refs */\r\nimport React from \"react\";\r\nimport { InputWrapper } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nclass PasswordOldpassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    this.errormsg = this.model.text_mandatory\r\n      ? this.model.text_mandatory\r\n      : true;\r\n    this.validated = false;\r\n    this.state = {};\r\n  }\r\n  handleChange() {\r\n    this.validated = true;\r\n    const { value } = this.refs.input;\r\n    this.setState({\r\n      value: value,\r\n      error: this.model.mandatory && !value ? this.errormsg : false,\r\n    });\r\n    this.props.setValue(`__${this.model.id}`, value);\r\n  }\r\n  valid() {\r\n    this.validated = true;\r\n    if (this.model.mandatory && !this.state.value) {\r\n      this.setState({\r\n        error: this.errormsg,\r\n      });\r\n      return false;\r\n    }\r\n    if (this.state.error) delete this.state.error;\r\n    return true;\r\n  }\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (this.props.value !== nextProps.value) {\r\n      const error = this.validated && this.model.mandatory && !nextProps.value;\r\n      this.setState({\r\n        error: error ? this.errormsg : false,\r\n      });\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <InputWrapper model={this.model} error={this.state.error}>\r\n        <input\r\n          ref=\"input\"\r\n          placeholder={app().t(this.model.text)}\r\n          className=\"form-control\"\r\n          value={this.state.value}\r\n          onChange={this.handleChange}\r\n          type=\"password\"\r\n        />\r\n      </InputWrapper>\r\n    );\r\n  }\r\n}\r\nexport default PasswordOldpassword;\r\n","import React from \"react\";\r\n\r\nclass PasswordView extends React.Component {\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default PasswordView;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\n\r\nclass RoleView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    app().on(\"login\", this.sessionChange);\r\n    app().on(\"logout\", this.sessionChange);\r\n\r\n    this.sessionChange();\r\n\r\n    return {};\r\n  }\r\n  sessionChange() {\r\n    let session = app.session.user;\r\n    const { fields } = this.props.model;\r\n\r\n    if (!session) session = {};\r\n\r\n    if (!fields || !fields.length) this.props.setValue(false, session);\r\n    else\r\n      for (let i = 0; i < fields.length; i++)\r\n        this.props.setValue(fields[i], session[fields[i]]);\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default RoleView;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nclass Role extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    app().on(\"login\", this.sessionChange.bind(this));\r\n    app().on(\"logout\", this.sessionChange.bind(this));\r\n    this.state = { visible: this.isVisible(props) };\r\n  }\r\n  contains(array1, array2) {\r\n    if (typeof array1 === \"string\") array1 = [array1];\r\n    if (typeof array2 === \"string\") array2 = [array2];\r\n\r\n    for (let i = 0; i < array1.length; i++)\r\n      if (array2.indexOf(array1[i]) !== -1) return true;\r\n\r\n    return false;\r\n  }\r\n  isVisible(props) {\r\n    const { user } = app().session;\r\n    const role =\r\n      user && user.role ? [\"logged-in\"].concat(user.role) : [\"logged-out\"];\r\n    return this.contains(props.role.split(\" \"), role);\r\n  }\r\n  sessionChange() {\r\n    const visible = this.isVisible(this.props);\r\n    if (visible !== this.state.visible) this.setState({ visible });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.visible)\r\n      return (\r\n        <Wrapper className={this.props.className}>\r\n          {this.props.children}\r\n        </Wrapper>\r\n      );\r\n    return null;\r\n  }\r\n}\r\nexport default Role;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nconst SessionLogout = ({ children, model, history, path, ...props }) => {\r\n  const { item, className, to } = model || props;\r\n  return (\r\n    <Wrapper\r\n      className={className}\r\n      onClick={(e) => {\r\n        e.preventDefault();\r\n        app().session.logout();\r\n        if (!to) return;\r\n\r\n        history.replace(to);\r\n      }}\r\n    >\r\n      {children || <ContentTypeRender path={path} items={item} />}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default withRouter(SessionLogout);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst hasNoRole = user => user && !user.role;\r\n\r\nconst SessionNoRole = ({ model = {}, children, path, className }) => {\r\n  const [visible, setVisible] = useState(hasNoRole(app().session.user));\r\n\r\n  useEffect(() => {\r\n    const check = () => {\r\n      setVisible(hasNoRole(app().session.user));\r\n    };\r\n\r\n    app().on(\"logout\", check);\r\n    app().on(\"login\", check);\r\n\r\n    return () => {\r\n      app().off(\"login\", check);\r\n      app().off(\"logout\", check);\r\n    };\r\n  }, []);\r\n\r\n  if (!visible) return null;\r\n\r\n  className = model.className || className;\r\n\r\n  if (children) return <Wrapper className={className}>{children}</Wrapper>;\r\n\r\n  return (\r\n    <Wrapper className={className}>\r\n      <ContentTypeRender path={path} items={model.item} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default SessionNoRole;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst contains = (array1, array2) => {\r\n  if (!(array1 instanceof Array)) array1 = [array1];\r\n  if (!(array2 instanceof Array)) array2 = [array2];\r\n  for (let i = 0; i < array1.length; i++)\r\n    if (array2.indexOf(array1[i]) !== -1) return true;\r\n\r\n  return false;\r\n};\r\n\r\nconst SessionRole = ({ userrole, model = {}, children, path, className }) => {\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const updateVisibility = () => {\r\n      let reqRole = model.role || userrole;\r\n      reqRole = typeof reqRole === \"string\" ? reqRole.split(\" \") : reqRole;\r\n\r\n      const { role } = app().session.user || {};\r\n\r\n      const userRole = role ? [\"logged-in\"].concat(role) : \"logged-out\";\r\n\r\n      setVisible(contains(userRole, reqRole));\r\n    };\r\n\r\n    app().on(\"logout\", -1000, updateVisibility);\r\n    app().on(\"login\", -1000, updateVisibility);\r\n\r\n    updateVisibility();\r\n    return () => {\r\n      app().off(\"login\", updateVisibility);\r\n      app().off(\"logout\", updateVisibility);\r\n    };\r\n  }, [model.role, userrole]);\r\n\r\n  if (!visible) return null;\r\n\r\n  if (children)\r\n    return (\r\n      <Wrapper className={model.className || className}>{children}</Wrapper>\r\n    );\r\n\r\n  return (\r\n    <Wrapper className={model.className}>\r\n      <ContentTypeRender path={path} items={model.item} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default SessionRole;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { ContentTypeView } from \"nystem-components\";\r\n\r\nclass SessionUser extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    app().on(\"login\", this.sessionChange.bind(this));\r\n    app().on(\"logout\", this.sessionChange.bind(this));\r\n\r\n    const session = app().session.user;\r\n    this.state = { userid: session ? session._id : null };\r\n  }\r\n  sessionChange() {\r\n    const session = app().session.user;\r\n    this.setState({ userid: session ? session._id : null });\r\n  }\r\n  render() {\r\n    const { view, model } = this.props;\r\n    if (this.state.userid && model.toformat !== view.format)\r\n      return (\r\n        <ContentTypeView\r\n          key={this.state.userid}\r\n          contentType={view.contentType}\r\n          format={model.toformat}\r\n          id={this.state.userid}\r\n          baseView={view}\r\n        />\r\n      );\r\n    return null;\r\n  }\r\n}\r\nexport default SessionUser;\r\n","import { useEffect } from \"react\";\r\nimport app from \"nystem\";\r\n\r\nconst SessionView = ({ view }) => {\r\n  useEffect(() => {\r\n    const sessionChange = () => {\r\n      let session = app().session.user;\r\n      const { fields } = this.props.model;\r\n\r\n      if (!session) session = {};\r\n\r\n      if (!fields || !fields.length) view.setValue(false, session);\r\n      else\r\n        for (let i = 0; i < fields.length; i++)\r\n          view.setValue(fields[i], session[fields[i]]);\r\n    };\r\n\r\n    app().on(\"login\", sessionChange);\r\n    app().on(\"logout\", sessionChange);\r\n\r\n    sessionChange();\r\n    return () => {\r\n      app().off(\"login\", sessionChange);\r\n      app().off(\"logout\", sessionChange);\r\n    };\r\n  }, [view]);\r\n\r\n  return null;\r\n};\r\nexport default SessionView;\r\n","import React, { useState } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Button } from \"nystem-components\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nconst ViewButtonLogin = ({ view, model, history }) => {\r\n  const [saveButton, setSaveButton] = useState(\"Log in\");\r\n\r\n  const handleSubmit = async () => {\r\n    const { errors = [] } = await view.event(\"validate\");\r\n\r\n    if (errors.length) {\r\n      view.event(\"error\", \"Correct validation errors\");\r\n      return;\r\n    }\r\n    setSaveButton(\"Logging in\");\r\n    view.value.contentType = view.contentType;\r\n    const { error } = await app().session.login(view.value);\r\n\r\n    if (error === \"missing\") view.event(\"error\", \"Email does not exist\");\r\n    else if (error === \"password\") view.event(\"error\", \"Password error\");\r\n    else if (model.redirectURL) history.replace(model.redirectURL);\r\n\r\n    setSaveButton(\"Log in\");\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      className={model.className}\r\n      type={model.btnType}\r\n      size={model.size}\r\n      onClick={handleSubmit}\r\n    >\r\n      {saveButton}\r\n    </Button>\r\n  );\r\n};\r\nexport default withRouter(ViewButtonLogin);\r\n","import React from \"react\";\r\nimport { Icon } from \"nystem-components\";\r\n\r\nconst IconView = ({ model }) => (\r\n  <Icon\r\n    className={model.className}\r\n    icon={model.icon}\r\n    deg={model.deg !== \"0\" && model.deg}\r\n  />\r\n);\r\n\r\nexport default IconView;\r\n","/* eslint-disable */\n    import React from \"react\";\n  \n  export default {\"add-outline\":<path d=\"M11 9h4v2h-4v4H9v-4H5V9h4V5h2v4zm-1 11a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16z\"/>,\"add-solid\":<path d=\"M11 9V5H9v4H5v2h4v4h2v-4h4V9h-4zm-1 11a10 10 0 1 1 0-20 10 10 0 0 1 0 20z\"/>,\"adjust\":<path d=\"M10 2v16a8 8 0 1 0 0-16zm0 18a10 10 0 1 1 0-20 10 10 0 0 1 0 20z\"/>,\"airplane\":<path d=\"M8.4 12H2.8L1 15H0V5h1l1.8 3h5.6L6 0h2l4.8 8H18a2 2 0 1 1 0 4h-5.2L8 20H6l2.4-8z\"/>,\"album\":<path d=\"M0 0h20v20H0V0zm10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-5a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\"/>,\"align-center\":<path d=\"M1 1h18v2H1V1zm0 8h18v2H1V9zm0 8h18v2H1v-2zM4 5h12v2H4V5zm0 8h12v2H4v-2z\"/>,\"align-justified\":<path d=\"M1 1h18v2H1V1zm0 8h18v2H1V9zm0 8h18v2H1v-2zM1 5h18v2H1V5zm0 8h18v2H1v-2z\"/>,\"align-left\":<path d=\"M1 1h18v2H1V1zm0 8h18v2H1V9zm0 8h18v2H1v-2zM1 5h12v2H1V5zm0 8h12v2H1v-2z\"/>,\"align-right\":<path d=\"M1 1h18v2H1V1zm0 8h18v2H1V9zm0 8h18v2H1v-2zM7 5h12v2H7V5zm0 8h12v2H7v-2z\"/>,\"anchor\":<path d=\"M4.34 15.66A7.97 7.97 0 0 0 9 17.94V10H5V8h4V5.83a3 3 0 1 1 2 0V8h4v2h-4v7.94a7.97 7.97 0 0 0 4.66-2.28l-1.42-1.42h5.66l-2.83 2.83a10 10 0 0 1-14.14 0L.1 14.24h5.66l-1.42 1.42zM10 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\"/>,\"announcement\":<path d=\"M3 6c0-1.1.9-2 2-2h8l4-4h2v16h-2l-4-4H5a2 2 0 0 1-2-2H1V6h2zm8 9v5H8l-1.67-5H5v-2h8v2h-2z\"/>,\"apparel\":<path d=\"M7 0H6L0 3v6l4-1v12h12V8l4 1V3l-6-3h-1a3 3 0 0 1-6 0z\"/>,\"arrow-down\":<polygon points=\"9 16.172 2.929 10.101 1.515 11.515 10 20 10.707 19.293 18.485 11.515 17.071 10.101 11 16.172 11 0 9 0\"/>,\"arrow-left\":<polygon points=\"3.828 9 9.899 2.929 8.485 1.515 0 10 .707 10.707 8.485 18.485 9.899 17.071 3.828 11 20 11 20 9 3.828 9\"/>,\"arrow-outline-down\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-2-8V5h4v5h3l-5 5-5-5h3z\"/>,\"arrow-outline-left\":<path d=\"M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0zm2 0a8 8 0 1 0 16 0 8 8 0 0 0-16 0zm8-2h5v4h-5v3l-5-5 5-5v3z\"/>,\"arrow-outline-right\":<path d=\"M20 10a10 10 0 1 1-20 0 10 10 0 0 1 20 0zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0zm-8 2H5V8h5V5l5 5-5 5v-3z\"/>,\"arrow-outline-up\":<path d=\"M10 0a10 10 0 1 1 0 20 10 10 0 0 1 0-20zm0 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm2 8v5H8v-5H5l5-5 5 5h-3z\"/>,\"arrow-right\":<polygon points=\"16.172 9 10.101 2.929 11.515 1.515 20 10 19.293 10.707 11.515 18.485 10.101 17.071 16.172 11 0 11 0 9\"/>,\"arrow-thick-down\":<path d=\"M7 10V2h6v8h5l-8 8-8-8h5z\"/>,\"arrow-thick-left\":<path d=\"M10 13h8V7h-8V2l-8 8 8 8v-5z\"/>,\"arrow-thick-right\":<path d=\"M10 7H2v6h8v5l8-8-8-8v5z\"/>,\"arrow-thick-up\":<path d=\"M7 10v8h6v-8h5l-8-8-8 8h5z\"/>,\"arrow-thin-down\":<path d=\"M9 16.172l-6.071-6.071-1.414 1.414L10 20l.707-.707 7.778-7.778-1.414-1.414L11 16.172V0H9z\"/>,\"arrow-thin-left\":<path d=\"M3.828 9l6.071-6.071-1.414-1.414L0 10l.707.707 7.778 7.778 1.414-1.414L3.828 11H20V9H3.828z\"/>,\"arrow-thin-right\":<path d=\"M16.172 9l-6.071-6.071 1.414-1.414L20 10l-.707.707-7.778 7.778-1.414-1.414L16.172 11H0V9z\"/>,\"arrow-thin-up\":<path d=\"M9 3.828L2.929 9.899 1.515 8.485 10 0l.707.707 7.778 7.778-1.414 1.414L11 3.828V20H9V3.828z\"/>,\"arrow-up\":<polygon points=\"9 3.828 2.929 9.899 1.515 8.485 10 0 10.707 .707 18.485 8.485 17.071 9.899 11 3.828 11 20 9 20 9 3.828\"/>,\"artist\":<path d=\"M15.75 8l-3.74-3.75a3.99 3.99 0 0 1 6.82-3.08A4 4 0 0 1 15.75 8zM1.85 15.3l9.2-9.19 2.83 2.83-9.2 9.2-2.82-2.84zm-1.4 2.83l2.11-2.12 1.42 1.42-2.12 2.12-1.42-1.42zM10 15l2-2v7h-2v-5z\"/>,\"at-symbol\":<path d=\"M13.6 13.47A4.99 4.99 0 0 1 5 10a5 5 0 0 1 8-4V5h2v6.5a1.5 1.5 0 0 0 3 0V10a8 8 0 1 0-4.42 7.16l.9 1.79A10 10 0 1 1 20 10h-.18.17v1.5a3.5 3.5 0 0 1-6.4 1.97zM10 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/>,\"attachment\":<path d=\"M15 3H7a7 7 0 1 0 0 14h8v-2H7A5 5 0 0 1 7 5h8a3 3 0 0 1 0 6H7a1 1 0 0 1 0-2h8V7H7a3 3 0 1 0 0 6h8a5 5 0 0 0 0-10z\"/>,\"backspace\":<path d=\"M0 10l7-7h13v14H7l-7-7zm14.41 0l2.13-2.12-1.42-1.42L13 8.6l-2.12-2.13-1.42 1.42L11.6 10l-2.13 2.12 1.42 1.42L13 11.4l2.12 2.13 1.42-1.42L14.4 10z\"/>,\"backward-step\":<path d=\"M4 5h3v10H4V5zm12 0v10l-9-5 9-5z\"/>,\"backward\":<path d=\"M19 5v10l-9-5 9-5zm-9 0v10l-9-5 9-5z\"/>,\"badge\":<path d=\"M10 12a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-3a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm4 2.75V20l-4-4-4 4v-8.25a6.97 6.97 0 0 0 8 0z\"/>,\"battery-full\":<path d=\"M0 6c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6zm2 0v8h16V6H2zm1 1h4v6H3V7zm5 0h4v6H8V7zm5 0h4v6h-4V7z\"/>,\"battery-half\":<path d=\"M0 6c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6zm2 0v8h16V6H2zm1 1h4v6H3V7zm5 0h4v6H8V7z\"/>,\"battery-low\":<path d=\"M0 6c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6zm2 0v8h16V6H2zm1 1h4v6H3V7z\"/>,\"beverage\":<path d=\"M9 18v-7L0 2V0h20v2l-9 9v7l5 1v1H4v-1l5-1zm2-10a2 2 0 1 0 0-4 2 2 0 0 0 0 4z\"/>,\"block\":<path d=\"M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0zm16.32-4.9L5.09 16.31A8 8 0 0 0 16.32 5.09zm-1.41-1.42A8 8 0 0 0 3.68 14.91L14.91 3.68z\"/>,\"bluetooth\":<path d=\"M9.41 0l6 6-4 4 4 4-6 6H9v-7.59l-3.3 3.3-1.4-1.42L8.58 10l-4.3-4.3L5.7 4.3 9 7.58V0h.41zM11 4.41V7.6L12.59 6 11 4.41zM12.59 14L11 12.41v3.18L12.59 14z\"/>,\"bolt\":<path d=\"M13 8V0L8.11 5.87 3 12h4v8L17 8h-4z\"/>,\"book-reference\":<path d=\"M6 4H5a1 1 0 1 1 0-2h11V1a1 1 0 0 0-1-1H4a2 2 0 0 0-2 2v16c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V5a1 1 0 0 0-1-1h-7v8l-2-2-2 2V4z\"/>,\"bookmark copy 2\":<polygon points=\"18 12 18 13 8 13 8 18 2 12 8 6 8 11 16 11 16 2 18 2\"/>,\"bookmark copy 3\":<polygon points=\"3.5 13 12 13 12 18 18 12 12 6 12 11 4 11 4 2 2 2 2 13\"/>,\"bookmark-outline-add\":<path d=\"M2 2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v18l-8-4-8 4V2zm2 0v15l6-3 6 3V2H4zm5 5V5h2v2h2v2h-2v2H9V9H7V7h2z\"/>,\"bookmark-outline\":<path d=\"M2 2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v18l-8-4-8 4V2zm2 0v15l6-3 6 3V2H4z\"/>,\"bookmark\":<path d=\"M2 2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v18l-8-4-8 4V2z\"/>,\"border-all\":<path d=\"M11 11v6h6v-6h-6zm0-2h6V3h-6v6zm-2 2H3v6h6v-6zm0-2V3H3v6h6zm-8 9V1h18v18H1v-1z\"/>,\"border-bottom\":<path d=\"M1 1h2v2H1V1zm0 4h2v2H1V5zm0 4h2v2H1V9zm0 4h2v2H1v-2zm0 4h18v2H1v-2zM5 1h2v2H5V1zm0 8h2v2H5V9zm4-8h2v2H9V1zm0 4h2v2H9V5zm0 4h2v2H9V9zm0 4h2v2H9v-2zm4-12h2v2h-2V1zm0 8h2v2h-2V9zm4-8h2v2h-2V1zm0 4h2v2h-2V5zm0 4h2v2h-2V9zm0 4h2v2h-2v-2z\"/>,\"border-horizontal\":<path d=\"M1 1h2v2H1V1zm0 4h2v2H1V5zm0 4h18v2H1V9zm0 4h2v2H1v-2zm0 4h2v2H1v-2zM5 1h2v2H5V1zm0 16h2v2H5v-2zM9 1h2v2H9V1zm0 4h2v2H9V5zm0 8h2v2H9v-2zm0 4h2v2H9v-2zm4-16h2v2h-2V1zm0 16h2v2h-2v-2zm4-16h2v2h-2V1zm0 4h2v2h-2V5zm0 8h2v2h-2v-2zm0 4h2v2h-2v-2z\"/>,\"border-inner\":<path d=\"M9 9V1h2v8h8v2h-8v8H9v-8H1V9h8zM1 1h2v2H1V1zm0 4h2v2H1V5zm0 8h2v2H1v-2zm0 4h2v2H1v-2zM5 1h2v2H5V1zm0 16h2v2H5v-2zm8-16h2v2h-2V1zm0 16h2v2h-2v-2zm4-16h2v2h-2V1zm0 4h2v2h-2V5zm0 8h2v2h-2v-2zm0 4h2v2h-2v-2z\"/>,\"border-left\":<path d=\"M1 1h2v18H1V1zm4 0h2v2H5V1zm0 8h2v2H5V9zm0 8h2v2H5v-2zM9 1h2v2H9V1zm0 4h2v2H9V5zm0 4h2v2H9V9zm0 4h2v2H9v-2zm0 4h2v2H9v-2zm4-16h2v2h-2V1zm0 8h2v2h-2V9zm0 8h2v2h-2v-2zm4-16h2v2h-2V1zm0 4h2v2h-2V5zm0 4h2v2h-2V9zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2z\"/>,\"border-none\":<path d=\"M1 1h2v2H1V1zm0 4h2v2H1V5zm0 4h2v2H1V9zm0 4h2v2H1v-2zm0 4h2v2H1v-2zM5 1h2v2H5V1zm0 8h2v2H5V9zm0 8h2v2H5v-2zM9 1h2v2H9V1zm0 4h2v2H9V5zm0 4h2v2H9V9zm0 4h2v2H9v-2zm0 4h2v2H9v-2zm4-16h2v2h-2V1zm0 8h2v2h-2V9zm0 8h2v2h-2v-2zm4-16h2v2h-2V1zm0 4h2v2h-2V5zm0 4h2v2h-2V9zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2z\"/>,\"border-outer\":<path d=\"M2 19H1V1h18v18H2zm1-2h14V3H3v14zm10-8h2v2h-2V9zM9 9h2v2H9V9zM5 9h2v2H5V9zm4-4h2v2H9V5zm0 8h2v2H9v-2z\"/>,\"border-right\":<path d=\"M5 1h2v2H5V1zm0 8h2v2H5V9zm0 8h2v2H5v-2zM9 1h2v2H9V1zm0 4h2v2H9V5zm0 4h2v2H9V9zm0 4h2v2H9v-2zm0 4h2v2H9v-2zm4-16h2v2h-2V1zm0 8h2v2h-2V9zm0 8h2v2h-2v-2zM1 1h2v2H1V1zm0 4h2v2H1V5zm0 4h2v2H1V9zm0 4h2v2H1v-2zm0 4h2v2H1v-2zM17 1h2v18h-2V1z\"/>,\"border-top\":<path d=\"M1 1h18v2H1V1zm0 4h2v2H1V5zm0 4h2v2H1V9zm0 4h2v2H1v-2zm0 4h2v2H1v-2zm4-8h2v2H5V9zm0 8h2v2H5v-2zM9 5h2v2H9V5zm0 4h2v2H9V9zm0 4h2v2H9v-2zm0 4h2v2H9v-2zm4-8h2v2h-2V9zm0 8h2v2h-2v-2zm4-12h2v2h-2V5zm0 4h2v2h-2V9zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2z\"/>,\"border-vertical\":<path d=\"M1 1h2v2H1V1zm0 4h2v2H1V5zm0 4h2v2H1V9zm0 4h2v2H1v-2zm0 4h2v2H1v-2zM5 1h2v2H5V1zm0 8h2v2H5V9zm0 8h2v2H5v-2zM9 1h2v18H9V1zm4 0h2v2h-2V1zm0 8h2v2h-2V9zm0 8h2v2h-2v-2zm4-16h2v2h-2V1zm0 4h2v2h-2V5zm0 4h2v2h-2V9zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2z\"/>,\"box\":<path d=\"M0 2C0 .9.9 0 2 0h16a2 2 0 0 1 2 2v2H0V2zm1 3h18v13a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V5zm6 2v2h6V7H7z\"/>,\"brightness-down\":<path d=\"M10 13a3 3 0 1 1 0-6 3 3 0 0 1 0 6zM9 4a1 1 0 1 1 2 0 1 1 0 1 1-2 0zm4.54 1.05a1 1 0 1 1 1.41 1.41 1 1 0 1 1-1.41-1.41zM16 9a1 1 0 1 1 0 2 1 1 0 1 1 0-2zm-1.05 4.54a1 1 0 1 1-1.41 1.41 1 1 0 1 1 1.41-1.41zM11 16a1 1 0 1 1-2 0 1 1 0 1 1 2 0zm-4.54-1.05a1 1 0 1 1-1.41-1.41 1 1 0 1 1 1.41 1.41zM4 11a1 1 0 1 1 0-2 1 1 0 1 1 0 2zm1.05-4.54a1 1 0 1 1 1.41-1.41 1 1 0 1 1-1.41 1.41z\"/>,\"brightness-up\":<path d=\"M10 14a4 4 0 1 1 0-8 4 4 0 0 1 0 8zM9 1a1 1 0 1 1 2 0v2a1 1 0 1 1-2 0V1zm6.65 1.94a1 1 0 1 1 1.41 1.41l-1.4 1.4a1 1 0 1 1-1.41-1.41l1.4-1.4zM18.99 9a1 1 0 1 1 0 2h-1.98a1 1 0 1 1 0-2h1.98zm-1.93 6.65a1 1 0 1 1-1.41 1.41l-1.4-1.4a1 1 0 1 1 1.41-1.41l1.4 1.4zM11 18.99a1 1 0 1 1-2 0v-1.98a1 1 0 1 1 2 0v1.98zm-6.65-1.93a1 1 0 1 1-1.41-1.41l1.4-1.4a1 1 0 1 1 1.41 1.41l-1.4 1.4zM1.01 11a1 1 0 1 1 0-2h1.98a1 1 0 1 1 0 2H1.01zm1.93-6.65a1 1 0 1 1 1.41-1.41l1.4 1.4a1 1 0 1 1-1.41 1.41l-1.4-1.4z\"/>,\"browser-window-new\":<path d=\"M9 10V8h2v2h2v2h-2v2H9v-2H7v-2h2zM0 3c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm2 2v12h16V5H2z\"/>,\"browser-window-open\":<path d=\"M0 3c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm2 2v12h16V5H2zm8 3l4 5H6l4-5z\"/>,\"browser-window\":<path d=\"M0 3c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm2 2v12h16V5H2z\"/>,\"bug\":<path d=\"M15.3 14.89l2.77 2.77a1 1 0 0 1 0 1.41 1 1 0 0 1-1.41 0l-2.59-2.58A5.99 5.99 0 0 1 11 18V9.04a1 1 0 0 0-2 0V18a5.98 5.98 0 0 1-3.07-1.51l-2.59 2.58a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41l2.77-2.77A5.95 5.95 0 0 1 4.07 13H1a1 1 0 1 1 0-2h3V8.41L.93 5.34a1 1 0 0 1 0-1.41 1 1 0 0 1 1.41 0l2.1 2.1h11.12l2.1-2.1a1 1 0 0 1 1.41 0 1 1 0 0 1 0 1.41L16 8.41V11h3a1 1 0 1 1 0 2h-3.07c-.1.67-.32 1.31-.63 1.89zM15 5H5a5 5 0 1 1 10 0z\"/>,\"buoy\":<path d=\"M17.16 6.42a8.03 8.03 0 0 0-3.58-3.58l-1.34 2.69a5.02 5.02 0 0 1 2.23 2.23l2.69-1.34zm0 7.16l-2.69-1.34a5.02 5.02 0 0 1-2.23 2.23l1.34 2.69a8.03 8.03 0 0 0 3.58-3.58zM6.42 2.84a8.03 8.03 0 0 0-3.58 3.58l2.69 1.34a5.02 5.02 0 0 1 2.23-2.23L6.42 2.84zM2.84 13.58a8.03 8.03 0 0 0 3.58 3.58l1.34-2.69a5.02 5.02 0 0 1-2.23-2.23l-2.69 1.34zM10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-7a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/>,\"calculator\":<path d=\"M2 2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm3 1v2h10V3H5zm0 4v2h2V7H5zm4 0v2h2V7H9zm4 0v2h2V7h-2zm-8 4v2h2v-2H5zm4 0v2h2v-2H9zm4 0v6h2v-6h-2zm-8 4v2h2v-2H5zm4 0v2h2v-2H9z\"/>,\"calendar\":<path d=\"M1 4c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4zm2 2v12h14V6H3zm2-6h2v2H5V0zm8 0h2v2h-2V0zM5 9h2v2H5V9zm0 4h2v2H5v-2zm4-4h2v2H9V9zm0 4h2v2H9v-2zm4-4h2v2h-2V9zm0 4h2v2h-2v-2z\"/>,\"camera\":<path d=\"M0 6c0-1.1.9-2 2-2h3l2-2h6l2 2h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6zm10 10a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm0-2a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\"/>,\"chart-bar\":<path d=\"M1 10h3v10H1V10zM6 0h3v20H6V0zm5 8h3v12h-3V8zm5-4h3v16h-3V4z\"/>,\"chart-pie\":<path d=\"M19.95 11A10 10 0 1 1 9 .05V11h10.95zm-.08-2.6H11.6V.13a10 10 0 0 1 8.27 8.27z\"/>,\"chart\":<path d=\"M4.13 12H4a2 2 0 1 0 1.8 1.11L7.86 10a2.03 2.03 0 0 0 .65-.07l1.55 1.55a2 2 0 1 0 3.72-.37L15.87 8H16a2 2 0 1 0-1.8-1.11L12.14 10a2.03 2.03 0 0 0-.65.07L9.93 8.52a2 2 0 1 0-3.72.37L4.13 12zM0 4c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4z\"/>,\"chat-bubble-dots\":<path d=\"M10 15l-4 4v-4H2a2 2 0 0 1-2-2V3c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-8zM5 7v2h2V7H5zm4 0v2h2V7H9zm4 0v2h2V7h-2z\"/>,\"checkmark-outline\":<path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM6.7 9.29L9 11.6l4.3-4.3 1.4 1.42L9 14.4l-3.7-3.7 1.4-1.42z\"/>,\"checkmark\":<path d=\"M0 11l2-2 5 5L18 3l2 2L7 18z\"/>,\"cheveron-down\":<path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"/>,\"cheveron-left\":<path d=\"M7.05 9.293L6.343 10 12 15.657l1.414-1.414L9.172 10l4.242-4.243L12 4.343z\"/>,\"cheveron-outline-down\":<path d=\"M20 10a10 10 0 1 1-20 0 10 10 0 0 1 20 0zM10 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm-.7 10.54L5.75 9l1.41-1.41L10 10.4l2.83-2.82L14.24 9 10 13.24l-.7-.7z\"/>,\"cheveron-outline-left\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm8-10a8 8 0 1 0-16 0 8 8 0 0 0 16 0zM7.46 9.3L11 5.75l1.41 1.41L9.6 10l2.82 2.83L11 14.24 6.76 10l.7-.7z\"/>,\"cheveron-outline-right\":<path d=\"M10 0a10 10 0 1 1 0 20 10 10 0 0 1 0-20zM2 10a8 8 0 1 0 16 0 8 8 0 0 0-16 0zm10.54.7L9 14.25l-1.41-1.41L10.4 10 7.6 7.17 9 5.76 13.24 10l-.7.7z\"/>,\"cheveron-outline-up\":<path d=\"M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0zm10 8a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm.7-10.54L14.25 11l-1.41 1.41L10 9.6l-2.83 2.8L5.76 11 10 6.76l.7.7z\"/>,\"cheveron-right\":<path d=\"M12.95 10.707l.707-.707L8 4.343 6.586 5.757 10.828 10l-4.242 4.243L8 15.657l4.95-4.95z\"/>,\"cheveron-up\":<path d=\"M10.707 7.05L10 6.343 4.343 12l1.414 1.414L10 9.172l4.243 4.242L15.657 12z\"/>,\"clipboard\":<path d=\"M7.03 2.6a3 3 0 0 1 5.94 0L15 3v1h1a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h1V3l2.03-.4zM5 6H4v12h12V6h-1v1H5V6zm5-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\"/>,\"close-outline\":<path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm1.41-1.41A8 8 0 1 0 15.66 4.34 8 8 0 0 0 4.34 15.66zm9.9-8.49L11.41 10l2.83 2.83-1.41 1.41L10 11.41l-2.83 2.83-1.41-1.41L8.59 10 5.76 7.17l1.41-1.41L10 8.59l2.83-2.83 1.41 1.41z\"/>,\"close-solid\":<path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zM11.4 10l2.83-2.83-1.41-1.41L10 8.59 7.17 5.76 5.76 7.17 8.59 10l-2.83 2.83 1.41 1.41L10 11.41l2.83 2.83 1.41-1.41L11.41 10z\"/>,\"close\":<path d=\"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z\"/>,\"cloud-upload\":<path d=\"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z\"/>,\"cloud\":<path d=\"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1z\"/>,\"code\":<path d=\"M.7 9.3l4.8-4.8 1.4 1.42L2.84 10l4.07 4.07-1.41 1.42L0 10l.7-.7zm18.6 1.4l.7-.7-5.49-5.49-1.4 1.42L17.16 10l-4.07 4.07 1.41 1.42 4.78-4.78z\"/>,\"coffee\":<path d=\"M4 11H2a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h2V1h14v10a4 4 0 0 1-4 4H8a4 4 0 0 1-4-4zm0-2V5H2v4h2zm-2 8v-1h18v1l-4 2H6l-4-2z\"/>,\"cog\":<path d=\"M3.94 6.5L2.22 3.64l1.42-1.42L6.5 3.94c.52-.3 1.1-.54 1.7-.7L9 0h2l.8 3.24c.6.16 1.18.4 1.7.7l2.86-1.72 1.42 1.42-1.72 2.86c.3.52.54 1.1.7 1.7L20 9v2l-3.24.8c-.16.6-.4 1.18-.7 1.7l1.72 2.86-1.42 1.42-2.86-1.72c-.52.3-1.1.54-1.7.7L11 20H9l-.8-3.24c-.6-.16-1.18-.4-1.7-.7l-2.86 1.72-1.42-1.42 1.72-2.86c-.3-.52-.54-1.1-.7-1.7L0 11V9l3.24-.8c.16-.6.4-1.18.7-1.7zM10 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/>,\"color-palette\":<path d=\"M9 20v-1.7l.01-.24L15.07 12h2.94c1.1 0 1.99.89 1.99 2v4a2 2 0 0 1-2 2H9zm0-3.34V5.34l2.08-2.07a1.99 1.99 0 0 1 2.82 0l2.83 2.83a2 2 0 0 1 0 2.82L9 16.66zM0 1.99C0 .9.89 0 2 0h4a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zM4 17a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\"/>,\"compose\":<path d=\"M2 4v14h14v-6l2-2v10H0V2h10L8 4H2zm10.3-.3l4 4L8 16H4v-4l8.3-8.3zm1.4-1.4L16 0l4 4-2.3 2.3-4-4z\"/>,\"computer-desktop\":<path d=\"M7 17H2a2 2 0 0 1-2-2V2C0 .9.9 0 2 0h16a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2h-5l4 2v1H3v-1l4-2zM2 2v11h16V2H2z\"/>,\"computer-laptop\":<path d=\"M18 16h2v1a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1v-1h2V4c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v12zM4 4v9h12V4H4zm4 11v1h4v-1H8z\"/>,\"conversation\":<path d=\"M17 11v3l-3-3H8a2 2 0 0 1-2-2V2c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2h-1zm-3 2v2a2 2 0 0 1-2 2H6l-3 3v-3H2a2 2 0 0 1-2-2V8c0-1.1.9-2 2-2h2v3a4 4 0 0 0 4 4h6z\"/>,\"copy\":<path d=\"M6 6V2c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-4v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8c0-1.1.9-2 2-2h4zm2 0h4a2 2 0 0 1 2 2v4h4V2H8v4zM2 8v10h10V8H2z\"/>,\"credit-card\":<path d=\"M18 6V4H2v2h16zm0 4H2v6h16v-6zM0 4c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm4 8h4v2H4v-2z\"/>,\"currency-dollar\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm1-5h1a3 3 0 0 0 0-6H7.99a1 1 0 0 1 0-2H14V5h-3V3H9v2H8a3 3 0 1 0 0 6h4a1 1 0 1 1 0 2H6v2h3v2h2v-2z\"/>,\"dashboard\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm-5.6-4.29a9.95 9.95 0 0 1 11.2 0 8 8 0 1 0-11.2 0zm6.12-7.64l3.02-3.02 1.41 1.41-3.02 3.02a2 2 0 1 1-1.41-1.41z\"/>,\"date-add\":<path d=\"M15 2h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2h2V0h2v2h6V0h2v2zM3 6v12h14V6H3zm6 5V9h2v2h2v2h-2v2H9v-2H7v-2h2z\"/>,\"dial-pad\":<path d=\"M5 4a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm5 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm5 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zM5 9a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm5 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm5 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zM5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm5 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 6a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm5-6a2 2 0 1 1 0-4 2 2 0 0 1 0 4z\"/>,\"directions\":<path d=\"M10 0l10 10-10 10L0 10 10 0zM6 10v3h2v-3h3v3l4-4-4-4v3H8a2 2 0 0 0-2 2z\"/>,\"document-add\":<path d=\"M9 10V8h2v2h2v2h-2v2H9v-2H7v-2h2zm-5 8h12V6h-4V2H4v16zm-2 1V0h12l4 4v16H2v-1z\"/>,\"document\":<path d=\"M4 18h12V6h-4V2H4v16zm-2 1V0h12l4 4v16H2v-1z\"/>,\"dots-horizontal-double\":<path d=\"M10 9a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 6a2 2 0 1 1 0-4 2 2 0 0 1 0 4z\"/>,\"dots-horizontal-triple\":<path d=\"M10 12a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0-6a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 12a2 2 0 1 1 0-4 2 2 0 0 1 0 4z\"/>,\"download\":<path d=\"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z\"/>,\"duplicate\":<path d=\"M6 6V2c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-4v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8c0-1.1.9-2 2-2h4zm2 0h4a2 2 0 0 1 2 2v4h4V2H8v4zM2 8v10h10V8H2zm4 4v-2h2v2h2v2H8v2H6v-2H4v-2h2z\"/>,\"edit-copy\":<path d=\"M6 6V2c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-4v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8c0-1.1.9-2 2-2h4zm2 0h4a2 2 0 0 1 2 2v4h4V2H8v4zM2 8v10h10V8H2z\"/>,\"edit-crop\":<path d=\"M14 16H6a2 2 0 0 1-2-2V6H0V4h4V0h2v14h14v2h-4v4h-2v-4zm0-3V6H7V4h7a2 2 0 0 1 2 2v7h-2z\"/>,\"edit-cut\":<path d=\"M9.77 11.5l5.34 3.91c.44.33 1.24.59 1.79.59H20L6.89 6.38A3.5 3.5 0 1 0 5.5 8.37L7.73 10 5.5 11.63a3.5 3.5 0 1 0 1.38 1.99l2.9-2.12zM3.5 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM15.1 4.59A3.53 3.53 0 0 1 16.9 4H20l-7.5 5.5L10.45 8l4.65-3.41z\"/>,\"edit-pencil\":<path d=\"M12.3 3.7l4 4L4 20H0v-4L12.3 3.7zm1.4-1.4L16 0l4 4-2.3 2.3-4-4z\"/>,\"education\":<path d=\"M3.33 8L10 12l10-6-10-6L0 6h10v2H3.33zM0 8v8l2-2.22V9.2L0 8zm10 12l-5-3-2-1.2v-6l7 4.2 7-4.2v6L10 20z\"/>,\"envelope\":<path d=\"M18 2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2h16zm-4.37 9.1L20 16v-2l-5.12-3.9L20 6V4l-10 8L0 4v2l5.12 4.1L0 14v2l6.37-4.9L10 14l3.63-2.9z\"/>,\"exclamation-outline\":<path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 5h2v6H9V5zm0 8h2v2H9v-2z\"/>,\"exclamation-solid\":<path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zM9 5v6h2V5H9zm0 8v2h2v-2H9z\"/>,\"explore\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zM7.88 7.88l-3.54 7.78 7.78-3.54 3.54-7.78-7.78 3.54zM10 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"/>,\"factory\":<path d=\"M10.5 20H0V7l5 3.33V7l5 3.33V7l5 3.33V0h5v20h-9.5z\"/>,\"fast-forward\":<path d=\"M1 5l9 5-9 5V5zm9 0l9 5-9 5V5z\"/>,\"fast-rewind\":<path d=\"M19 5v10l-9-5 9-5zm-9 0v10l-9-5 9-5z\"/>,\"film\":<path d=\"M0 4c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm6 0v12h8V4H6zM2 5v2h2V5H2zm0 4v2h2V9H2zm0 4v2h2v-2H2zm14-8v2h2V5h-2zm0 4v2h2V9h-2zm0 4v2h2v-2h-2zM8 7l5 3-5 3V7z\"/>,\"filter\":<path d=\"M12 12l8-8V0H0v4l8 8v8l4-4v-4z\"/>,\"flag\":<path d=\"M7.667 12H2v8H0V0h12l.333 2H20l-3 6 3 6H8l-.333-2z\"/>,\"flashlight\":<path d=\"M13 7v11a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V7L5 5V3h10v2l-2 2zM9 8v1a1 1 0 1 0 2 0V8a1 1 0 0 0-2 0zM5 0h10v2H5V0z\"/>,\"folder-outline-add\":<path d=\"M0 4c0-1.1.9-2 2-2h7l2 2h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2 2v10h16V6H2zm7 4V8h2v2h2v2h-2v2H9v-2H7v-2h2z\"/>,\"folder-outline\":<path d=\"M0 4c0-1.1.9-2 2-2h7l2 2h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2 2v10h16V6H2z\"/>,\"folder\":<path d=\"M0 4c0-1.1.9-2 2-2h7l2 2h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4z\"/>,\"format-bold\":<path d=\"M3 19V1h8a5 5 0 0 1 3.88 8.16A5.5 5.5 0 0 1 11.5 19H3zm7.5-8H7v5h3.5a2.5 2.5 0 1 0 0-5zM7 4v4h3a2 2 0 1 0 0-4H7z\"/>,\"format-font-size\":<path d=\"M16 9v8h-2V9h-4V7h10v2h-4zM8 5v12H6V5H0V3h15v2H8z\"/>,\"format-italic\":<path d=\"M8 1h9v2H8V1zm3 2h3L8 17H5l6-14zM2 17h9v2H2v-2z\"/>,\"format-text-size\":<path d=\"M16 9v8h-2V9h-4V7h10v2h-4zM8 5v12H6V5H0V3h15v2H8z\"/>,\"format-underline\":<path d=\"M16 9A6 6 0 1 1 4 9V1h3v8a3 3 0 0 0 6 0V1h3v8zM2 17h16v2H2v-2z\"/>,\"forward-step\":<path d=\"M13 5h3v10h-3V5zM4 5l9 5-9 5V5z\"/>,\"forward\":<path d=\"M1 5l9 5-9 5V5zm9 0l9 5-9 5V5z\"/>,\"gift\":<path d=\"M14.83 4H20v6h-1v10H1V10H0V4h5.17A3 3 0 0 1 10 .76 3 3 0 0 1 14.83 4zM8 10H3v8h5v-8zm4 0v8h5v-8h-5zM8 6H2v2h6V6zm4 0v2h6V6h-6zM8 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm4 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\"/>,\"globe\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm2-2.25a8 8 0 0 0 4-2.46V9a2 2 0 0 1-2-2V3.07a7.95 7.95 0 0 0-3-1V3a2 2 0 0 1-2 2v1a2 2 0 0 1-2 2v2h3a2 2 0 0 1 2 2v5.75zm-4 0V15a2 2 0 0 1-2-2v-1h-.5A1.5 1.5 0 0 1 4 10.5V8H2.25A8.01 8.01 0 0 0 8 17.75z\"/>,\"hand-stop\":<path d=\"M17 16a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4.01V4a1 1 0 0 1 1-1 1 1 0 0 1 1 1v6h1V2a1 1 0 0 1 1-1 1 1 0 0 1 1 1v8h1V1a1 1 0 1 1 2 0v9h1V2a1 1 0 0 1 1-1 1 1 0 0 1 1 1v13h1V9a1 1 0 0 1 1-1h1v8z\"/>,\"hard-drive\":<path d=\"M2 2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm10.4 5.6A5 5 0 1 0 15 12V5l-2.6 2.6zM10 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zM6 3v2h4V3H6zM4 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 16a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm12 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0-16a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\"/>,\"headphones\":<path d=\"M16 8A6 6 0 1 0 4 8v11H2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2V8a8 8 0 1 1 16 0v3a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2V8zm-4 2h3v10h-3V10zm-7 0h3v10H5V10z\"/>,\"heart\":<path d=\"M10 3.22l-.61-.6a5.5 5.5 0 0 0-7.78 7.77L10 18.78l8.39-8.4a5.5 5.5 0 0 0-7.78-7.77l-.61.61z\"/>,\"home\":<path d=\"M8 20H3V10H0L10 0l10 10h-3v10h-5v-6H8v6z\"/>,\"hot\":<path d=\"M10 0s8 7.58 8 12a8 8 0 1 1-16 0c0-1.5.91-3.35 2.12-5.15A3 3 0 0 0 10 6V0zM8 0a3 3 0 1 0 0 6V0z\"/>,\"hour-glass\":<path d=\"M3 18a7 7 0 0 1 4-6.33V8.33A7 7 0 0 1 3 2H1V0h18v2h-2a7 7 0 0 1-4 6.33v3.34A7 7 0 0 1 17 18h2v2H1v-2h2zM5 2a5 5 0 0 0 4 4.9V10h2V6.9A5 5 0 0 0 15 2H5z\"/>,\"inbox-check\":<path d=\"M0 2C0 .9.9 0 2 0h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm14 12h4V2H2v12h4c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2zM5 9l2-2 2 2 4-4 2 2-6 6-4-4z\"/>,\"inbox-download\":<path d=\"M0 2C0 .9.9 0 2 0h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm14 12h4V2H2v12h4c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2zM9 8V5h2v3h3l-4 4-4-4h3z\"/>,\"inbox-full\":<path d=\"M14 14h4V2H2v12h4c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2zM0 2C0 .9.9 0 2 0h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm4 2h12v2H4V4zm0 3h12v2H4V7zm0 3h12v2H4v-2z\"/>,\"inbox\":<path d=\"M0 2C0 .9.9 0 2 0h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm14 12h4V2H2v12h4c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2z\"/>,\"indent-decrease\":<path d=\"M1 1h18v2H1V1zm6 8h12v2H7V9zm-6 8h18v2H1v-2zM7 5h12v2H7V5zm0 8h12v2H7v-2zM5 6v8l-4-4 4-4z\"/>,\"indent-increase\":<path d=\"M1 1h18v2H1V1zm6 8h12v2H7V9zm-6 8h18v2H1v-2zM7 5h12v2H7V5zm0 8h12v2H7v-2zM1 6l4 4-4 4V6z\"/>,\"information-outline\":<path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\"/>,\"information-solid\":<path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zM9 11v4h2V9H9v2zm0-6v2h2V5H9z\"/>,\"key\":<path d=\"M12.26 11.74L10 14H8v2H6v2l-2 2H0v-4l8.26-8.26a6 6 0 1 1 4 4zm4.86-4.62A3 3 0 0 0 15 2a3 3 0 0 0-2.12.88l4.24 4.24z\"/>,\"keyboard\":<path d=\"M0 6c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6zm2 0v2h2V6H2zm1 3v2h2V9H3zm-1 3v2h2v-2H2zm3 0v2h10v-2H5zm11 0v2h2v-2h-2zM6 9v2h2V9H6zm3 0v2h2V9H9zm3 0v2h2V9h-2zm3 0v2h2V9h-2zM5 6v2h2V6H5zm3 0v2h2V6H8zm3 0v2h2V6h-2zm3 0v2h4V6h-4z\"/>,\"layers\":<path d=\"M10 1l10 6-10 6L0 7l10-6zm6.67 10L20 13l-10 6-10-6 3.33-2L10 15l6.67-4z\"/>,\"library\":<path d=\"M0 6l10-6 10 6v2H0V6zm0 12h20v2H0v-2zm2-2h16v2H2v-2zm0-8h4v8H2V8zm6 0h4v8H8V8zm6 0h4v8h-4V8z\"/>,\"light-bulb\":<path d=\"M7 13.33a7 7 0 1 1 6 0V16H7v-2.67zM7 17h6v1.5c0 .83-.67 1.5-1.5 1.5h-3A1.5 1.5 0 0 1 7 18.5V17zm2-5.1V14h2v-2.1a5 5 0 1 0-2 0z\"/>,\"link\":<path d=\"M9.26 13a2 2 0 0 1 .01-2.01A3 3 0 0 0 9 5H5a3 3 0 0 0 0 6h.08a6.06 6.06 0 0 0 0 2H5A5 5 0 0 1 5 3h4a5 5 0 0 1 .26 10zm1.48-6a2 2 0 0 1-.01 2.01A3 3 0 0 0 11 15h4a3 3 0 0 0 0-6h-.08a6.06 6.06 0 0 0 0-2H15a5 5 0 0 1 0 10h-4a5 5 0 0 1-.26-10z\"/>,\"list-add\":<path d=\"M15 9h-3v2h3v3h2v-3h3V9h-3V6h-2v3zM0 3h10v2H0V3zm0 8h10v2H0v-2zm0-4h10v2H0V7zm0 8h10v2H0v-2z\"/>,\"list-bullet\":<path d=\"M1 4h2v2H1V4zm4 0h14v2H5V4zM1 9h2v2H1V9zm4 0h14v2H5V9zm-4 5h2v2H1v-2zm4 0h14v2H5v-2z\"/>,\"list\":<path d=\"M1 4h2v2H1V4zm4 0h14v2H5V4zM1 9h2v2H1V9zm4 0h14v2H5V9zm-4 5h2v2H1v-2zm4 0h14v2H5v-2z\"/>,\"load-balancer\":<path d=\"M17 12h-6v4h1v4H8v-4h1v-4H3v4h1v4H0v-4h1v-4a2 2 0 0 1 2-2h6V6H7V0h6v6h-2v4h6a2 2 0 0 1 2 2v4h1v4h-4v-4h1v-4z\"/>,\"location-current\":<path d=\"M0 0l20 8-8 4-2 8z\"/>,\"location-food\":<path d=\"M18 11v7a2 2 0 0 1-4 0v-5h-2V3a3 3 0 0 1 3-3h3v11zM4 10a2 2 0 0 1-2-2V1a1 1 0 0 1 2 0v4h1V1a1 1 0 0 1 2 0v4h1V1a1 1 0 0 1 2 0v7a2 2 0 0 1-2 2v8a2 2 0 0 1-4 0v-8z\"/>,\"location-gas-station\":<path d=\"M13 18h1v2H0v-2h1V2c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v16zM3 2v6h8V2H3zm10 8h1a2 2 0 0 1 2 2v3a1 1 0 0 0 2 0v-5l-2-2V6l-2-2 1-1 5 5v7a3 3 0 0 1-6 0v-3h-1v-2z\"/>,\"location-hotel\":<path d=\"M2 12h18v6h-2v-2H2v2H0V2h2v10zm8-6h8a2 2 0 0 1 2 2v3H10V6zm-4 5a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\"/>,\"location-marina\":<path d=\"M8 1.88V0h2v16h10l-4 4H2l-2-4h8v-2H0v-.26A24.03 24.03 0 0 0 8 1.88zM19.97 14H10v-.36A11.94 11.94 0 0 0 10 .36v-.2A16.01 16.01 0 0 1 19.97 14z\"/>,\"location-park\":<path d=\"M5.33 12.77A4 4 0 1 1 3 5.13V5a4 4 0 0 1 5.71-3.62 3.5 3.5 0 0 1 6.26 1.66 2.5 2.5 0 0 1 2 2.08 4 4 0 1 1-2.7 7.49A5.02 5.02 0 0 1 12 14.58V18l2 1v1H6v-1l2-1v-3l-2.67-2.23zM5 10l3 3v-3H5z\"/>,\"location-restroom\":<path d=\"M12 16H9l2-4.5V9c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v2.5l2 4.5h-3v4h-4v-4zm-5-3h2V9a2 2 0 0 0-2-2H3a2 2 0 0 0-2 2v4h2v7h4v-7zM5 6a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm9 0a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\"/>,\"location-shopping\":<path d=\"M16 6v2h2l2 12H0L2 8h2V6a6 6 0 1 1 12 0zm-2 0a4 4 0 1 0-8 0v2h8V6zM4 10v2h2v-2H4zm10 0v2h2v-2h-2z\"/>,\"location\":<path d=\"M10 20S3 10.87 3 7a7 7 0 1 1 14 0c0 3.87-7 13-7 13zm0-11a2 2 0 1 0 0-4 2 2 0 0 0 0 4z\"/>,\"lock-closed\":<path d=\"M4 8V6a6 6 0 1 1 12 0v2h1a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h1zm5 6.73V17h2v-2.27a2 2 0 1 0-2 0zM7 6v2h6V6a3 3 0 0 0-6 0z\"/>,\"lock-open\":<path d=\"M4 8V6a6 6 0 1 1 12 0h-3v2h4a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h1zm5 6.73V17h2v-2.27a2 2 0 1 0-2 0zM7 6v2h6V6a3 3 0 0 0-6 0z\"/>,\"map\":<path d=\"M0 0l6 4 8-4 6 4v16l-6-4-8 4-6-4V0zm7 6v11l6-3V3L7 6z\"/>,\"menu\":<path d=\"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z\"/>,\"mic\":<path d=\"M9 18v-1.06A8 8 0 0 1 2 9h2a6 6 0 1 0 12 0h2a8 8 0 0 1-7 7.94V18h3v2H6v-2h3zM6 4a4 4 0 1 1 8 0v5a4 4 0 1 1-8 0V4z\"/>,\"minus-outline\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm5-9v2H5V9h10z\"/>,\"minus-solid\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm5-11H5v2h10V9z\"/>,\"mobile-devices\":<path d=\"M17 6V5h-2V2H3v14h5v4h3.25H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6zm-5.75 14H3a2 2 0 0 1-2-2V2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5.75zM11 8v8h6V8h-6zm3 11a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\"/>,\"mood-happy-outline\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM6.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm7 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm2.16 3a6 6 0 0 1-11.32 0h11.32z\"/>,\"mood-happy-solid\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zM6.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm7 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm2.16 3H4.34a6 6 0 0 0 11.32 0z\"/>,\"mood-neutral-outline\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM6.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm7 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM7 13h6a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2z\"/>,\"mood-neutral-solid\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zM6.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm7 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM7 13a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2H7z\"/>,\"mood-sad-outline\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM6.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm7 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm2.16 6H4.34a6 6 0 0 1 11.32 0z\"/>,\"mood-sad-solid\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zM6.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm7 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm2.16 6a6 6 0 0 0-11.32 0h11.32z\"/>,\"mouse\":<path d=\"M4 9V6A6 6 0 0 1 9 .08V9H4zm0 2v3a6 6 0 1 0 12 0v-3H4zm12-2V6a6 6 0 0 0-5-5.92V9h5z\"/>,\"move\":<path d=\"M94.828,45.171L80.687,31.029c-1.562-1.562-4.095-1.562-5.657,0c-1.562,1.562-1.562,4.095,0,5.657L82.344,44H52V13.657  l7.313,7.313c1.562,1.562,4.095,1.562,5.657,0c1.562-1.562,1.562-4.095,0-5.657L50.828,1.171c-1.562-1.562-4.095-1.562-5.657,0  L31.029,15.314c-1.562,1.562-1.562,4.095,0,5.657s4.095,1.562,5.657,0L44,13.657V44H13.657l7.313-7.313  c1.562-1.562,1.562-4.095,0-5.657s-4.095-1.562-5.657,0L1.171,45.171c-1.562,1.562-1.562,4.095,0,5.657l14.143,14.143  c1.562,1.562,4.095,1.562,5.657,0c1.562-1.562,1.562-4.095,0-5.657L13.657,52H44v30.344l-7.313-7.314  c-1.562-1.562-4.095-1.562-5.657,0c-1.562,1.562-1.562,4.095,0,5.657l14.142,14.142c1.562,1.562,4.095,1.562,5.657,0l14.143-14.142  c1.562-1.562,1.562-4.095,0-5.657c-1.562-1.562-4.095-1.562-5.657,0L52,82.343V52h30.343l-7.313,7.313  c-1.562,1.562-1.562,4.095,0,5.657c1.562,1.562,4.095,1.562,5.657,0l14.142-14.143C96.391,49.267,96.391,46.733,94.828,45.171z\" />,\"music-album\":<path d=\"M0 0h20v20H0V0zm10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-5a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\"/>,\"music-artist\":<path d=\"M15.75 8l-3.74-3.75a3.99 3.99 0 0 1 6.82-3.08A4 4 0 0 1 15.75 8zm-13.9 7.3l9.2-9.19 2.83 2.83-9.2 9.2-2.82-2.84zm-1.4 2.83l2.11-2.12 1.42 1.42-2.12 2.12-1.42-1.42zM10 15l2-2v7h-2v-5z\"/>,\"music-notes\":<path d=\"M20 2.5V0L6 2v12.17A3 3 0 0 0 5 14H3a3 3 0 0 0 0 6h2a3 3 0 0 0 3-3V5.71L18 4.3v7.88a3 3 0 0 0-1-.17h-2a3 3 0 0 0 0 6h2a3 3 0 0 0 3-3V2.5z\"/>,\"music-playlist\":<path d=\"M16 17a3 3 0 0 1-3 3h-2a3 3 0 0 1 0-6h2a3 3 0 0 1 1 .17V1l6-1v4l-4 .67V17zM0 3h12v2H0V3zm0 4h12v2H0V7zm0 4h12v2H0v-2zm0 4h6v2H0v-2z\"/>,\"navigation-more\":<path d=\"M4 12a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm6 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm6 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z\"/>,\"network\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm7.75-8a8.01 8.01 0 0 0 0-4h-3.82a28.81 28.81 0 0 1 0 4h3.82zm-.82 2h-3.22a14.44 14.44 0 0 1-.95 3.51A8.03 8.03 0 0 0 16.93 14zm-8.85-2h3.84a24.61 24.61 0 0 0 0-4H8.08a24.61 24.61 0 0 0 0 4zm.25 2c.41 2.4 1.13 4 1.67 4s1.26-1.6 1.67-4H8.33zm-6.08-2h3.82a28.81 28.81 0 0 1 0-4H2.25a8.01 8.01 0 0 0 0 4zm.82 2a8.03 8.03 0 0 0 4.17 3.51c-.42-.96-.74-2.16-.95-3.51H3.07zm13.86-8a8.03 8.03 0 0 0-4.17-3.51c.42.96.74 2.16.95 3.51h3.22zm-8.6 0h3.34c-.41-2.4-1.13-4-1.67-4S8.74 3.6 8.33 6zM3.07 6h3.22c.2-1.35.53-2.55.95-3.51A8.03 8.03 0 0 0 3.07 6z\"/>,\"news-paper\":<path d=\"M16 2h4v15a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V0h16v2zm0 2v13a1 1 0 0 0 1 1 1 1 0 0 0 1-1V4h-2zM2 2v15a1 1 0 0 0 1 1h11.17a2.98 2.98 0 0 1-.17-1V2H2zm2 8h8v2H4v-2zm0 4h8v2H4v-2zM4 4h8v4H4V4z\"/>,\"notification\":<path d=\"M4 8a6 6 0 0 1 4.03-5.67 2 2 0 1 1 3.95 0A6 6 0 0 1 16 8v6l3 2v1H1v-1l3-2V8zm8 10a2 2 0 1 1-4 0h4z\"/>,\"notifications-outline\":<path d=\"M6 8v7h8V8a4 4 0 1 0-8 0zm2.03-5.67a2 2 0 1 1 3.95 0A6 6 0 0 1 16 8v6l3 2v1H1v-1l3-2V8a6 6 0 0 1 4.03-5.67zM12 18a2 2 0 1 1-4 0h4z\"/>,\"notifications\":<path d=\"M4 8a6 6 0 0 1 4.03-5.67 2 2 0 1 1 3.95 0A6 6 0 0 1 16 8v6l3 2v1H1v-1l3-2V8zm8 10a2 2 0 1 1-4 0h4z\"/>,\"paste\":<path d=\"M10.5 20H2a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h1V3l2.03-.4a3 3 0 0 1 5.94 0L13 3v1h1a2 2 0 0 1 2 2v1h-2V6h-1v1H3V6H2v12h5v2h3.5zM8 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm2 4h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2zm0 2v8h8v-8h-8z\"/>,\"pause-outline\":<path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM7 6h2v8H7V6zm4 0h2v8h-2V6z\"/>,\"pause-solid\":<path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zM7 6v8h2V6H7zm4 0v8h2V6h-2z\"/>,\"pause\":<path d=\"M5 4h3v12H5V4zm7 0h3v12h-3V4z\"/>,\"pen-tool\":<path d=\"M11 9.27V0l6 11-4 6H7l-4-6L9 0v9.27a2 2 0 1 0 2 0zM6 18h8v2H6v-2z\"/>,\"phone\":<path d=\"M20 18.35V19a1 1 0 0 1-1 1h-2A17 17 0 0 1 0 3V1a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v4c0 .56-.31 1.31-.7 1.7L3.16 8.84c1.52 3.6 4.4 6.48 8 8l2.12-2.12c.4-.4 1.15-.71 1.7-.71H19a1 1 0 0 1 .99 1v3.35z\"/>,\"photo\":<path d=\"M0 4c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm11 9l-3-3-6 6h16l-5-5-2 2zm4-4a2 2 0 1 0 0-4 2 2 0 0 0 0 4z\"/>,\"php-elephant\":<path fillRule=\"evenodd\" d=\"M10 12v8A10 10 0 0 1 8.17.17L10 2h5a5 5 0 0 1 5 4.99v9.02A4 4 0 0 1 16 20v-2a2 2 0 1 0 0-4h-4l-2-2zm5.5-3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"/>,\"pin\":<path d=\"M11 12h6v-1l-3-1V2l3-1V0H3v1l3 1v8l-3 1v1h6v7l1 1 1-1v-7z\"/>,\"play-outline\":<path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM7 6l8 4-8 4V6z\"/>,\"play\":<path d=\"M4 4l12 6-12 6z\"/>,\"playlist\":<path d=\"M16 17a3 3 0 0 1-3 3h-2a3 3 0 0 1 0-6h2a3 3 0 0 1 1 .17V1l6-1v4l-4 .67V17zM0 3h12v2H0V3zm0 4h12v2H0V7zm0 4h12v2H0v-2zm0 4h6v2H0v-2z\"/>,\"plugin\":<path d=\"M20 14v4a2 2 0 0 1-2 2h-4v-2a2 2 0 0 0-2-2 2 2 0 0 0-2 2v2H6a2 2 0 0 1-2-2v-4H2a2 2 0 0 1-2-2 2 2 0 0 1 2-2h2V6c0-1.1.9-2 2-2h4V2a2 2 0 0 1 2-2 2 2 0 0 1 2 2v2h4a2 2 0 0 1 2 2v4h-2a2 2 0 0 0-2 2 2 2 0 0 0 2 2h2z\"/>,\"plus-circle\":<path d=\"M12 9V12M12 12V15M12 12H15M12 12H9M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z\" stroke=\"#4A5568\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>,\"plus\":<path d=\"M12 6V12M12 12V18M12 12H18M12 12L6 12\" stroke=\"#374151\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>,\"portfolio\":<path d=\"M9 12H1v6a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-6h-8v2H9v-2zm0-1H0V5c0-1.1.9-2 2-2h4V2a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1h4a2 2 0 0 1 2 2v6h-9V9H9v2zm3-8V2H8v1h4z\"/>,\"printer\":<path d=\"M4 16H0V6h20v10h-4v4H4v-4zm2-4v6h8v-6H6zM4 0h12v5H4V0zM2 8v2h2V8H2zm4 0v2h2V8H6z\"/>,\"pylon\":<path d=\"M17.4 18H20v2H0v-2h2.6L8 0h4l5.4 18zm-3.2-4H5.8l-1.2 4h10.8l-1.2-4zm-2.4-8H8.2L7 10h6l-1.2-4z\"/>,\"question\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm2-13c0 .28-.21.8-.42 1L10 9.58c-.57.58-1 1.6-1 2.42v1h2v-1c0-.29.21-.8.42-1L13 9.42c.57-.58 1-1.6 1-2.42a4 4 0 1 0-8 0h2a2 2 0 1 1 4 0zm-3 8v2h2v-2H9z\"/>,\"queue\":<path d=\"M0 2h20v4H0V2zm0 8h20v2H0v-2zm0 6h20v2H0v-2z\"/>,\"radar copy 2\":<path d=\"M12 10a2 2 0 0 1-3.41 1.41A2 2 0 0 1 10 8V0a9.97 9.97 0 0 1 10 10h-8zm7.9 1.41A10 10 0 1 1 8.59.1v2.03a8 8 0 1 0 9.29 9.29h2.02zm-4.07 0a6 6 0 1 1-7.25-7.25v2.1a3.99 3.99 0 0 0-1.4 6.57 4 4 0 0 0 6.56-1.42h2.1z\"/>,\"radar\":<path d=\"M12 10a2 2 0 0 1-3.41 1.41A2 2 0 0 1 10 8V0a9.97 9.97 0 0 1 10 10h-8zm7.9 1.41A10 10 0 1 1 8.59.1v2.03a8 8 0 1 0 9.29 9.29h2.02zm-4.07 0a6 6 0 1 1-7.25-7.25v2.1a3.99 3.99 0 0 0-1.4 6.57 4 4 0 0 0 6.56-1.42h2.1z\"/>,\"radio\":<path d=\"M20 9v9a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8c0-1.1.9-2 2-2h13.8L.74 1.97 1.26.03 20 5.06V9zm-5 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6zM2 8v2h16V8H2zm1.5 10a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm6.5-1a2 2 0 1 1 0-4 2 2 0 0 1 0 4z\"/>,\"redo\":<path d=\"M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3z\" />,\"refresh\":<path d=\"M10 3v2a5 5 0 0 0-3.54 8.54l-1.41 1.41A7 7 0 0 1 10 3zm4.95 2.05A7 7 0 0 1 10 17v-2a5 5 0 0 0 3.54-8.54l1.41-1.41zM10 20l-4-4 4-4v8zm0-12V0l4 4-4 4z\"/>,\"reload\":<path d=\"M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42 1.42zM12 10h8l-4 4-4-4z\"/>,\"reply-all\":<path d=\"M18 17v-2.99A4 4 0 0 0 14 10h-3v5L5 9l6-6v5h3a6 6 0 0 1 6 6v3h-2zM6 6V3L0 9l6 6v-3L3 9l3-3z\"/>,\"reply\":<path d=\"M15 17v-2.99A4 4 0 0 0 11 10H8v5L2 9l6-6v5h3a6 6 0 0 1 6 6v3h-2z\"/>,\"repost\":<path d=\"M5 4a2 2 0 0 0-2 2v6H0l4 4 4-4H5V6h7l2-2H5zm10 4h-3l4-4 4 4h-3v6a2 2 0 0 1-2 2H6l2-2h7V8z\"/>,\"save-disk\":<path d=\"M0 2C0 .9.9 0 2 0h14l4 4v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm5 0v6h10V2H5zm6 1h3v4h-3V3z\"/>,\"screen-full\":<path d=\"M2.8 15.8L0 13v7h7l-2.8-2.8 4.34-4.32-1.42-1.42L2.8 15.8zM17.2 4.2L20 7V0h-7l2.8 2.8-4.34 4.32 1.42 1.42L17.2 4.2zm-1.4 13L13 20h7v-7l-2.8 2.8-4.32-4.34-1.42 1.42 4.33 4.33zM4.2 2.8L7 0H0v7l2.8-2.8 4.32 4.34 1.42-1.42L4.2 2.8z\"/>,\"search\":<path d=\"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z\"/>,\"send\":<path d=\"M0 0l20 10L0 20V0zm0 8v4l10-2L0 8z\"/>,\"servers\":<path d=\"M0 2C0 .9.9 0 2 0h16a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm0 7c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V9zm0 7c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2zM12 2v2h2V2h-2zm4 0v2h2V2h-2zm-4 7v2h2V9h-2zm4 0v2h2V9h-2zm-4 7v2h2v-2h-2zm4 0v2h2v-2h-2z\"/>,\"share-01\":<path d=\"M4 10c0-1.1.9-2 2-2h8c1.1 0 2 .9 2 2v8c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2v-8zm2 0v8h8v-8h-2V8H8v2H6zm3-6.17V16h2V3.83l3.07 3.07 1.42-1.41L10 0l-.7.7L4.5 5.5l1.42 1.4L9 3.84z\"/>,\"share-alt\":<path d=\"M5.08 12.16A2.99 2.99 0 0 1 0 10a3 3 0 0 1 5.08-2.16l8.94-4.47a3 3 0 1 1 .9 1.79L5.98 9.63a3.03 3.03 0 0 1 0 .74l8.94 4.47A2.99 2.99 0 0 1 20 17a3 3 0 1 1-5.98-.37l-8.94-4.47z\"/>,\"share\":<path d=\"M4 10c0-1.1.9-2 2-2h8c1.1 0 2 .9 2 2v8c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2v-8zm2 0v8h8v-8h-2V8H8v2H6zm3-6.17V16h2V3.83l3.07 3.07 1.42-1.41L10 0l-.7.7-4.8 4.8 1.42 1.4L9 3.84z\"/>,\"shield\":<path d=\"M19 11a7.5 7.5 0 0 1-3.5 5.94L10 20l-5.5-3.06A7.5 7.5 0 0 1 1 11V3c3.38 0 6.5-1.12 9-3 2.5 1.89 5.62 3 9 3v8zm-9 1.08l2.92 2.04-1.03-3.41 2.84-2.15-3.56-.08L10 5.12 8.83 8.48l-3.56.08L8.1 10.7l-1.03 3.4L10 12.09z\"/>,\"shopping-cart\":<path d=\"M4 2h16l-3 9H4a1 1 0 1 0 0 2h13v2H4a3 3 0 0 1 0-6h.33L3 5 2 2H0V0h3a1 1 0 0 1 1 1v1zm1 18a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm10 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z\"/>,\"show-sidebar\":<path d=\"M7 3H2v14h5V3zm2 0v14h9V3H9zM0 3c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm3 1h3v2H3V4zm0 3h3v2H3V7zm0 3h3v2H3v-2z\"/>,\"shuffle\":<path d=\"M6.59 12.83L4.4 15c-.58.58-1.59 1-2.4 1H0v-2h2c.29 0 .8-.2 1-.41l2.17-2.18 1.42 1.42zM16 4V1l4 4-4 4V6h-2c-.29 0-.8.2-1 .41l-2.17 2.18L9.4 7.17 11.6 5c.58-.58 1.59-1 2.41-1h2zm0 10v-3l4 4-4 4v-3h-2c-.82 0-1.83-.42-2.41-1l-8.6-8.59C2.8 6.21 2.3 6 2 6H0V4h2c.82 0 1.83.42 2.41 1l8.6 8.59c.2.2.7.41.99.41h2z\"/>,\"stand-by\":<path fillRule=\"evenodd\" d=\"M4.16 4.16l1.42 1.42A6.99 6.99 0 0 0 10 18a7 7 0 0 0 4.42-12.42l1.42-1.42a9 9 0 1 1-11.69 0zM9 0h2v8H9V0z\"/>,\"star-full\":<path d=\"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z\"/>,\"station\":<path d=\"M9 11.73a2 2 0 1 1 2 0V20H9v-8.27zm5.24 2.51l-1.41-1.41A3.99 3.99 0 0 0 10 6a4 4 0 0 0-2.83 6.83l-1.41 1.41a6 6 0 1 1 8.49 0zm2.83 2.83l-1.41-1.41a8 8 0 1 0-11.31 0l-1.42 1.41a10 10 0 1 1 14.14 0z\"/>,\"step-backward\":<path d=\"M4 5h3v10H4V5zm12 0v10l-9-5 9-5z\"/>,\"step-forward\":<path d=\"M13 5h3v10h-3V5zM4 5l9 5-9 5V5z\"/>,\"stethoscope\":<path d=\"M17 10.27V4.99a1 1 0 0 0-2 0V15a5 5 0 0 1-10 0v-1.08A6 6 0 0 1 0 8V2C0 .9.9 0 2 0h1a1 1 0 0 1 1 1 1 1 0 0 1-1 1H2v6a4 4 0 1 0 8 0V2H9a1 1 0 0 1-1-1 1 1 0 0 1 1-1h1a2 2 0 0 1 2 2v6a6 6 0 0 1-5 5.92V15a3 3 0 0 0 6 0V5a3 3 0 0 1 6 0v5.27a2 2 0 1 1-2 0z\"/>,\"store-front\":<path d=\"M18 9.87V20H2V9.87a4.25 4.25 0 0 0 3-.38V14h10V9.5a4.26 4.26 0 0 0 3 .37zM3 0h4l-.67 6.03A3.43 3.43 0 0 1 3 9C1.34 9 .42 7.73.95 6.15L3 0zm5 0h4l.7 6.3c.17 1.5-.91 2.7-2.42 2.7h-.56A2.38 2.38 0 0 1 7.3 6.3L8 0zm5 0h4l2.05 6.15C19.58 7.73 18.65 9 17 9a3.42 3.42 0 0 1-3.33-2.97L13 0z\"/>,\"stroke-width\":<path d=\"M0 0h20v5H0V0zm0 7h20v4H0V7zm0 6h20v3H0v-3zm0 5h20v2H0v-2z\"/>,\"subdirectory-left\":<path d=\"M18 12v1H8v5l-6-6 6-6v5h8V2h2z\"/>,\"subdirectory-right\":<path d=\"M3.5 13H12v5l6-6-6-6v5H4V2H2v11z\"/>,\"swap\":<path d=\"M9 6a4 4 0 1 1 8 0v8h3l-4 4-4-4h3V6a2 2 0 0 0-2-2 2 2 0 0 0-2 2v8a4 4 0 1 1-8 0V6H0l4-4 4 4H5v8a2 2 0 0 0 2 2 2 2 0 0 0 2-2V6z\"/>,\"tablet\":<path d=\"M2 2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm2 0v14h12V2H4zm6 17a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\"/>,\"tag\":<path d=\"M0 10V2l2-2h8l10 10-10 10L0 10zm4.5-4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"/>,\"target\":<path d=\"M17.94 11H13V9h4.94A8 8 0 0 0 11 2.06V7H9V2.06A8 8 0 0 0 2.06 9H7v2H2.06A8 8 0 0 0 9 17.94V13h2v4.94A8 8 0 0 0 17.94 11zM10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20z\"/>,\"text-box\":<path d=\"M0 0h6v6H0V0zm2 2v2h2V2H2zm12-2h6v6h-6V0zm2 2v2h2V2h-2zm-2 12h6v6h-6v-6zm2 2v2h2v-2h-2zM0 14h6v6H0v-6zm2 2v2h2v-2H2zM6 2h8v2H6V2zm0 14h8v2H6v-2zM16 6h2v8h-2V6zM2 6h2v8H2V6zm5 1h6v2H7V7zm2 2h2v4H9V9z\"/>,\"text-decoration\":<path d=\"M12 5h-2v12H8V3h8v2h-2v12h-2V5zM8 3a4 4 0 1 0 0 8V3z\"/>,\"thermometer\":<path d=\"M9 11.17V7h2v4.17a3 3 0 1 1-2 0zm-1-.63a4 4 0 1 0 4 0V4a2 2 0 1 0-4 0v6.53zM6 9.53V4a4 4 0 0 1 8 0v5.53A5.99 5.99 0 0 1 10 20 6 6 0 0 1 6 9.53z\"/>,\"thumbs-down\":<path d=\"M11 20a2 2 0 0 1-2-2v-6H2a2 2 0 0 1-2-2V8l2.3-6.12A3.11 3.11 0 0 1 5 0h8a2 2 0 0 1 2 2v8l-3 7v3h-1zm6-10V0h3v10h-3z\"/>,\"thumbs-up\":<path d=\"M11 0h1v3l3 7v8a2 2 0 0 1-2 2H5c-1.1 0-2.31-.84-2.7-1.88L0 12v-2a2 2 0 0 1 2-2h7V2a2 2 0 0 1 2-2zm6 10h3v10h-3V10z\"/>,\"ticket\":<path d=\"M20 12v5H0v-5a2 2 0 1 0 0-4V3h20v5a2 2 0 1 0 0 4zM3 5v10h14V5H3zm7 7.08l-2.92 2.04L8.1 10.7 5.27 8.56l3.56-.08L10 5.12l1.17 3.36 3.56.08-2.84 2.15 1.03 3.4L10 12.09z\"/>,\"time\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-7.59V4h2v5.59l3.95 3.95-1.41 1.41L9 10.41z\"/>,\"timer\":<path d=\"M16.32 7.1A8 8 0 1 1 9 4.06V2h2v2.06c1.46.18 2.8.76 3.9 1.62l1.46-1.46 1.42 1.42-1.46 1.45zM10 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12zM7 0h6v2H7V0zm5.12 8.46l1.42 1.42L10 13.4 8.59 12l3.53-3.54z\"/>,\"tools copy\":<path d=\"M10 0s8 7.58 8 12a8 8 0 1 1-16 0c0-1.5.91-3.35 2.12-5.15A3 3 0 0 0 10 6V0zM8 0a3 3 0 1 0 0 6V0z\"/>,\"translate\":<path d=\"M7.41 9l2.24 2.24-.83 2L6 10.4l-3.3 3.3-1.4-1.42L4.58 9l-.88-.88c-.53-.53-1-1.3-1.3-2.12h2.2c.15.28.33.53.51.7l.89.9.88-.88C7.48 6.1 8 4.84 8 4H0V2h5V0h2v2h5v2h-2c0 1.37-.74 3.15-1.7 4.12L7.4 9zm3.84 8L10 20H8l5-12h2l5 12h-2l-1.25-3h-5.5zm.83-2h3.84L14 10.4 12.08 15z\"/>,\"trash\":<path d=\"M6 2l2-2h4l2 2h4v2H2V2h4zM3 6h14l-1 14H4L3 6zm5 2v10h1V8H8zm3 0v10h1V8h-1z\"/>,\"travel-bus\":<path d=\"M13 18H7v1a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1a2 2 0 0 1-2-2V2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2v1a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-1zM4 5v6h5V5H4zm7 0v6h5V5h-5zM5 2v1h10V2H5zm.5 14a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm9 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"/>,\"travel-car\":<path d=\"M2 14v-3H1a1 1 0 0 1-1-1 1 1 0 0 1 1-1h1l4-7h8l4 7h1a1 1 0 0 1 1 1 1 1 0 0 1-1 1h-1v6a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-1H5v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-3zm13.86-5L13 4H7L4.14 9h11.72zM5.5 14a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm9 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"/>,\"travel-case\":<path d=\"M14 5h2v14H4V5h2V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1zm3 0h1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1V5zM3 5v14H2a2 2 0 0 1-2-2V7c0-1.1.9-2 2-2h1zm5-1v1h4V4H8z\"/>,\"travel-taxi-cab\":<path d=\"M12 3h2l4 7h1a1 1 0 0 1 1 1 1 1 0 0 1-1 1h-1v6a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-1H5v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-6H1a1 1 0 0 1-1-1 1 1 0 0 1 1-1h1l4-7h2V1h4v2zm3.86 7L13 5H7l-2.86 5h11.72zM5.5 15a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm9 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"/>,\"travel-train\":<path d=\"M12 18H8l-2 2H3l2-2a2 2 0 0 1-2-2V2c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2l2 2h-3l-2-2zM5 5v6h10V5H5zm1.5 11a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm7 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM8 2v1h4V2H8z\"/>,\"travel-walk\":<path d=\"M11 7l1.44 2.16c.31.47 1.01.84 1.57.84H17V8h-3l-1.44-2.16a5.94 5.94 0 0 0-1.4-1.4l-1.32-.88a1.72 1.72 0 0 0-1.7-.04L4 6v5h2V7l2-1-3 14h2l2.35-7.65L11 14v6h2v-8l-2.7-2.7L11 7zm1-3a2 2 0 1 0 0-4 2 2 0 0 0 0 4z\"/>,\"travel\":<path d=\"M14 5h2v14H4V5h2V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1zm3 0h1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1V5zM3 5v14H2a2 2 0 0 1-2-2V7c0-1.1.9-2 2-2h1zm5-1v1h4V4H8z\"/>,\"trophy\":<path d=\"M15 9a3 3 0 0 0 3-3h2a5 5 0 0 1-5.1 5 5 5 0 0 1-3.9 3.9V17l5 2v1H4v-1l5-2v-2.1A5 5 0 0 1 5.1 11H5a5 5 0 0 1-5-5h2a3 3 0 0 0 3 3V4H2v2H0V2h5V0h10v2h5v4h-2V4h-3v5z\"/>,\"tuning\":<path d=\"M17 16v4h-2v-4h-2v-3h6v3h-2zM1 9h6v3H1V9zm6-4h6v3H7V5zM3 0h2v8H3V0zm12 0h2v12h-2V0zM9 0h2v4H9V0zM3 12h2v8H3v-8zm6-4h2v12H9V8z\"/>,\"undo\":<path d=\"M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8z\"/>,\"upload\":<path d=\"M13 10v6H7v-6H2l8-8 8 8h-5zM0 18h20v2H0v-2z\"/>,\"usb\":<path d=\"M15 8v2h-4V4h2l-3-4-3 4h2v8H5V9.73a2 2 0 1 0-2 0V12a2 2 0 0 0 2 2h4v2.27a2 2 0 1 0 2 0V12h4a2 2 0 0 0 2-2V8h1V4h-4v4h1z\"/>,\"user-add\":<path d=\"M2 6H0v2h2v2h2V8h2V6H4V4H2v2zm7 0a3 3 0 0 1 6 0v2a3 3 0 0 1-6 0V6zm11 9.14A15.93 15.93 0 0 0 12 13c-2.91 0-5.65.78-8 2.14V18h16v-2.86z\"/>,\"user-group\":<path d=\"M7 8a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0 1c2.15 0 4.2.4 6.1 1.09L12 16h-1.25L10 20H4l-.75-4H2L.9 10.09A17.93 17.93 0 0 1 7 9zm8.31.17c1.32.18 2.59.48 3.8.92L18 16h-1.25L16 20h-3.96l.37-2h1.25l1.65-8.83zM13 0a4 4 0 1 1-1.33 7.76 5.96 5.96 0 0 0 0-7.52C12.1.1 12.53 0 13 0z\"/>,\"user-solid-circle\":<path d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zM7 6v2a3 3 0 1 0 6 0V6a3 3 0 1 0-6 0zm-3.65 8.44a8 8 0 0 0 13.3 0 15.94 15.94 0 0 0-13.3 0z\"/>,\"user-solid-square\":<path d=\"M0 2C0 .9.9 0 2 0h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm7 4v2a3 3 0 1 0 6 0V6a3 3 0 1 0-6 0zm11 9.14A15.93 15.93 0 0 0 10 13c-2.91 0-5.65.78-8 2.14V18h16v-2.86z\"/>,\"user\":<path d=\"M5 5a5 5 0 0 1 10 0v2A5 5 0 0 1 5 7V5zM0 16.68A19.9 19.9 0 0 1 10 14c3.64 0 7.06.97 10 2.68V20H0v-3.32z\"/>,\"vector\":<path d=\"M12 4h4.27a2 2 0 1 1 0 2h-2.14a9 9 0 0 1 4.84 7.25 2 2 0 1 1-2 .04 7 7 0 0 0-4.97-6V8H8v-.71a7 7 0 0 0-4.96 6 2 2 0 1 1-2-.04A9 9 0 0 1 5.86 6H3.73a2 2 0 1 1 0-2H8V3h4v1z\"/>,\"video-camera\":<path d=\"M16 7l4-4v14l-4-4v3a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v3zm-8 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm0-2a2 2 0 1 1 0-4 2 2 0 0 1 0 4z\"/>,\"view-carousel\":<path d=\"M16 16v2H4v-2H0V4h4V2h12v2h4v12h-4zM14 5.5V4H6v12h8V5.5zm2 .5v8h2V6h-2zM4 6H2v8h2V6z\"/>,\"view-column\":<path d=\"M12 4H8v12h4V4zm2 0v12h4V4h-4zM6 4H2v12h4V4zM0 2h20v16H0V2z\"/>,\"view-hide\":<path d=\"M12.81 4.36l-1.77 1.78a4 4 0 0 0-4.9 4.9l-2.76 2.75C2.06 12.79.96 11.49.2 10a11 11 0 0 1 12.6-5.64zm3.8 1.85c1.33 1 2.43 2.3 3.2 3.79a11 11 0 0 1-12.62 5.64l1.77-1.78a4 4 0 0 0 4.9-4.9l2.76-2.75zm-.25-3.99l1.42 1.42L3.64 17.78l-1.42-1.42L16.36 2.22z\"/>,\"view-list\":<path d=\"M0 3h20v2H0V3zm0 4h20v2H0V7zm0 4h20v2H0v-2zm0 4h20v2H0v-2z\"/>,\"view-show\":<path d=\"M.2 10a11 11 0 0 1 19.6 0A11 11 0 0 1 .2 10zm9.8 4a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm0-2a2 2 0 1 1 0-4 2 2 0 0 1 0 4z\"/>,\"view-tile\":<path d=\"M0 0h9v9H0V0zm2 2v5h5V2H2zm-2 9h9v9H0v-9zm2 2v5h5v-5H2zm9-13h9v9h-9V0zm2 2v5h5V2h-5zm-2 9h9v9h-9v-9zm2 2v5h5v-5h-5z\"/>,\"volume-down\":<path d=\"M7 7H3v6h4l5 5V2L7 7zm8.54 6.54l-1.42-1.42a3 3 0 0 0 0-4.24l1.42-1.42a4.98 4.98 0 0 1 0 7.08z\"/>,\"volume-mute\":<path d=\"M9 7H5v6h4l5 5V2L9 7z\"/>,\"volume-off\":<path d=\"M15 8.59l-2.12-2.13-1.42 1.42L13.6 10l-2.13 2.12 1.42 1.42L15 11.4l2.12 2.13 1.42-1.42L16.4 10l2.13-2.12-1.42-1.42L15 8.6zM4 7H0v6h4l5 5V2L4 7z\"/>,\"volume-up\":<path d=\"M5 7H1v6h4l5 5V2L5 7zm11.36 9.36l-1.41-1.41a6.98 6.98 0 0 0 0-9.9l1.41-1.41a8.97 8.97 0 0 1 0 12.72zm-2.82-2.82l-1.42-1.42a3 3 0 0 0 0-4.24l1.42-1.42a4.98 4.98 0 0 1 0 7.08z\"/>,\"wallet\":<path d=\"M0 4c0-1.1.9-2 2-2h15a1 1 0 0 1 1 1v1H2v1h17a1 1 0 0 1 1 1v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm16.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"/>,\"watch\":<path d=\"M11 9h2v2H9V7h2v2zm-5.82 6.08a6.98 6.98 0 0 1 0-10.16L6 0h8l.82 4.92a6.98 6.98 0 0 1 0 10.16L14 20H6l-.82-4.92zM10 15a5 5 0 1 0 0-10 5 5 0 0 0 0 10z\"/>,\"window-new\":<path d=\"M9 10V8h2v2h2v2h-2v2H9v-2H7v-2h2zM0 3c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm2 2v12h16V5H2z\"/>,\"window-open\":<path d=\"M0 3c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm2 2v12h16V5H2zm8 3l4 5H6l4-5z\"/>,\"window\":<path d=\"M0 3c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm2 2v12h16V5H2z\"/>,\"wrench\":<path d=\"M6.47 9.8A5 5 0 0 1 .2 3.22l3.95 3.95 2.82-2.83L3.03.41a5 5 0 0 1 6.4 6.68l10 10-2.83 2.83L6.47 9.8z\"/>,\"yin-yang\":<path fillRule=\"evenodd\" d=\"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-18a8 8 0 1 0 0 16 4 4 0 1 1 0-8 4 4 0 1 0 0-8zm0 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0-8a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"/>,\"zoom-in\":<path fillRule=\"evenodd\" d=\"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM7 7V5h2v2h2v2H9v2H7V9H5V7h2z\"/>,\"zoom-out\":<path fillRule=\"evenodd\" d=\"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM5 7h6v2H5V7z\"/>}","/* eslint-disable */\n    export default {\"move\":\"0 0 96 96\",\"plus-circle\":\"0 0 24 24\",\"plus\":\"0 0 24 24\",\"redo\":\"0 0 24 24\",\"search\":\"0 0 512 512\",\"undo\":\"0 0 24 24\"}","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n// eslint-disable-next-line import/extensions\r\nimport icons from \"../../../icons\";\r\n// eslint-disable-next-line import/extensions\r\nimport iconsViewPorts from \"../../../iconsViewPorts\";\r\n\r\nconst rotate = (deg) =>\r\n  (deg && { style: { transform: `rotate(${deg}deg)` } }) || undefined;\r\n\r\nconst Icon = ({ icon, className, renderAs, deg, ...props }) => {\r\n  return (\r\n    <Wrapper renderAs={renderAs} className={renderAs && className}>\r\n      <svg\r\n        className={`${\r\n          className instanceof Array\r\n            ? className\r\n                .flat(Infinity)\r\n                .filter((item) => item)\r\n                .join(\" \")\r\n            : className\r\n        } fill-current`}\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        viewBox={iconsViewPorts[icon] || \"0 0 20 20\"}\r\n        {...rotate(deg)}\r\n        {...props}\r\n      >\r\n        <title>{props.title || icon}</title>\r\n        {icons[icon]}\r\n      </svg>\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default Icon;\r\n\r\n// https://www.zondicons.com/icons.html\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst getClasses = ({ classNameByValue, field, view }) => {\r\n  const testValue = view.getValue(field);\r\n  return classNameByValue.map(([key, value]) => key === testValue && value);\r\n};\r\n\r\nconst StyleClassNameByValue = ({ model, path, view }) => {\r\n  const { renderAs, item, mapper, className } = model;\r\n  const add = mapper.map((value) => getClasses({ ...value, view }));\r\n\r\n  return (\r\n    <Wrapper className={[add, className]} renderAs={renderAs}>\r\n      <ContentTypeRender path={path} items={item} />\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default StyleClassNameByValue;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst StyleEventOutside = ({ model, path, view, value, children }) => {\r\n  const { className, classNameInner, item, event } = model;\r\n  let innerClicked = false;\r\n  return (\r\n    <Wrapper\r\n      className={className}\r\n      onClick={() => {\r\n        if (!innerClicked) view.event(event, value);\r\n        innerClicked = false;\r\n      }}\r\n    >\r\n      <Wrapper\r\n        className={classNameInner}\r\n        onClick={() => {\r\n          innerClicked = true;\r\n        }}\r\n      >\r\n        {children || <ContentTypeRender path={path} items={item} />}\r\n      </Wrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default StyleEventOutside;\r\n","/* eslint-disable jsx-a11y/mouse-events-have-key-events */\r\nimport React, { useState } from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nexport const HideOnNotOverContext = React.createContext();\r\n\r\nconst StyleOnOverHandle = ({ model, path }) => {\r\n  const [over, setOver] = useState(false);\r\n  const { item, className } = model;\r\n\r\n  return (\r\n    <Wrapper\r\n      onMouseOver={() => setOver(true)}\r\n      onMouseOut={() => setOver(false)}\r\n      className={className}\r\n    >\r\n      <HideOnNotOverContext.Provider value={over}>\r\n        {<ContentTypeRender path={path} items={item} />}\r\n      </HideOnNotOverContext.Provider>\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default StyleOnOverHandle;\r\n","import React, { useContext } from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nimport { HideOnNotOverContext } from \"./onOverHandle\";\r\n\r\nconst StyleOnOver = ({ model, path, children }) => {\r\n  const { className, item, classNameOut, classNameOver } = model;\r\n  const over = useContext(HideOnNotOverContext);\r\n\r\n  return (\r\n    <Wrapper className={[className, over ? classNameOver : classNameOut]}>\r\n      {children || <ContentTypeRender path={path} items={item} />}\r\n    </Wrapper>\r\n  );\r\n};\r\nexport default StyleOnOver;\r\n","import React, { useContext } from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nimport { HideOnNotOverContext } from \"./onOverHandle\";\r\n\r\nconst StyleOnOverRemove = ({ model, path, children }) => {\r\n  const { className, item, invert } = model;\r\n  let over = useContext(HideOnNotOverContext);\r\n  if (invert) over = !over;\r\n  if (over)\r\n    return (\r\n      <Wrapper className={className}>\r\n        {children || <ContentTypeRender path={path} items={item} />}\r\n      </Wrapper>\r\n    );\r\n\r\n  return null;\r\n};\r\nexport default StyleOnOverRemove;\r\n","import React from \"react\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst StyleView = ({ model, path }) => {\r\n  const { className, renderAs, item } = model;\r\n\r\n  return (\r\n    <Wrapper className={className} renderAs={renderAs}>\r\n      <ContentTypeRender path={path} items={item} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default StyleView;\r\n","import * as React from \"react\";\r\nimport app from \"nystem\";\r\n\r\nclass ExtensionBackgroundIndex extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const self = this;\r\n    this.tabs = {};\r\n    this.tabLoadCallback = {};\r\n    this.tabLoading = {};\r\n    app().doingEvent = {};\r\n    app().pathErrorClick = {};\r\n    window.chrome.runtime.onMessage.addListener(\r\n      (request, sender, sendResponse) => {\r\n        const tabOptions = self.tabs[sender.tab.id];\r\n        if (!tabOptions) {\r\n          console.log(\"Missing \", sender.tab);\r\n          return;\r\n        }\r\n        if (request.doEvent) {\r\n          console.log(\"doEvent\", request, app().doingEvent[sender.tab.id]);\r\n          app().doingEvent[sender.tab.id] = false;\r\n          console.log(\"request.result\");\r\n          if (request.result.error === \"Path\") {\r\n            app().pathErrorClick[sender.tab.id] = request;\r\n            console.log(\"app().pathErrorClick\", app().pathErrorClick);\r\n          } else delete app().pathErrorClick[sender.tab.id];\r\n          app().connection.emit(request);\r\n        } else if (app().pathErrorClick[sender.tab.id]) {\r\n          const response = app().pathErrorClick[sender.tab.id];\r\n          delete app().pathErrorClick[sender.tab.id];\r\n          response.newPath = request.path;\r\n          console.log(\"response.newPath\", response);\r\n          app().connection.emit(response);\r\n        } else if (tabOptions.recording) {\r\n          request.tabId = `${sender.tab.id}`;\r\n          request.url = sender.tab.url;\r\n          if (\r\n            !tabOptions.listenTo ||\r\n            tabOptions.listenTo.length === 0 ||\r\n            tabOptions.listenTo.indexOf(request.event) !== -1\r\n          )\r\n            app().database.eventLog.save({\r\n              data: request,\r\n            });\r\n        }\r\n      }\r\n    );\r\n    // https://developer.window.chrome.com/extensions/tabs\r\n    // https://developer.window.chrome.com/extensions/api_index\r\n    // https://developer.window.chrome.com/extensions/messaging\r\n    app().connection.on(\"connect\", this.connect);\r\n    app().database.tab.on(\"update\", this.updateTabSettings);\r\n\r\n    this.saveTab = function (tab, forceUpdate) {\r\n      const tabField = [\"url\", \"title\"];\r\n      let changed = false;\r\n      const id = tab.id ? tab.id : tab._id;\r\n      if (!self.tabs[tab.id]) {\r\n        changed = true;\r\n        self.tabs[tab.id] = {};\r\n      }\r\n      const newUrl = tab.url !== self.tabs[id].url;\r\n      for (let i = 0; i < tabField.length; i++)\r\n        if (self.tabs[id][tabField[i]] !== tab[tabField[i]]) {\r\n          changed = true;\r\n          self.tabs[id][tabField[i]] = tab[tabField[i]];\r\n        }\r\n      self.tabs[id]._id = `${id}`;\r\n      if (changed || forceUpdate) {\r\n        const tabOptions = self.tabs[id];\r\n        if (\r\n          newUrl &&\r\n          tabOptions.recording &&\r\n          (!tabOptions.listenTo ||\r\n            tabOptions.listenTo.length === 0 ||\r\n            tabOptions.listenTo.indexOf(\"url\") !== -1)\r\n        )\r\n          app().database.eventLog.save({\r\n            data: {\r\n              name: `URL change ${tabOptions.url}`,\r\n              event: \"url\",\r\n              url: tabOptions.url,\r\n              title: tabOptions.title,\r\n              tabId: tabOptions._id,\r\n            },\r\n          });\r\n        app().database.tab.save({\r\n          data: tabOptions,\r\n        });\r\n      }\r\n    };\r\n    app().connection.on(\"extensionEvent\", this.extensionEvent);\r\n    window.chrome.webNavigation.onCompleted.addListener((info) => {\r\n      if (info.frameId !== 0) return;\r\n      const tabLoading = self.tabLoading[info.tabId];\r\n      delete self.tabLoading[info.tabId];\r\n      if (tabLoading && tabLoading.callback) tabLoading.callback();\r\n      if (self.tabLoadCallback[info.tabId]) self.tabLoadCallback[info.tabId]();\r\n    });\r\n    window.chrome.webNavigation.onBeforeNavigate.addListener((info) => {\r\n      if (info.frameId !== 0) return;\r\n      if (!self.tabLoading[info.tabId])\r\n        self.tabLoading[info.tabId] = {\r\n          loading: true,\r\n          callback: false,\r\n        };\r\n    });\r\n    window.chrome.tabs.onCreated.addListener(self.saveTab);\r\n    window.chrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\r\n      self.saveTab(tab);\r\n    });\r\n    window.chrome.tabs.onRemoved.addListener((id) => {\r\n      delete self.tabs[id];\r\n      app().database.tab.delete({ id });\r\n    });\r\n    window.chrome.contextMenus.create({\r\n      title: \"Validate in Testguide eventlog\",\r\n      onclick: this.addToEventLog,\r\n      contexts: [\r\n        \"page\",\r\n        \"selection\",\r\n        \"link\",\r\n        \"editable\",\r\n        \"image\",\r\n        \"video\",\r\n        \"audio\",\r\n      ],\r\n    });\r\n    this.updateTimer = setTimeout(this.updateTabs, 1000 * 10);\r\n    this.state = {};\r\n  }\r\n  updateTabs = () => {\r\n    app()\r\n      .database.tab.search()\r\n      .then(({ data }) =>\r\n        data\r\n          .filter((tab) => !tab.siteScript && !this.tabs[tab._id])\r\n          .forEach((tab) => app().database.tab.delete({ id: tab._id }))\r\n      );\r\n    this.updateTimer = setTimeout(this.updateTabs, 1000 * 60);\r\n  };\r\n  addToEventLog = (info, tab) => {\r\n    // console.log(info, tab);\r\n  };\r\n  updateTabSettings = (items) => {\r\n    if (!items) return;\r\n    const self = this;\r\n    const id = `${Object.keys(items)[0]}`;\r\n    const data = app()\r\n      .database.tab.get({ id })\r\n      .then(({ data }) => {\r\n        if (!data || data.siteScript) {\r\n          console.log(id);\r\n          return;\r\n        }\r\n        if (!self.tabs[data._id].recording && data.recording)\r\n          app().database.eventLog.save({\r\n            data: {\r\n              name: `Recording start ${data.url}`,\r\n              event: \"url\",\r\n              url: data.url,\r\n              title: data.title,\r\n              tabId: data._id,\r\n            },\r\n          });\r\n        self.tabs[data._id] = data;\r\n      });\r\n    if (data) this.tabs[data._id] = data;\r\n  };\r\n  extensionEvent = (data) => {\r\n    const self = this;\r\n    const tabId = parseInt(data.tabId, 10);\r\n    if (data.doEvent.event === \"url\") {\r\n      if (this.tabs[data.tabId].url !== data.doEvent.url)\r\n        window.chrome.tabs.update(tabId, { url: data.doEvent.url }, () => {\r\n          self.tabLoadCallback[tabId] = function () {\r\n            data.result = {\r\n              status: \"success\",\r\n              redirected: true,\r\n            };\r\n            app().connection.emit(data);\r\n          };\r\n        });\r\n      else {\r\n        data.result = {\r\n          status: \"success\",\r\n          redirected: false,\r\n        };\r\n        app().connection.emit(data);\r\n      }\r\n    } else if (data.doEvent)\r\n      if (this.tabLoading[tabId]) {\r\n        console.log(\"delay tab\");\r\n        this.tabLoading[tabId].callback = function () {\r\n          console.log(\"delay tab done\");\r\n          app().doingEvent[tabId] = data;\r\n          window.chrome.tabs.sendMessage(tabId, data);\r\n        };\r\n      } else {\r\n        app().doingEvent[tabId] = data;\r\n        window.chrome.tabs.sendMessage(tabId, data);\r\n      }\r\n  };\r\n  connect = (data) => {\r\n    const self = this;\r\n    app().connection.emit({\r\n      type: \"extensionEvent\",\r\n      event: \"connectExtension\",\r\n    });\r\n    window.chrome.tabs.query({}, (data) => {\r\n      for (const item in data) self.saveTab(data[item], true);\r\n    });\r\n  };\r\n  componentWillUnmount() {\r\n    app().connection.off(\"connect\", this.connect);\r\n    app().connection.off(\"extensionEvent\", this.extensionEvent);\r\n    clearTimeout(this.updateTimer);\r\n  }\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default ExtensionBackgroundIndex;\r\n","const extensionIcon = props => {\r\n  const { browserAction } = window.chrome;\r\n  const { color, text, icon, canvas } = props.model || props;\r\n  if (icon) browserAction.setIcon({ path: icon });\r\n  if (color) browserAction.setBadgeBackgroundColor({ color }); // [190, 190, 190, 230]\r\n  if (text) browserAction.setBadgeText({ text });\r\n  if (canvas) {\r\n    const canvasContext = canvas.getContext(\"2d\");\r\n    browserAction.setIcon({\r\n      imageData: canvasContext.getImageData(0, 0, canvas.width, canvas.height)\r\n    });\r\n  }\r\n  return null;\r\n};\r\nexport default extensionIcon;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { ContentTypeRender } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst currentUrl = () =>\r\n  new Promise((resolve) =>\r\n    window.chrome.tabs.query({ currentWindow: true, active: true }, (tabs) => {\r\n      resolve(tabs[0].url);\r\n    })\r\n  );\r\n\r\nconst ExtensionSearch = ({ model, view, path, setValue }) => {\r\n  const [missing, setMissing] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const { extract, field } = model;\r\n\r\n    currentUrl().then(async (url) => {\r\n      const [, , val] = new RegExp(extract).exec(url) || [];\r\n      if (!val) return;\r\n\r\n      const { data } = await app().database[view.contentType].search({\r\n        filter: { [field]: val },\r\n        count: 1,\r\n      });\r\n\r\n      if (!data) {\r\n        setMissing(true);\r\n        return;\r\n      }\r\n\r\n      setValue(data[0]);\r\n      view.id = data[0]._id;\r\n    });\r\n  }, [model, setValue, view]);\r\n\r\n  return missing ? <ContentTypeRender path={path} items={model.item} /> : null;\r\n};\r\n\r\nexport default ExtensionSearch;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { ContentTypeRender } from \"nystem-components\";\r\n\r\nconst currentUrl = () =>\r\n  new Promise((resolve) =>\r\n    window.chrome.tabs.query({ currentWindow: true, active: true }, (tabs) => {\r\n      resolve(tabs[0].url);\r\n    })\r\n  );\r\n\r\nconst ExtensionTab = (props) => {\r\n  const { match, invert, children, item } = props.model || props;\r\n  const [isMatch, setIsMatch] = useState();\r\n\r\n  useEffect(() => {\r\n    currentUrl().then((url) => setIsMatch(url.includes(match)));\r\n  }, [match]);\r\n\r\n  if (isMatch === undefined || (isMatch && invert) || (!isMatch && !invert))\r\n    return null;\r\n\r\n  return children || <ContentTypeRender path={props.path} items={item} />;\r\n};\r\nexport default ExtensionTab;\r\n","import React from \"react\";\r\nimport { ContentTypeRender } from \"nystem-components\";\r\n\r\nconst ExtensionView = ({ invert, model = {}, path, children }) => {\r\n  const inExtension = window.location.protocol === \"chrome-extension:\";\r\n  invert = invert || model.invert;\r\n\r\n  if ((inExtension && invert) || (!inExtension && !invert)) return null;\r\n\r\n  return children || <ContentTypeRender path={path} items={model.item} />;\r\n};\r\nexport default ExtensionView;\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst ConnectionElectron = ({ model = {} }) => {\r\n  const atId = useRef(false);\r\n\r\n  useEffect(() => {\r\n    const message = (data) => {\r\n      if (!atId.current || data.atId !== atId.current) return;\r\n      console.log(data.filePaths);\r\n    };\r\n    app().on(\"electronData\", message);\r\n\r\n    return () => {\r\n      app().off(\"electronData\", message);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Wrapper\r\n      onClick={() => {\r\n        atId.current = app().uuid();\r\n\r\n        app().event(\"electronEvent\", { event: \"dialog\", atId: atId.current });\r\n      }}\r\n    >\r\n      hepp\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default ConnectionElectron;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nclass BootstrapComputedClass extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    this.view = props.view;\r\n    [\"valid\", \"setValue\"].forEach(func => {\r\n      this[func] = this[func].bind(this);\r\n    });\r\n    this.state = {\r\n      value: this.props.value\r\n    };\r\n    this.path = this.props.path;\r\n  }\r\n  valid() {\r\n    let valid = true;\r\n    for (let i = 0; i < this.model.item.length; i++)\r\n      if (\r\n        this.refs[`component${i}`].valid &&\r\n        this.refs[`component${i}`].valid &&\r\n        !this.refs[`component${i}`].valid()\r\n      )\r\n        valid = false;\r\n    return valid;\r\n  }\r\n  setValue(id, value) {\r\n    return this.props.setValue(id, value);\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    this.setState({\r\n      value: nextProps.value\r\n    });\r\n  }\r\n  render() {\r\n    const { view, model, path } = this.props;\r\n    const insertVal = val =>\r\n      val.replace(\r\n        /\\{([a-z_.]+)\\}/gim,\r\n        (str, p1, offset, s) => view.getValue(p1.replace(\".\", `${path}.`)) || \"\"\r\n      );\r\n\r\n    const className = model.className ? model.className.join(\" \") : \"\";\r\n    this.focus = view.focus;\r\n    if (model.row)\r\n      return (\r\n        <Wrapper className={insertVal(className)}>\r\n          <Wrapper className=\"row\">\r\n            {model.item.map(view.createItem, this)}\r\n          </Wrapper>\r\n        </Wrapper>\r\n      );\r\n    return (\r\n      <Wrapper className={insertVal(className)} renderAs={model.renderAs}>\r\n        {model.item.map(view.createItem, this)}\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\nexport default BootstrapComputedClass;\r\n","import { useEffect } from \"react\";\r\n\r\nconst DatabaseFilterResult = ({ view, children }) => {\r\n  useEffect(() => {\r\n    const filterSearch = (query) => {\r\n      const { data } = query;\r\n\r\n      const definition = data\r\n        .filter((item) => item.name === \"definition\")\r\n        .map((item) => item.component);\r\n\r\n      const viewFields = data\r\n        .filter((item) => item.name === \"view\")\r\n        .filter((item) => !definition.includes(item.component));\r\n\r\n      query.data = viewFields;\r\n    };\r\n\r\n    view.on(\"search\", filterSearch);\r\n    return () => {\r\n      view.off(\"search\", filterSearch);\r\n    };\r\n  }, [view]);\r\n\r\n  return children || null;\r\n};\r\n\r\nexport default DatabaseFilterResult;\r\n","import {\r\n  Wrapper,\r\n  Inserter,\r\n  DragAndDropContext,\r\n  SessionRole,\r\n} from \"nystem-components\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport React from \"react\";\r\nimport \"../../../index.css\";\r\nimport \"./index.css\";\r\n\r\nconst Index = () => (\r\n  <Router>\r\n    <DragAndDropContext>\r\n      <SessionRole userrole=\"logged-out\">\r\n        <Inserter\r\n          className=\"p-8 text-left\"\r\n          match=\"*\"\r\n          source=\"/adminUser/login\"\r\n        />\r\n      </SessionRole>\r\n      <SessionRole userrole=\"logged-in\">\r\n        <Inserter match=\"*\" source=\"/server/menu\" />\r\n        <Inserter match=\"/popup.html\" source=\"/server/extension\" />\r\n        <Inserter match=\"/\" source=\"/server/overview\" />\r\n        <Inserter match=\"/menu\" source=\"/settings/menu\" />\r\n        <Wrapper className=\"px-6\">\r\n          <Inserter match=\"/server/*\" />\r\n          <Inserter match=\"/host/*\" />\r\n          <Inserter match=\"/settings/*\" />\r\n        </Wrapper>\r\n      </SessionRole>\r\n    </DragAndDropContext>\r\n  </Router>\r\n);\r\nexport default Index;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass OverlayAccessible extends React.Component {\r\n  state = { accessible: true };\r\n  overlayEvent = options => {\r\n    const accessible = !Object.keys(options.open).length;\r\n    if (this.state.accessible !== accessible) {\r\n      this.setState({ accessible });\r\n      app().event(\"accessible\", {\r\n        accessible,\r\n        accessibleId: this.accessibleId\r\n      });\r\n    }\r\n  };\r\n  getChildContext() {\r\n    return {\r\n      accessibleId: this.accessibleId\r\n    };\r\n  }\r\n\r\n  _handleScreenReaderToggled = isEnabled => {\r\n    this.setState({\r\n      screenReaderEnabled: isEnabled\r\n    });\r\n  };\r\n  componentDidMount(event) {\r\n    this.accessibleId = app().uuid();\r\n    app().on(\"overlay\", this.overlayEvent);\r\n  }\r\n  componentWillUnmount(event) {\r\n    app().off(\"overlay\", this.overlayEvent);\r\n  }\r\n  render() {\r\n    const { accessible } = this.state;\r\n    return (\r\n      <Wrapper accessible={accessible ? undefined : false}>\r\n        {this.props.children}\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\nOverlayAccessible.contextTypes = {\r\n  overlayId: PropTypes.string\r\n};\r\nOverlayAccessible.childContextTypes = {\r\n  accessibleId: PropTypes.string\r\n};\r\nexport default OverlayAccessible;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass OverlayClose extends React.Component {\r\n  handleEvent(event) {\r\n    if (event && event.preventDefault) event.preventDefault();\r\n    app().event(\"overlay\", { overlayId: this.context.overlayId, do: \"close\" });\r\n  }\r\n  render() {\r\n    const { className, renderAs, accessible } = this.props;\r\n    return (\r\n      <Wrapper\r\n        renderAs={renderAs || \"a\"}\r\n        className={className}\r\n        onClick={this.handleEvent.bind(this)}\r\n        accessible={accessible}\r\n      >\r\n        {this.props.children}\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\nOverlayClose.contextTypes = {\r\n  overlayId: PropTypes.string\r\n};\r\nexport default OverlayClose;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nclass OverlayCloseButton extends React.Component {\r\n  handleEvent(event) {\r\n    event.preventDefault();\r\n    const { view, path } = this.props;\r\n    const toPath = path || view.contentType + \"/\" + view.format + \"/\" + view.id;\r\n    app()\r\n      .event(\"closeOverlay\", toPath)\r\n      .then(data => {});\r\n  }\r\n  render() {\r\n    const { model, view } = this.props;\r\n    let { className } = this.props;\r\n    className = className || model.className ? model.className.join(\" \") : \"\";\r\n    return (\r\n      <Wrapper\r\n        renderAs={model.renderAs || \"a\"}\r\n        className={className}\r\n        onClick={this.handleEvent.bind(this)}\r\n      >\r\n        {model.item.map(view.createItem, this)}\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\nexport default OverlayCloseButton;\r\n","import React from \"react\";\r\n\r\nconst OverlayContextObject = React.createContext();\r\n\r\nconst OverlayContext = OverlayContextObject.Consumer;\r\nexport default OverlayContext;\r\n\r\nexport const OverlayContextProvider = OverlayContextObject.Provider;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport app from \"nystem\";\r\nimport { withRouter } from \"react-router\";\r\nimport { OverlayContextProvider } from \"./context\";\r\n\r\nlet atPath = \"\";\r\n\r\nconst OverlayIndex = withRouter(({ children, match }) => {\r\n  let [open, setOpenState] = useState({});\r\n\r\n  const overlayEvent = ({ event, overlayId }) => {\r\n    if (event === \"open\") open[overlayId] = true;\r\n    else if (event === \"close\") {\r\n      if (overlayId) delete open[overlayId];\r\n      else open = {};\r\n    }\r\n    setOpenState(open);\r\n  };\r\n\r\n  useEffect(() => {\r\n    app().on(\"overlay\", overlayEvent);\r\n    return () => {\r\n      app().off(\"overlay\", overlayEvent);\r\n    };\r\n  });\r\n\r\n  const { path } = match;\r\n  if (path !== atPath) app().event(\"overlay\", { event: \"close\" });\r\n  atPath = path;\r\n\r\n  const items =\r\n    children instanceof Array ? children : children ? [children] : [];\r\n\r\n  return items\r\n    .filter(({ props }) => open[props.overlayId])\r\n    .map(child => (\r\n      <OverlayContextProvider\r\n        key={child.props.overlayId}\r\n        value={child.props.overlayId}\r\n      >\r\n        {child}\r\n      </OverlayContextProvider>\r\n    ));\r\n});\r\n\r\nexport default OverlayIndex;\r\n","import React from \"react\";\r\nimport { Wrapper, OverlayClose } from \"nystem-components\";\r\nimport \"./menu.css\";\r\n\r\nconst OverlayMenu = ({ children }) => (\r\n  <Wrapper\r\n    className=\"overlay-menu-container overlay-menu-container--active\"\r\n    id=\"overlay-menu-container\"\r\n  >\r\n    <OverlayClose className=\"overlay-menu-shim\" renderAs=\"a\" accessible={false}>\r\n      {\" \"}\r\n    </OverlayClose>\r\n    <Wrapper renderAs=\"nav\" className=\"overlay-menu\">\r\n      {children}\r\n    </Wrapper>\r\n  </Wrapper>\r\n);\r\n\r\nexport default OverlayMenu;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nconst handleEvent = overlayId => e => {\r\n  e.preventDefault();\r\n  app().event(\"overlay\", { overlayId, event: \"open\" });\r\n};\r\n\r\nconst OverlayOpen = ({ overlayId, ...props }) => (\r\n  <Wrapper renderAs=\"a\" {...props} onClick={handleEvent(overlayId)} />\r\n);\r\n\r\nexport default OverlayOpen;\r\n","import React from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\n\r\nclass OverlayOverlay extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mounted: false\r\n    };\r\n  }\r\n  findPosition(obj) {\r\n    const pos = { x: 0, y: 0 };\r\n    while (1) {\r\n      pos.x += obj.offsetLeft;\r\n      pos.y += obj.offsetTop;\r\n      if (!obj.offsetParent) return pos;\r\n      obj = obj.offsetParent;\r\n    }\r\n  }\r\n  getScroll() {\r\n    if (window.pageYOffset !== undefined)\r\n      return { x: window.pageXOffset, y: window.pageYOffset };\r\n\r\n    const r = document.documentElement;\r\n    const b = document.body;\r\n    const sx = r.scrollLeft || b.scrollLeft || 0;\r\n    const sy = r.scrollTop || b.scrollTop || 0;\r\n    return { x: sx, y: sy };\r\n  }\r\n  onMouseDown(event) {\r\n    const { modal } = this.refs;\r\n    this.at = {\r\n      start: {\r\n        x: event.clientX,\r\n        y: event.clientY\r\n      },\r\n      obj: this.findPosition(modal),\r\n      pos: {\r\n        x: event.clientX,\r\n        y: event.clientY\r\n      }\r\n    };\r\n  }\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (nextState === this.state) return false;\r\n    return true;\r\n  }\r\n  componentDidMount() {\r\n    this.setState({ mounted: true });\r\n  }\r\n  render() {\r\n    const add = this.state.mounted ? \"--active\" : \"\";\r\n    return (\r\n      <Wrapper className={`overlay-background overlay-background${add}`}>\r\n        <Wrapper className={`overlay-contents overlay-contents${add}`}>\r\n          {this.props.children}\r\n        </Wrapper>\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\nexport default OverlayOverlay;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\n\r\nclass OverlayView extends React.Component {\r\n  onClick = event => {\r\n    event.preventDefault();\r\n    let { model } = this.props;\r\n    model = model || this.props;\r\n    app().event(\"addOverlay\", model);\r\n  };\r\n  render() {\r\n    let { model } = this.props;\r\n    model = model || this.props;\r\n    const className = model.className ? model.className.join(\" \") : \"\";\r\n    return (\r\n      <a className={className} href={model.link} onClick={this.onClick}>\r\n        {app().t(model.text)}\r\n      </a>\r\n    );\r\n  }\r\n}\r\nexport default OverlayView;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nimport { ContentTypeView } from \"nystem-components\";\r\n\r\nclass ReferenceDynamicForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    this.props.view.on(\"save\", this.onSave);\r\n    this.localValue = {};\r\n    const self = this;\r\n    const state = {};\r\n    app().require([\"dynamicForm\", \"fieldDefinitions\"], function () {\r\n      app().dynamicForm.generate(\r\n        self.props.view.contentType,\r\n        self.model.source,\r\n        self.model.transformContentType,\r\n        self.props.view.value,\r\n        function (id) {\r\n          if (typeof state.value !== \"undefined\")\r\n            self.setState({\r\n              value: id,\r\n            });\r\n          else state.value = id;\r\n        }\r\n      );\r\n    });\r\n    if (typeof state.value === \"undefined\") state.value = false; //'dynamicType' + self.props.view.value._id\r\n    this.state = state;\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    /*this.setState({\r\n      value: nextProps.value\r\n    });*/\r\n  }\r\n  render() {\r\n    const model = this.props.model;\r\n    const format = model.view ? model.view : \"input\";\r\n    if (this.state.value)\r\n      return (\r\n        <ContentTypeView\r\n          noForm=\"true\"\r\n          className={model.className}\r\n          contentType={this.state.value}\r\n          format={format}\r\n          value={{}}\r\n          id={this.props.view.params[3]}\r\n          params={this.props.view.params}\r\n        />\r\n      );\r\n    return null;\r\n  }\r\n}\r\nexport default ReferenceDynamicForm;\r\n","import React from \"react\";\r\nimport app from \"nystem\";\r\nclass ViewButtonMirrorSave extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.model = props.model;\r\n    this.view = props.view;\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.saveToDb = this.saveToDb.bind(this);\r\n    this.view.on(\"change\", this.handleChange);\r\n\r\n    this.oldVal = this.props.view.value\r\n      ? JSON.stringify(this.props.view.value)\r\n      : {};\r\n    if (!this.model.saveOn) return {};\r\n\r\n    if (this.model.saveOn.indexOf(\"baseView\") !== -1)\r\n      this.view.baseView.on(\"save\", this.saveToDb);\r\n    if (this.model.saveOn.indexOf(\"baseView.baseView\") !== -1)\r\n      this.view.baseView.baseView.on(\"save\", this.saveToDb);\r\n    if (this.model.saveOn.indexOf(\"baseView.baseView.baseView\") !== -1)\r\n      this.view.baseView.baseView.baseView.on(\"save\", this.saveToDb);\r\n  }\r\n  insertVal(val) {\r\n    if (!val) return val;\r\n    const self = this;\r\n    return val.replace(/\\{([a-z_.]+)\\}/gim, function(str, p1, offset, s) {\r\n      if (p1.indexOf(\"baseView.\") !== 0) return self.view.baseView.getValue(p1);\r\n      p1 = p1.replace(\"baseView.\", \"\");\r\n      if (p1.indexOf(\"baseView.\") !== 0)\r\n        return self.view.baseView.baseView.getValue(p1);\r\n      p1 = p1.replace(\"baseView.\", \"\");\r\n      return self.view.baseView.baseView.baseView.getValue(p1);\r\n    });\r\n  }\r\n  handleChange(id) {\r\n    if (!id || !this.view.value) return;\r\n\r\n    if (!this.saveVals) this.saveVals = {};\r\n\r\n    this.saveVals[id] = this.view.value[id];\r\n  }\r\n  saveToDb() {\r\n    const self = this;\r\n    if (this.saveVals && this.view.valid()) {\r\n      if (this.view.value._id) this.saveVals._id = this.view.value._id;\r\n\r\n      app().database[this.view.contentType].save(\r\n        {\r\n          data: this.saveVals,\r\n          fields: true\r\n        },\r\n        function(data) {\r\n          if (!self.view.value._id) self.view.setValue(\"_id\", data);\r\n\r\n          self.view.event(\"save\", self.view.value);\r\n        }\r\n      );\r\n\r\n      delete this.saveVals;\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    if (this.model.insertVal)\r\n      this.model.insertVal.forEach(item => {\r\n        this.view.setValue(item[0], this.insertVal(item[1]));\r\n      });\r\n  }\r\n  componentWillUnmount() {\r\n    this.view.off(\"change\", this.handleChange);\r\n    if (this.saveDelay) clearTimeout(this.saveDelay);\r\n\r\n    if (this.model.saveOn.indexOf(\"baseView\") !== -1)\r\n      this.view.baseView.off(\"save\", this.saveToDb);\r\n    if (this.model.saveOn.indexOf(\"baseView.baseView\") !== -1)\r\n      this.view.baseView.baseView.off(\"save\", this.saveToDb);\r\n    if (this.model.saveOn.indexOf(\"baseView.baseView.baseView\") !== -1)\r\n      this.view.baseView.baseView.baseView.off(\"save\", this.saveToDb);\r\n  }\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default ViewButtonMirrorSave;\r\n","import { useEffect } from \"react\";\r\n\r\nconst ViewInViewSetBaseViewValue = ({ model, view }) => {\r\n  useEffect(() => {\r\n    view.setValue({\r\n      path: model.toField,\r\n      value: view.baseView.getValue(model.fromField),\r\n    });\r\n  }, [model, view]);\r\n\r\n  return null;\r\n};\r\nexport default ViewInViewSetBaseViewValue;\r\n","/* eslint-disable jsx-a11y/mouse-events-have-key-events */\r\n\r\nimport React, { useRef, useEffect, useState } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { Wrapper, ContentTypeRender } from \"nystem-components\";\r\n\r\nconst Portal = ({ children }) => {\r\n  const [element, setElement] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const element = document.createElement(\"div\");\r\n    document.body.appendChild(element);\r\n    setElement(element);\r\n\r\n    return () => {\r\n      document.body.removeChild(element);\r\n    };\r\n  }, []);\r\n\r\n  if (!element) return null;\r\n\r\n  return createPortal(children, element);\r\n};\r\n\r\nconst MouseOver = ({ children, setOver }) => {\r\n  const [isOver, setIsOver] = useState(false);\r\n  const ref = useRef();\r\n  useEffect(() => {\r\n    if (!isOver) return;\r\n\r\n    const size = ref.current.getBoundingClientRect();\r\n    let pos = false;\r\n\r\n    const mouseMove = (e) => {\r\n      pos = { x: e.clientX, y: e.clientY };\r\n      const { x, y } = pos;\r\n\r\n      if (y < size.top || y > size.bottom || x < size.left || x > size.right) {\r\n        setOver(false);\r\n        setIsOver(false);\r\n      }\r\n    };\r\n    const delay = setTimeout(() => {\r\n      setOver(pos);\r\n    }, 100);\r\n\r\n    window.addEventListener(\"mousemove\", mouseMove);\r\n    return () => {\r\n      clearTimeout(delay);\r\n      window.removeEventListener(\"mousemove\", mouseMove);\r\n    };\r\n  }, [isOver, setOver]);\r\n\r\n  return (\r\n    <div ref={ref} onMouseOver={() => setIsOver(true)}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ViewTextTitlePopup = ({ model, path }) => {\r\n  const { item, popup } = model;\r\n\r\n  const [overPos, setOver] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      {overPos && (\r\n        <Portal>\r\n          <Wrapper\r\n            style={{\r\n              position: \"fixed\",\r\n              left: overPos.x + 10,\r\n              top: overPos.y + 12,\r\n            }}\r\n          >\r\n            <ContentTypeRender path={path} items={popup} />\r\n          </Wrapper>\r\n        </Portal>\r\n      )}\r\n      <MouseOver setOver={setOver}>\r\n        <ContentTypeRender path={path} items={item} />\r\n      </MouseOver>\r\n    </>\r\n  );\r\n};\r\nexport default ViewTextTitlePopup;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Wrapper } from \"nystem-components\";\r\nimport app from \"nystem\";\r\n\r\nconst TextareaLog = ({ view, model, value = \"\" }) => {\r\n  const [log, setLog] = useState(\"\");\r\n  const hasVal = !!value;\r\n\r\n  useEffect(() => {\r\n    if (!hasVal) return;\r\n    const parseLog = (log) => {\r\n      const parsedLog = (log || \"\")\r\n        .replace(/ /g, \"&nbsp;\")\r\n        // eslint-disable-next-line no-control-regex\r\n        .replace(/\\x1b\\[((?:\\d{1,3};?)+|)m/gim, (match, p1) => {\r\n          return `</span><span style='color:${colors[parseInt(p1, 10)]};'>`;\r\n        });\r\n      return `<span>${parsedLog.replace(/\\n/g, \"</span><br/><span>\")}</span>`;\r\n    };\r\n\r\n    let fullLog = parseLog(value);\r\n    setLog(fullLog);\r\n\r\n    const updateLog = ({ data }) => {\r\n      fullLog += parseLog(data);\r\n      setLog(fullLog);\r\n    };\r\n\r\n    app().connection.on(`serverLog${view.id}`, updateLog);\r\n    const clearLog = () => {\r\n      setLog(\"\");\r\n      fullLog = \"\";\r\n    };\r\n    view.on(\"clearlog\", clearLog);\r\n    return () => {\r\n      view.off(\"clearlog\", clearLog);\r\n      app().connection.off(`serverLog${view.id}`, updateLog);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [hasVal]);\r\n\r\n  const className = model.className && model.className.join(\" \");\r\n  return (\r\n    <code>\r\n      <Wrapper className={model.wrapperClass}>\r\n        <div className={className} dangerouslySetInnerHTML={{ __html: log }} />\r\n      </Wrapper>\r\n    </code>\r\n  );\r\n};\r\n\r\nexport default TextareaLog;\r\n\r\nconst colors = {\r\n  0: \"#000\",\r\n  1: \"white\", // ch\r\n  2: \"#0A0\",\r\n  3: \"#A50\",\r\n  4: \"#00A\",\r\n  5: \"#A0A\",\r\n  6: \"#0AA\",\r\n  7: \"#AAA\",\r\n  8: \"#555\",\r\n  9: \"#F55\",\r\n  10: \"#5F5\",\r\n  11: \"#FF5\",\r\n  12: \"#55F\",\r\n  13: \"#F5F\",\r\n  14: \"#5FF\",\r\n  15: \"#FFF\",\r\n  16: \"#000000\",\r\n  17: \"#00005f\",\r\n  18: \"#000087\",\r\n  19: \"#0000af\",\r\n  20: \"#0000d7\",\r\n  21: \"#0000ff\",\r\n  22: \"#A0A0A0\", // ch\r\n  23: \"#005f5f\",\r\n  24: \"#005f87\",\r\n  25: \"#005faf\",\r\n  26: \"#005fd7\",\r\n  27: \"#005fff\",\r\n  28: \"#008700\",\r\n  29: \"#00875f\",\r\n  30: \"#008787\",\r\n  31: \"red\", // ch\r\n  32: \"green\", // ch\r\n  33: \"yellow\", // ch\r\n  34: \"#00af00\",\r\n  35: \"#00af5f\",\r\n  36: \"#00af87\",\r\n  37: \"#00afaf\",\r\n  38: \"#00afd7\",\r\n  39: \"#00afff\",\r\n  40: \"#00d700\",\r\n  41: \"#00d75f\",\r\n  42: \"#00d787\",\r\n  43: \"#00d7af\",\r\n  44: \"#00d7d7\",\r\n  45: \"#00d7ff\",\r\n  46: \"#00ff00\",\r\n  47: \"#00ff5f\",\r\n  48: \"#00ff87\",\r\n  49: \"#00ffaf\",\r\n  50: \"#00ffd7\",\r\n  51: \"#00ffff\",\r\n  52: \"#5f0000\",\r\n  53: \"#5f005f\",\r\n  54: \"#5f0087\",\r\n  55: \"#5f00af\",\r\n  56: \"#5f00d7\",\r\n  57: \"#5f00ff\",\r\n  58: \"#5f5f00\",\r\n  59: \"#5f5f5f\",\r\n  60: \"#5f5f87\",\r\n  61: \"#5f5faf\",\r\n  62: \"#5f5fd7\",\r\n  63: \"#5f5fff\",\r\n  64: \"#5f8700\",\r\n  65: \"#5f875f\",\r\n  66: \"#5f8787\",\r\n  67: \"#5f87af\",\r\n  68: \"#5f87d7\",\r\n  69: \"#5f87ff\",\r\n  70: \"#5faf00\",\r\n  71: \"#5faf5f\",\r\n  72: \"#5faf87\",\r\n  73: \"#5fafaf\",\r\n  74: \"#5fafd7\",\r\n  75: \"#5fafff\",\r\n  76: \"#5fd700\",\r\n  77: \"#5fd75f\",\r\n  78: \"#5fd787\",\r\n  79: \"#5fd7af\",\r\n  80: \"#5fd7d7\",\r\n  81: \"#5fd7ff\",\r\n  82: \"#5fff00\",\r\n  83: \"#5fff5f\",\r\n  84: \"#5fff87\",\r\n  85: \"#5fffaf\",\r\n  86: \"#5fffd7\",\r\n  87: \"#5fffff\",\r\n  88: \"#870000\",\r\n  89: \"#87005f\",\r\n  90: \"#870087\",\r\n  91: \"#8700af\",\r\n  92: \"#8700d7\",\r\n  93: \"#8700ff\",\r\n  94: \"#875f00\",\r\n  95: \"#875f5f\",\r\n  96: \"#875f87\",\r\n  97: \"#875faf\",\r\n  98: \"#875fd7\",\r\n  99: \"#875fff\",\r\n  100: \"#878700\",\r\n  101: \"#87875f\",\r\n  102: \"#878787\",\r\n  103: \"#8787af\",\r\n  104: \"#8787d7\",\r\n  105: \"#8787ff\",\r\n  106: \"#87af00\",\r\n  107: \"#87af5f\",\r\n  108: \"#87af87\",\r\n  109: \"#87afaf\",\r\n  110: \"#87afd7\",\r\n  111: \"#87afff\",\r\n  112: \"#87d700\",\r\n  113: \"#87d75f\",\r\n  114: \"#87d787\",\r\n  115: \"#87d7af\",\r\n  116: \"#87d7d7\",\r\n  117: \"#87d7ff\",\r\n  118: \"#87ff00\",\r\n  119: \"#87ff5f\",\r\n  120: \"#87ff87\",\r\n  121: \"#87ffaf\",\r\n  122: \"#87ffd7\",\r\n  123: \"#87ffff\",\r\n  124: \"#af0000\",\r\n  125: \"#af005f\",\r\n  126: \"#af0087\",\r\n  127: \"#af00af\",\r\n  128: \"#af00d7\",\r\n  129: \"#af00ff\",\r\n  130: \"#af5f00\",\r\n  131: \"#af5f5f\",\r\n  132: \"#af5f87\",\r\n  133: \"#af5faf\",\r\n  134: \"#af5fd7\",\r\n  135: \"#af5fff\",\r\n  136: \"#af8700\",\r\n  137: \"#af875f\",\r\n  138: \"#af8787\",\r\n  139: \"#af87af\",\r\n  140: \"#af87d7\",\r\n  141: \"#af87ff\",\r\n  142: \"#afaf00\",\r\n  143: \"#afaf5f\",\r\n  144: \"#afaf87\",\r\n  145: \"#afafaf\",\r\n  146: \"#afafd7\",\r\n  147: \"#afafff\",\r\n  148: \"#afd700\",\r\n  149: \"#afd75f\",\r\n  150: \"#afd787\",\r\n  151: \"#afd7af\",\r\n  152: \"#afd7d7\",\r\n  153: \"#afd7ff\",\r\n  154: \"#afff00\",\r\n  155: \"#afff5f\",\r\n  156: \"#afff87\",\r\n  157: \"#afffaf\",\r\n  158: \"#afffd7\",\r\n  159: \"#afffff\",\r\n  160: \"#d70000\",\r\n  161: \"#d7005f\",\r\n  162: \"#d70087\",\r\n  163: \"#d700af\",\r\n  164: \"#d700d7\",\r\n  165: \"#d700ff\",\r\n  166: \"#d75f00\",\r\n  167: \"#d75f5f\",\r\n  168: \"#d75f87\",\r\n  169: \"#d75faf\",\r\n  170: \"#d75fd7\",\r\n  171: \"#d75fff\",\r\n  172: \"#d78700\",\r\n  173: \"#d7875f\",\r\n  174: \"#d78787\",\r\n  175: \"#d787af\",\r\n  176: \"#d787d7\",\r\n  177: \"#d787ff\",\r\n  178: \"#d7af00\",\r\n  179: \"#d7af5f\",\r\n  180: \"#d7af87\",\r\n  181: \"#d7afaf\",\r\n  182: \"#d7afd7\",\r\n  183: \"#d7afff\",\r\n  184: \"#d7d700\",\r\n  185: \"#d7d75f\",\r\n  186: \"#d7d787\",\r\n  187: \"#d7d7af\",\r\n  188: \"#d7d7d7\",\r\n  189: \"#d7d7ff\",\r\n  190: \"#d7ff00\",\r\n  191: \"#d7ff5f\",\r\n  192: \"#d7ff87\",\r\n  193: \"#d7ffaf\",\r\n  194: \"#d7ffd7\",\r\n  195: \"#d7ffff\",\r\n  196: \"#ff0000\",\r\n  197: \"#ff005f\",\r\n  198: \"#ff0087\",\r\n  199: \"#ff00af\",\r\n  200: \"#ff00d7\",\r\n  201: \"#ff00ff\",\r\n  202: \"#ff5f00\",\r\n  203: \"#ff5f5f\",\r\n  204: \"#ff5f87\",\r\n  205: \"#ff5faf\",\r\n  206: \"#ff5fd7\",\r\n  207: \"#ff5fff\",\r\n  208: \"#ff8700\",\r\n  209: \"#ff875f\",\r\n  210: \"#ff8787\",\r\n  211: \"#ff87af\",\r\n  212: \"#ff87d7\",\r\n  213: \"#ff87ff\",\r\n  214: \"#ffaf00\",\r\n  215: \"#ffaf5f\",\r\n  216: \"#ffaf87\",\r\n  217: \"#ffafaf\",\r\n  218: \"#ffafd7\",\r\n  219: \"#ffafff\",\r\n  220: \"#ffd700\",\r\n  221: \"#ffd75f\",\r\n  222: \"#ffd787\",\r\n  223: \"#ffd7af\",\r\n  224: \"#ffd7d7\",\r\n  225: \"#ffd7ff\",\r\n  226: \"#ffff00\",\r\n  227: \"#ffff5f\",\r\n  228: \"#ffff87\",\r\n  229: \"#ffffaf\",\r\n  230: \"#ffffd7\",\r\n  231: \"#ffffff\",\r\n  232: \"#080808\",\r\n  233: \"#121212\",\r\n  234: \"#1c1c1c\",\r\n  235: \"#262626\",\r\n  236: \"#303030\",\r\n  237: \"#3a3a3a\",\r\n  238: \"#444444\",\r\n  239: \"#4e4e4e\",\r\n  240: \"#585858\",\r\n  241: \"#626262\",\r\n  242: \"#6c6c6c\",\r\n  243: \"#767676\",\r\n  244: \"#808080\",\r\n  245: \"#8a8a8a\",\r\n  246: \"#949494\",\r\n  247: \"#9e9e9e\",\r\n  248: \"#a8a8a8\",\r\n  249: \"#b2b2b2\",\r\n  250: \"#bcbcbc\",\r\n  251: \"#c6c6c6\",\r\n  252: \"#d0d0d0\",\r\n  253: \"#dadada\",\r\n  254: \"#e4e4e4\",\r\n  255: \"#eeeeee\",\r\n};\r\n","import * as components from \"nystem-components\";\r\n\r\nconst React = require(\"react\");\r\nconst ReactDOM = require(\"react-dom\");\r\n\r\nconst base = document.createElement(\"div\");\r\nbase.className = \"react-root\";\r\nbase.id = \"react-root\";\r\ndocument.body.appendChild(base);\r\n\r\nexport default (app) => {\r\n  let comp;\r\n  app.on(\"loaded\", async () => {\r\n    const { renderer, component, element } = await app.event(\r\n      \"getElementContext\",\r\n      {\r\n        renderer: ReactDOM,\r\n        component: \"Index\",\r\n        element: base,\r\n      }\r\n    );\r\n    comp = element;\r\n    renderer.render(React.createElement(components[component]), element);\r\n  });\r\n\r\n  app.on(\"unmount\", () => {\r\n    ReactDOM.unmountComponentAtNode(comp);\r\n  });\r\n};\r\n","import httpsfallbackM from \"./httpsfallback\";\r\n\r\nexport default (app) => {\r\n  if (!app.settings.domain) return;\r\n  app.connection = app.addeventhandler({}, [\"emit\", \"broadcast\"], \"connection\");\r\n  const { connection } = app;\r\n\r\n  connection.on(\"broadcast\", (data) =>\r\n    connection.emit({ ...data, broadcast: true })\r\n  );\r\n\r\n  const callbacks = {};\r\n  const emitSocket = (callback) => (data) =>\r\n    new Promise((resolve) => {\r\n      if (!data.noCallback) {\r\n        data.callbackid = app.uuid();\r\n        callbacks[data.callbackid] = resolve;\r\n      } else resolve();\r\n\r\n      let message = JSON.stringify(data);\r\n\r\n      while (message.length > 64000) {\r\n        callback(message.substring(0, 64000));\r\n        message = message.substring(64000);\r\n      }\r\n      callback(message);\r\n    });\r\n\r\n  const receiveSocket = (message) => {\r\n    const data = JSON.parse(message);\r\n\r\n    if (callbacks[data.callbackid]) {\r\n      try {\r\n        callbacks[data.callbackid](data);\r\n      } catch (e) {\r\n        console.log(\"err\", callbacks[data.callbackid], e);\r\n      }\r\n      delete callbacks[data.callbackid];\r\n    }\r\n    connection.event(data.type, data);\r\n  };\r\n\r\n  const openconnection = () => {\r\n    console.log(`openconnection ${url}`);\r\n    let timer = false;\r\n    const sendSocket = emitSocket((message) => webSocket.send(message));\r\n\r\n    const webSocket = new WebSocket(url);\r\n\r\n    webSocket.onerror = (error) => {\r\n      connection.event(\"error\", { error });\r\n    };\r\n    webSocket.onclose = (error) => {\r\n      connection.event(\"connection\", { error, connected: false });\r\n      if (!timer) return;\r\n      clearInterval(timer);\r\n      connection.off(\"emit\", sendSocket);\r\n    };\r\n\r\n    webSocket.onopen = () => {\r\n      connection.on(\"emit\", sendSocket);\r\n      connection.event(\"connection\", { connected: true });\r\n      timer = setInterval(() => webSocket.send(\"li\"), 15000);\r\n    };\r\n\r\n    webSocket.onmessage = (message) => receiveSocket(message.data);\r\n  };\r\n\r\n  let delay = 0;\r\n  const url = `ws${app.settings.secure ? \"s\" : \"\"}://${app.settings.domain}`;\r\n  connection.on(\"connection\", ({ connected, fallback }) => {\r\n    if (fallback) return;\r\n\r\n    if (connected === true) delay = 0;\r\n    if (connected !== false) return;\r\n\r\n    setTimeout(openconnection, 1000 * delay);\r\n    if (delay < 50) delay += app.settings.debug ? 1 : 5;\r\n  });\r\n  openconnection();\r\n\r\n  connection.connected = false;\r\n  connection.on(\"connection\", 100, (query) => {\r\n    if (typeof query.connected === \"undefined\")\r\n      query.connected = connection.connected;\r\n\r\n    connection.connected = query.connected;\r\n  });\r\n\r\n  connection.on(\"connection\", ({ wait, connected }) => {\r\n    if (!wait || connected) return;\r\n\r\n    return new Promise((resolve) => {\r\n      const onConnect = ({ connected }) => {\r\n        if (!connected) return;\r\n        connection.off(\"connection\", onConnect);\r\n        resolve({ connected: true });\r\n      };\r\n      connection.on(\"connection\", onConnect);\r\n    });\r\n  });\r\n\r\n  if (app.settings.waitOnConnect)\r\n    app.on(\"loaded\", 1000, () =>\r\n      connection.event(\"connection\", { wait: true })\r\n    );\r\n\r\n  if (app.settings.debug) {\r\n    let state = \"notconnected\";\r\n    connection.on(\"connection\", ({ connected, fallback }) => {\r\n      if (fallback) return;\r\n\r\n      if (state === \"disconnected\" && connected) window.location.reload();\r\n      if (state === \"connected\" && !connected) state = \"disconnected\";\r\n      if (state === \"notconnected\" && connected) state = \"connected\";\r\n    });\r\n  }\r\n\r\n  httpsfallbackM(app);\r\n};\r\n","export default (app) => {\r\n  const onEmit = async (body) => {\r\n    const response = await fetch(\"/httpsfallback\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(body),\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    app.connection.event(data.type, data);\r\n    return data;\r\n  };\r\n\r\n  let state = \"notconnected\";\r\n  app.connection.on(\"connection\", ({ connected, fallback }) => {\r\n    if (!connected || fallback) return;\r\n\r\n    if (state === \"fallback\") app.connection.off(\"sendSocket\", onEmit);\r\n    state = \"connected\";\r\n  });\r\n\r\n  app.connection.on(\"error\", async () => {\r\n    if (state === \"connected\" || state === \"fallback\") return;\r\n    state = \"fallback\";\r\n\r\n    const response = await fetch(\"/httpsfallback\", {\r\n      method: \"post\",\r\n      body: \"li\",\r\n    });\r\n\r\n    if ((await response.text()) !== \"li\") return;\r\n\r\n    app.connection.on(\"emit\", onEmit);\r\n    app.connection.event(\"connection\", { connected: true, fallback: true });\r\n  });\r\n};\r\n","const viewCreatorFields = require(\"../../../viewCreatorFields.json\");\r\n\r\nconst arr2Obj = (arr, byField) =>\r\n  arr.reduce((prev, curr) => {\r\n    prev[curr[byField]] = curr;\r\n    return prev;\r\n  }, {});\r\n\r\nconst objectMap = (object, mapFn) =>\r\n  Object.keys(object).reduce((result, key) => {\r\n    result[key] = mapFn(object[key]);\r\n    return result;\r\n  }, {});\r\n\r\nconst deepCopy = (obj) => obj && JSON.parse(JSON.stringify(obj));\r\n\r\nconst getId = ({ path = \"\", id = \"\" }) => {\r\n  if (path && id) return `${path}.${id}`;\r\n  if (id) return id;\r\n  return \"\";\r\n};\r\n\r\nconst capFirst = (str) => str.substr(0, 1).toUpperCase() + str.substr(1);\r\n\r\nconst replaceInModel = ({\r\n  model,\r\n  viewFormat,\r\n  fn,\r\n  path = \"\",\r\n  dynamicFields = [],\r\n}) => {\r\n  if (!model) return {};\r\n\r\n  model = deepCopy(model);\r\n  const { type, id } = model;\r\n  const fullId = getId({ path, id });\r\n  const format = model.format || viewFormat;\r\n\r\n  let componentName = `${type}${capFirst(format)}`;\r\n  if (viewCreatorFields[componentName] === undefined)\r\n    componentName = `${type}View`;\r\n\r\n  model = fn({ model, format, path, id, fullId });\r\n  if (!model) return null;\r\n\r\n  dynamicFields = [\r\n    ...dynamicFields,\r\n    ...(viewCreatorFields[componentName] || []),\r\n  ];\r\n\r\n  dynamicFields.forEach((key) => {\r\n    if (!model[key]) return;\r\n\r\n    model[key] = model[key] instanceof Array ? model[key] : [model[key]];\r\n\r\n    model[key] = model[key]\r\n      .map((item) =>\r\n        replaceInModel({\r\n          model: item,\r\n          viewFormat,\r\n          fn,\r\n          path: fullId || path,\r\n        })\r\n      )\r\n      .filter((model) => !!model);\r\n  });\r\n\r\n  return model;\r\n};\r\n\r\nconst flattenFields = ({ item, viewCreatorFields, path = \"\" }) =>\r\n  (item || []).reduce((prev, field) => {\r\n    const { type, id } = field;\r\n    const fullPath = path ? `${path}.${id}` : id;\r\n\r\n    if (!type) return { [id]: field, ...prev };\r\n\r\n    const flatten = viewCreatorFields[`${type}Definition`];\r\n    if (!flatten) return { [fullPath]: field, ...prev };\r\n\r\n    const subFields = flatten.reduce(\r\n      (prev, key) =>\r\n        field[key]\r\n          ? flattenFields({\r\n              item: field[key],\r\n              viewCreatorFields,\r\n              path: fullPath,\r\n            })\r\n          : prev,\r\n      {}\r\n    );\r\n\r\n    return { [fullPath]: field, ...subFields, ...prev };\r\n  }, {});\r\n\r\nconst populateViews = ({ app }) => {\r\n  const { contentType } = app;\r\n\r\n  const populatedViews = objectMap(deepCopy(contentType), (contentType) => {\r\n    const { views, item } = contentType;\r\n    if (!views) return contentType;\r\n\r\n    const fields = flattenFields({ item, viewCreatorFields });\r\n\r\n    Object.entries(fields).forEach(([key, value]) => {\r\n      if (key.indexOf(\".\"))\r\n        fields[key.substring(0, key.indexOf(\".\") + 1) + key] = value;\r\n    });\r\n\r\n    const populatedViews = views.map((view) =>\r\n      replaceInModel({\r\n        model: { ...view, type: \"contentType\", id: undefined },\r\n        fn: ({ model: view, fullId, format }) => {\r\n          if (!fullId) return { format, ...view };\r\n\r\n          if (fields[fullId]) return { format, ...fields[fullId], ...view };\r\n\r\n          const partId = fullId.split(\".\").pop();\r\n          if (fields[partId]) return { format, ...fields[partId], ...view };\r\n\r\n          return { format, ...view };\r\n        },\r\n        viewFormat: view.format || \"view\",\r\n      })\r\n    );\r\n\r\n    contentType.views = arr2Obj(populatedViews, \"name\");\r\n    return contentType;\r\n  });\r\n\r\n  return populatedViews;\r\n};\r\n\r\nexport default (app) => {\r\n  app.on(\"init\", 1000, () => {\r\n    app.populatedViews = populateViews({ app });\r\n    app.replaceInModel = replaceInModel;\r\n  });\r\n};\r\n","const sortFuncInt = (key, reverse) => {\r\n  const up = reverse ? 1 : -1;\r\n  const down = reverse ? -1 : 1;\r\n\r\n  return (a, b) => {\r\n    const x = a[key];\r\n    const y = b[key];\r\n\r\n    if (x === undefined) return y === undefined ? 0 : down;\r\n    if (y === undefined) return up;\r\n    return x < y ? up : x > y ? down : 0;\r\n  };\r\n};\r\n\r\nconst sortFuncText = (key, reverse) => {\r\n  const up = reverse ? 1 : -1;\r\n  const down = reverse ? -1 : 1;\r\n\r\n  return (a, b) => {\r\n    let x = a[key];\r\n    let y = b[key];\r\n    if (x === undefined) return y === undefined ? 0 : up;\r\n    if (y === undefined) return down;\r\n    x = x.toString().toLowerCase();\r\n    y = y.toString().toLowerCase();\r\n\r\n    return x < y ? up : x > y ? down : 0;\r\n  };\r\n};\r\n\r\nconst sortByFunc = (array, sortBys) => {\r\n  const sortFuncs = sortBys.map(({ type, key, reverse }) =>\r\n    [\"int\", \"date\"].includes(type)\r\n      ? sortFuncInt(key, reverse)\r\n      : sortFuncText(key, reverse)\r\n  );\r\n  return array.sort((a, b) => {\r\n    let res;\r\n    for (let i = 0; i < sortFuncs.length; i++) {\r\n      res = sortFuncs[i](a, b);\r\n      if (res !== 0) return res;\r\n    }\r\n    return res;\r\n  });\r\n};\r\n\r\nfunction field2IdType(contentType) {\r\n  const field2IdType = {};\r\n  contentType.item = contentType.item || [];\r\n  for (let i = 0; i < contentType.item.length; i++) {\r\n    const item = contentType.item[i];\r\n    field2IdType[item.id] = item.extends ? item.extends : item.type;\r\n  }\r\n  field2IdType._crdate = \"date\";\r\n  return field2IdType;\r\n}\r\n\r\nfunction setSearchDefaults(query, contentType) {\r\n  const items = contentType.item || [];\r\n  query.sortby = !query.sortby\r\n    ? items.find((item) => item.id === \"title\")\r\n      ? \"title\"\r\n      : \"name\"\r\n    : query.sortby;\r\n\r\n  query.sortby = query.sortby || \"_chdate\";\r\n  query.position = query.position || 0;\r\n  query.count = query.count || 200;\r\n}\r\n\r\nfunction getFilterArray(filter) {\r\n  if (filter && Object.keys(filter).length === 0) return [];\r\n  if (filter && filter.$and) {\r\n    filter = { ...filter };\r\n    const tmp = filter.$and;\r\n    delete filter.$and;\r\n    if (tmp instanceof Array) return tmp.concat(filter);\r\n    return [filter, tmp];\r\n  }\r\n\r\n  return [filter];\r\n}\r\n\r\nexport default (app) => {\r\n  app.database.on(\"init\", ({ collection, db }) => {\r\n    const { contentType } = collection;\r\n    const fieldByType = field2IdType(contentType);\r\n\r\n    collection.on(\"init\", 10, () => {\r\n      const { dbArray } = db;\r\n      sortByFunc(dbArray, [{ type: \"int\", key: \"_chdate\" }]);\r\n    });\r\n\r\n    const addFields2All = (add2id, searchFor, oneSearchField, oneSearchValue) =>\r\n      contentType.item.forEach((oneField) => {\r\n        if (oneField.id && oneField.type !== \"date\") {\r\n          oneSearchField.push(add2id + oneField.id);\r\n          oneSearchValue.push(searchFor);\r\n        } else if (oneField.add2id)\r\n          addFields2All(\r\n            `${add2id + oneField.add2id}_`,\r\n            searchFor,\r\n            oneSearchField,\r\n            oneSearchValue\r\n          );\r\n      });\r\n\r\n    function getFilter(query) {\r\n      const searchField = [];\r\n      const searchValue = [];\r\n      const searchInvert = [];\r\n\r\n      getFilterArray(query.filter).forEach((filter) => {\r\n        const oneSearchField = [];\r\n        const oneSearchValue = [];\r\n        const oneSearchInvert = [];\r\n\r\n        if (filter.$all && filter.$all !== \"\")\r\n          addFields2All(\r\n            \"\",\r\n            createRegExp(filter.$all),\r\n            oneSearchField,\r\n            oneSearchValue\r\n          );\r\n\r\n        const exact = filter.__exact || query.exact;\r\n        Object.entries(filter).forEach(([field, value], index) => {\r\n          if (![\"$all\", \"__id\", \"__exact\"].includes(field)) {\r\n            oneSearchField.push(field);\r\n\r\n            if (value[0] === \"!\") {\r\n              oneSearchInvert[index] = true;\r\n              value = value.substring(1);\r\n            }\r\n\r\n            if (exact) oneSearchValue.push(createRegExp(`^${value}$`));\r\n            else if (value instanceof Array) {\r\n              oneSearchValue.push(createRegExp(value.join(\"|\")));\r\n            } else if (!value) oneSearchValue.push(\"false\");\r\n            else if (value === true) oneSearchValue.push(\"true\");\r\n            else if (\"<>\".indexOf(value[0]) !== -1) oneSearchValue.push(value);\r\n            else oneSearchValue.push(createRegExp(value, field));\r\n          }\r\n        });\r\n\r\n        if (oneSearchField.length > 0) {\r\n          searchField.push(oneSearchField);\r\n          searchValue.push(oneSearchValue);\r\n          searchInvert.push(oneSearchInvert);\r\n        }\r\n      });\r\n      if (searchField.length === 0) return {};\r\n      return { searchField, searchValue, searchInvert };\r\n    }\r\n\r\n    function createRegExp(expression, id) {\r\n      if (fieldByType[id] === \"boolean\") return expression;\r\n      return new RegExp(expression.toString().replace(/\\*/g, \"\\\\*\"), \"i\");\r\n    }\r\n\r\n    function search(query) {\r\n      if (query.data !== undefined) return;\r\n\r\n      const { dbArray } = db;\r\n      query.total = dbArray.length;\r\n      setSearchDefaults(query, contentType);\r\n      let result = [];\r\n\r\n      function filterResult(query) {\r\n        const { searchField, searchValue, searchInvert } = getFilter(query);\r\n        if (!searchField) return false;\r\n\r\n        for (let pos = 0; pos < dbArray.length; pos++) {\r\n          const thisItem = dbArray[pos];\r\n          let add = false;\r\n          for (let i = 0; i < searchField.length; i++) {\r\n            add = false;\r\n            for (let field = 0; field < searchField[i].length; field++) {\r\n              let val = thisItem[searchField[i][field]];\r\n              const matchVal = searchValue[i][field];\r\n              if (val && val.toString() === \"[object Object]\")\r\n                val = JSON.stringify(val);\r\n\r\n              const addOne =\r\n                (matchVal === \"false\" && !val) ||\r\n                (matchVal === \"true\" && val) ||\r\n                (matchVal[0] === \"<\" &&\r\n                  parseFloat(val) < parseFloat(matchVal.substring(1))) ||\r\n                (matchVal[0] === \">\" &&\r\n                  parseFloat(val) > parseFloat(matchVal.substring(1))) ||\r\n                (val && matchVal.test && matchVal.test(val));\r\n\r\n              if (\r\n                (addOne && !searchInvert[i][field]) ||\r\n                (!addOne && searchInvert[i][field])\r\n              ) {\r\n                add = true;\r\n                break;\r\n              }\r\n            }\r\n            if (!add) break;\r\n          }\r\n          if (add) result.push(thisItem);\r\n        }\r\n        return true;\r\n      }\r\n\r\n      let sortBy =\r\n        query.sortby instanceof Array\r\n          ? query.sortby\r\n          : [query.sortby || \"_chdate\"];\r\n\r\n      let reverse =\r\n        query.reverse instanceof Array\r\n          ? query.reverse\r\n          : [query.reverse || false];\r\n\r\n      if (sortBy[0] === \"_chdate\" && sortBy.length === 1) sortBy = false;\r\n      if (reverse[0] === false && reverse.length === 1) reverse = false;\r\n\r\n      if (!query.filter || !filterResult(query)) {\r\n        if (sortBy || (reverse && result.length <= query.count)) {\r\n          result = new Array(dbArray.length);\r\n          let i = dbArray.length;\r\n          while (i--) result[i] = dbArray[i];\r\n        } else result = dbArray;\r\n      }\r\n\r\n      query.searchTotal = result.length;\r\n\r\n      if (sortBy)\r\n        sortByFunc(\r\n          result,\r\n          sortBy.map((key, index) => ({\r\n            type: fieldByType[key],\r\n            key,\r\n            reverse: reverse[index],\r\n          }))\r\n        );\r\n      else if (reverse[0]) {\r\n        if (result === dbArray) result = [...result];\r\n        result.reverse();\r\n      }\r\n      if (result.length <= query.position) result = [];\r\n      else if (result.length > query.count)\r\n        result = result.slice(query.position, query.position + query.count);\r\n\r\n      query.data = result.length ? result : false;\r\n    }\r\n    collection.on(\"search\", 1000, search);\r\n  });\r\n};\r\n","import deleteM from \"./delete\";\r\nimport findM from \"./find\";\r\nimport getM from \"./get\";\r\nimport initM from \"./init\";\r\nimport saveM from \"./save\";\r\nimport searchM from \"./search\";\r\n\r\nexport default (app) => {\r\n  deleteM(app);\r\n  findM(app);\r\n  getM(app);\r\n  initM(app);\r\n  saveM(app);\r\n  searchM(app);\r\n\r\n  app.database.on(\r\n    \"init\",\r\n    ({ contentType }) => {\r\n      const db = { dbArray: [], dbIndex: {} };\r\n\r\n      const collection = app.addeventhandler(\r\n        { contentType },\r\n        [\r\n          \"delete\",\r\n          \"find\",\r\n          \"get\",\r\n          \"init\",\r\n          \"save\",\r\n          \"search\",\r\n          \"size\",\r\n          \"update\",\r\n          \"updates\",\r\n        ],\r\n        `database ${contentType.machinename}`\r\n      );\r\n\r\n      collection.on(\"init\", () => {\r\n        const { dbArray, dbIndex } = db;\r\n        dbArray.forEach((item) => {\r\n          if (dbIndex[item._id])\r\n            dbArray.splice(dbArray.indexOf(dbIndex[item._id]), 1);\r\n          dbIndex[item._id] = item;\r\n        });\r\n      });\r\n\r\n      collection.on(\"size\", () => db.dbArray.length);\r\n      return { collection, db, contentType };\r\n    },\r\n    1000\r\n  );\r\n};\r\n","export default (app) => {\r\n  app.database.on(\"init\", ({ collection, db }) => {\r\n    collection.on(\"delete\", 1000, (query) => {\r\n      const id = query.id || query.data._id;\r\n      const data = query.data || { _id: id };\r\n      return Object.assign(query, { id, oldData: db.dbIndex[id], data });\r\n    });\r\n\r\n    collection.on(\"delete\", -200, (query) => {\r\n      if (!query.data) return;\r\n      const { dbArray, dbIndex } = db;\r\n      delete dbIndex[query.id];\r\n      const pos = dbArray.indexOf(query.oldData);\r\n      dbArray.splice(pos, 1);\r\n    });\r\n  });\r\n};\r\n","export default app => {\r\n  app.database.on(\"init\", ({ collection, db }) => {\r\n    collection.on(\"find\", 1000, query => {\r\n      const { field, value, data, testIfSet } = query;\r\n      if (data) return;\r\n      const { dbArray } = db;\r\n\r\n      if (!testIfSet) {\r\n        for (let i = 0; i < dbArray.length; i++)\r\n          if (dbArray[i][field] === value)\r\n            return { ...query, data: dbArray[i] };\r\n        return query;\r\n      }\r\n\r\n      for (let i = 0; i < dbArray.length; i++)\r\n        if (!dbArray[i][field] === !value)\r\n          return { ...query, data: dbArray[i] };\r\n    });\r\n  });\r\n};\r\n","export default app => {\r\n  app.database.on(\"init\", ({ collection, db }) => {\r\n    collection.on(\r\n      \"get\",\r\n      1000,\r\n      query =>\r\n        query.data\r\n          ? query\r\n          : { ...query, data: db.dbIndex[query.id] }\r\n    );\r\n  });\r\n};\r\n","export default app => {\r\n  app.database.on(\"init\", ({ collection, db }) => {\r\n    collection.on(\"init\", 1000, query => Object.assign(db, query));\r\n    collection.on(\"init\", -1000, () => {\r\n      /* collection.on(\r\n        \"init\",\r\n        () => {\r\n          throw new Error(\"Initited already\");\r\n        },\r\n        1001\r\n      ); */\r\n      return collection;\r\n    });\r\n  });\r\n};\r\n","export default (app) => {\r\n  app.database.on(\"init\", ({ collection, db }) => {\r\n    collection.on(\"save\", 2000, (query) => {\r\n      const id = query.id || (query.data && query.data._id);\r\n      if (!id || query.oldData) return;\r\n\r\n      const oldData = db.dbIndex[id];\r\n      if (!oldData) return;\r\n\r\n      if (query.fields) query.data = { ...oldData, ...query.data };\r\n      return { ...query, oldData };\r\n    });\r\n\r\n    collection.on(\"save\", 1000, (query) => {\r\n      if (!query.data) return;\r\n\r\n      // eslint-disable-next-line no-multi-assign\r\n      query.data._id = query.id = query.id || query.data._id || app.uuid();\r\n    });\r\n\r\n    collection.on(\"save\", -100, (query) => {\r\n      if (!query.data) return;\r\n\r\n      const { dbArray, dbIndex } = db;\r\n\r\n      if (query.oldData) {\r\n        dbArray.splice(dbArray.indexOf(query.oldData), 1);\r\n        delete dbIndex[query.oldData._id];\r\n      }\r\n\r\n      dbIndex[query.id] = query.data;\r\n      dbArray.push(query.data);\r\n    });\r\n  });\r\n};\r\n","const getKey = (data) => JSON.stringify(data);\r\n\r\nexport default (app) => {\r\n  if (app.settings.noClientCache) return;\r\n\r\n  app.database.on(\"init\", ({ collection, db }) => {\r\n    if (collection.contentType.noClientCache) return;\r\n\r\n    const insertItem = (item) => {\r\n      const { dbIndex, dbArray } = db;\r\n      if (dbIndex[item._id]) return;\r\n\r\n      dbIndex[item._id] = item;\r\n\r\n      const chdate = item._chdate;\r\n      let pos = dbArray.length - 1;\r\n\r\n      if (chdate)\r\n        while (\r\n          pos >= 0 &&\r\n          (!dbArray[pos]._chdate || dbArray[pos]._chdate > chdate)\r\n        )\r\n          pos -= 1;\r\n\r\n      if (pos === dbArray.length - 1) dbArray.push(item);\r\n      else dbArray.splice(pos + 1, 0, item);\r\n\r\n      collection.event(\"saveStorage\");\r\n    };\r\n\r\n    let searchCache = {};\r\n    let allInCache = false;\r\n\r\n    collection.on([\"update\", \"clearCache\"], 2000, () => {\r\n      searchCache = {};\r\n      allInCache = false;\r\n    });\r\n\r\n    collection.on(\"search\", 2000, (query) => {\r\n      const inCache =\r\n        allInCache || searchCache[getKey({ ...query, data: undefined })];\r\n\r\n      return { ...query, inCache };\r\n    });\r\n    collection.on(\"search\", -1000, (query) => {\r\n      if (!query.data || allInCache) return;\r\n\r\n      allInCache =\r\n        query.count > query.searchTotal && query.searchTotal === query.total;\r\n\r\n      query.data.forEach(insertItem);\r\n\r\n      const key = getKey({ ...query, data: undefined });\r\n      if (!searchCache[key]) searchCache[key] = true;\r\n    });\r\n\r\n    collection.on([\"get\", \"find\"], -1000, ({ data }) => {\r\n      if (!allInCache && data) insertItem(data);\r\n    });\r\n  });\r\n};\r\n","import connectionM from \"./connection\";\r\nimport updatesM from \"./updates\";\r\nimport debugM from \"./debug\";\r\nimport memdbM from \"./memdb\";\r\nimport cacheM from \"./cache\";\r\nimport storageM from \"./storage\";\r\nimport saveQueueM from \"./saveQueue\";\r\n\r\nexport default (app) => {\r\n  const database = app.addeventhandler(\r\n    {},\r\n    [\"init\", \"add\", \"clearCache\"],\r\n    \"databaseglobal\"\r\n  );\r\n  app.database = database;\r\n\r\n  connectionM(app);\r\n  updatesM(app);\r\n  debugM(app);\r\n  memdbM(app);\r\n  cacheM(app);\r\n  storageM(app);\r\n  saveQueueM(app);\r\n\r\n  database.on(\"clearCache\", () =>\r\n    Promise.all(\r\n      Object.keys(app.contentType)\r\n        .filter((item) => database[item])\r\n        .map((item) => database[item].event(\"clearCache\"))\r\n    )\r\n  );\r\n\r\n  const initDatabases = (contentTypes) =>\r\n    contentTypes\r\n      .filter((contentType) => contentType.storage !== \"none\")\r\n      .map((contentType) =>\r\n        database\r\n          .init({ contentType })\r\n          .then(({ collection }) => collection.init())\r\n          .then(\r\n            // eslint-disable-next-line no-return-assign\r\n            (collection) => (database[contentType.machinename] = collection)\r\n          )\r\n      );\r\n\r\n  app.on(\"init\", -100, () => {\r\n    app.connection.on(\"databaseUpdate\", (data) =>\r\n      database[data.contentType].update(data)\r\n    );\r\n    return Promise.all(initDatabases(Object.values(app.contentType))).then(\r\n      () => {\r\n        app.on([\"login\", \"logout\"], () => {\r\n          database.clearCache().then(() => undefined);\r\n        });\r\n      }\r\n    );\r\n  });\r\n};\r\n","export default (app) => {\r\n  let connected = false;\r\n  app.on(\"init\", () => {\r\n    ({ connected } = app.connection);\r\n    app.connection.on(\"connection\", (query) => {\r\n      ({ connected } = query);\r\n    });\r\n  });\r\n\r\n  app.database.on(\"init\", ({ collection, contentType }) => {\r\n    const send = (action, query) =>\r\n      app.connection\r\n        .emit({\r\n          type: \"database\",\r\n          action,\r\n          contentType: contentType.machinename,\r\n          query,\r\n        })\r\n        .then((event) => event.query);\r\n\r\n    [\"find\", \"get\", \"size\"].forEach((event) => {\r\n      collection.on(event, 900, (query) =>\r\n        query.data\r\n          ? undefined\r\n          : !connected\r\n          ? { ...query, offline: true }\r\n          : send(event, query)\r\n      );\r\n    });\r\n\r\n    collection.on(\"delete\", 2700, (query) =>\r\n      !connected ? { ...query, offline: true } : send(\"delete\", query)\r\n    );\r\n\r\n    collection.on(\"save\", 2700, (query) =>\r\n      !connected ? { ...query, offline: true } : send(\"save\", query)\r\n    );\r\n\r\n    collection.on(\"search\", 1700, (query) =>\r\n      query.inCache\r\n        ? undefined\r\n        : !connected\r\n        ? { ...query, offline: true }\r\n        : send(\"search\", query)\r\n    );\r\n\r\n    collection.on(\"updates\", (query) => send(\"updates\", query));\r\n    collection.on(\"update\", 200, (query) => ({\r\n      ...query,\r\n      offline: !connected,\r\n    }));\r\n\r\n    app.connection.on(\"database\", (event) => {\r\n      if (\r\n        event.contentType !== contentType.machinename ||\r\n        ![\"update\"].includes(event.action)\r\n      )\r\n        return;\r\n\r\n      collection[event.action](event.query);\r\n    });\r\n\r\n    app.connection.on(\"connection\", ({ connected }) => {\r\n      if (connected) collection.updates();\r\n    });\r\n  });\r\n};\r\n","export default (app) => {\r\n  app.database.on(\"init\", ({ collection, db }) => {\r\n    let ids = [];\r\n    const updateSearch = {};\r\n    const updateGet = {};\r\n    let timer03;\r\n    let timer20;\r\n\r\n    const timeoutTimes = (app.settings.database &&\r\n      app.settings.database.updateFrequency) || [300, 2000];\r\n\r\n    const updateEvent = () => {\r\n      clearTimeout(timer03);\r\n      clearTimeout(timer20);\r\n      timer20 = false;\r\n      collection.event(\"update\", { ids }).then(() => {\r\n        ids = [];\r\n      });\r\n    };\r\n\r\n    collection.on(\"get\", 1000, (query) => {\r\n      if (!query.onData || query.callbackId) return;\r\n      query.callbackId = app.uuid();\r\n      updateGet[query.id] = updateGet[query.id] || {};\r\n      updateGet[query.id][query.callbackId] = query.onData;\r\n      delete query.onData;\r\n    });\r\n    collection.on(\"get\", -1000, (query) => {\r\n      if (query.callbackId) updateGet[query.id][query.callbackId](query);\r\n    });\r\n\r\n    collection.on(\"search\", 1000, (query) => {\r\n      if (!query.onData || query.callbackId) return;\r\n      query.callbackId = app.uuid();\r\n      updateSearch[query.callbackId] = { ...query, data: false };\r\n      delete query.onData;\r\n    });\r\n    collection.on(\"search\", -1000, (query) => {\r\n      if (query.callbackId) updateSearch[query.callbackId].onData(query);\r\n    });\r\n\r\n    collection.on(\"offUpdate\", (query) => {\r\n      if (updateSearch[query.callbackId]) delete updateSearch[query.callbackId];\r\n      else delete updateGet[query.id][query.callbackId];\r\n    });\r\n\r\n    collection.on([\"save\", \"delete\"], -1000, (query) => {\r\n      if (!query.offline) return;\r\n\r\n      if (timer03) clearTimeout(timer03);\r\n      timer03 = setTimeout(updateEvent, timeoutTimes[0]);\r\n      if (!timer20) timer20 = setTimeout(updateEvent, timeoutTimes[1]);\r\n      if (!ids.includes(query.id)) ids.push(query.id);\r\n    });\r\n\r\n    const delItem = (id) => {\r\n      // Not working, strange...\r\n      // dbArray.splice(dbArray.indexOf(dbIndex[id]),1);\r\n      db.dbArray = db.dbArray.filter((i) => i._id !== id);\r\n      delete db.dbIndex[id];\r\n    };\r\n\r\n    collection.on(\"update\", ({ ids, offline }) => {\r\n      if (offline) return;\r\n      if (ids) {\r\n        ids.forEach(delItem);\r\n        return;\r\n      }\r\n\r\n      db.dbArray = [];\r\n      db.dbIndex = {};\r\n    });\r\n\r\n    collection.on(\"update\", -1000, ({ ids }) => {\r\n      Object.values(updateSearch).forEach((query) =>\r\n        collection.search({ ...query, data: false, onData: false })\r\n      );\r\n\r\n      const updateGetIds = ids\r\n        ? ids.filter((id) => updateGet[id])\r\n        : Object.keys(updateGet);\r\n\r\n      updateGetIds.forEach((id) => {\r\n        Object.values(updateGet[id]).forEach((callbackId) =>\r\n          collection\r\n            .get({ id })\r\n            .then((query) => updateGet[id][callbackId](query))\r\n        );\r\n      });\r\n\r\n      collection.event(\"saveStorage\");\r\n    });\r\n\r\n    collection.on(\"updates\", 1000, () => {\r\n      const { dbArray } = db;\r\n      const i = dbArray.length - 1;\r\n\r\n      if (i === -1 || !dbArray[i]._chdate) return;\r\n\r\n      return { date: dbArray[i]._chdate };\r\n    });\r\n    collection.on(\"updates\", -1000, collection.update);\r\n  });\r\n};\r\n","/*\r\nfunction getStackTrace(row) {\r\n  const obj = {};\r\n  Error.captureStackTrace(obj, getStackTrace);\r\n  if (row) return obj.stack.split(\"\\n\")[row].replace(\"   at \", \"\");\r\n  return obj.stack;\r\n}\r\n*/\r\nexport default app => {\r\n  app.database.on(\"init\", ({ collection, db }) => {\r\n    /*\r\n    [\"delete\", \"find\", \"get\", \"save\", \"search\", \"size\"].forEach(event => {\r\n      collection.on(\r\n        event,\r\n        query => {\r\n          console.log(event, query, getStackTrace(6));\r\n        },\r\n        1002\r\n      );\r\n    });*/\r\n  });\r\n};\r\n","export default (app) => {\r\n  if (app.settings.noClientCache) return;\r\n\r\n  app.database.on(\"init\", ({ collection, db }) => {\r\n    const id = `dbStorage${collection.contentType.machinename}`;\r\n\r\n    collection.on([\"save\", \"delete\", \"saveStorage\"], -1000, () => {\r\n      app.storage.setItemDebounce({ id, value: db.dbArray, delay: 500 });\r\n    });\r\n\r\n    collection.on(\"init\", 1000, () =>\r\n      app.storage.getItem({ id }).then(({ value }) => {\r\n        db.dbArray = value || [];\r\n      })\r\n    );\r\n\r\n    collection.on(\"clearCache\", () => {\r\n      app.storage.setItemDebounce({ id, value: [], delay: 0 });\r\n      db.dbArray = [];\r\n      db.dbIndex = {};\r\n    });\r\n  });\r\n};\r\n","export default (app) => {\r\n  if (app.settings.noClientCache) return;\r\n\r\n  app.database.on(\"init\", ({ collection, db }) => {\r\n    const storageId = `dbSaveQueue${collection.contentType.machinename}`;\r\n\r\n    let saveQueue = {};\r\n    app.storage\r\n      .getItem({ id: storageId })\r\n      // eslint-disable-next-line no-return-assign\r\n      .then(({ value }) => (saveQueue = value || {}));\r\n\r\n    const add = ({ id, data, offline }) => {\r\n      if (!offline) return;\r\n      saveQueue[id] = data;\r\n      app.storage.setItemDebounce({\r\n        id: storageId,\r\n        value: saveQueue,\r\n        delay: 300,\r\n      });\r\n    };\r\n    collection.on(\"save\", -1000, (query) => add(query));\r\n    collection.on(\"delete\", -1000, (query) =>\r\n      add({ ...query, data: \"deleted\" })\r\n    );\r\n\r\n    collection.on(\"updates\", 500, (query) => {\r\n      const { dbArray } = db;\r\n      const { date } = query;\r\n      if (!date) return;\r\n\r\n      let i = dbArray.length - 1;\r\n      console.log(\"saveQueue\");\r\n      while (i !== -1 && !saveQueue[dbArray[i]._id]) {\r\n        // date = dbArray[i]._chdate;\r\n        i--;\r\n      }\r\n      return { ...query, saveQueue, date };\r\n    });\r\n    collection.on(\"updates\", -500, () => {\r\n      saveQueue = {};\r\n      app.storage.setItem({ id: storageId, value: {} });\r\n    });\r\n  });\r\n};\r\n","export default (app) => {\r\n  const { userContentType = \"adminUser\" } = app.settings;\r\n  const sessionKey = `session${userContentType}`;\r\n\r\n  app.session = app.addeventhandler({}, [\"login\", \"logout\"], \"session\");\r\n  const { session } = app;\r\n  let autoLoginUser = false;\r\n\r\n  function loginEvent(user) {\r\n    if (JSON.stringify(user) === JSON.stringify(session.user)) return;\r\n\r\n    try {\r\n      app.storage.setItem({ id: sessionKey, value: user });\r\n      // eslint-disable-next-line no-empty\r\n    } catch (e) {}\r\n    session.user = user;\r\n    if (typeof session.user.role === \"string\")\r\n      session.user.role = [session.user.role];\r\n\r\n    app.event(\"login\", user);\r\n  }\r\n\r\n  session.on(\"login\", (value) =>\r\n    app.connection\r\n      .emit({\r\n        type: \"login\",\r\n        data: value,\r\n        sessionid: value.sessionid,\r\n        contentType: value.contentType,\r\n      })\r\n      .then((query) => {\r\n        const { user } = query;\r\n\r\n        if (user && !query.error) loginEvent(user);\r\n        else if (session.user !== autoLoginUser) {\r\n          session.user = autoLoginUser;\r\n          try {\r\n            app.storage.removeItem({ id: sessionKey });\r\n            // eslint-disable-next-line no-empty\r\n          } catch (e) {}\r\n        }\r\n        return query;\r\n      })\r\n  );\r\n  app.on(\"init\", -100, () => {\r\n    app.connection.on(\"autologin\", (query) => {\r\n      const { user, error } = query;\r\n\r\n      if (!user || error) return;\r\n      autoLoginUser = user;\r\n      if (session.user) return;\r\n\r\n      session.user = user;\r\n      if (typeof session.user.role === \"string\")\r\n        session.user.role = [session.user.role];\r\n\r\n      app.event(\"login\", user);\r\n    });\r\n\r\n    const reload = ({ key, id }) => {\r\n      if ((key || id) !== sessionKey) return;\r\n      window.location.reload();\r\n    };\r\n    window.addEventListener(\"storage\", reload);\r\n    app.storage.on(\"removeItem\", -1000, reload);\r\n    app.storage.on(\"setItem\", -1000, reload);\r\n\r\n    session.on(\"logout\", () => {\r\n      app.storage.removeItem({ id: sessionKey });\r\n\r\n      delete session.user;\r\n\r\n      app.connection.emit({\r\n        type: \"logout\",\r\n        contentType: userContentType,\r\n        noCallback: true,\r\n      });\r\n\r\n      app.event(\"logout\");\r\n    });\r\n\r\n    app.connection.on(\"logout\", () => {\r\n      app.storage.removeItem({ id: sessionKey });\r\n    });\r\n\r\n    app.storage.getItem({ id: sessionKey }).then(({ value: userStore }) => {\r\n      session.user = userStore || autoLoginUser;\r\n\r\n      if (userStore) {\r\n        if (app.connection.connected) session.login(userStore);\r\n\r\n        app.connection.on(\"connection\", ({ connected }) => {\r\n          if (connected) session.login(userStore);\r\n        });\r\n      }\r\n    });\r\n  });\r\n};\r\n","import connectionM from \"./connection\";\r\n\r\nexport default (app) => {\r\n  if (!app.settings.domain) connectionM(app);\r\n\r\n  if (window.electron) {\r\n    window.electron.on((info, data) => app.event(\"electronData\", data));\r\n    app.on(\"electronEvent\", (data) => window.electron.send(data));\r\n  }\r\n};\r\n","export default (app) => {\r\n  if (app.settings.domain) return;\r\n\r\n  app.connection = app.addeventhandler({}, [\"emit\", \"broadcast\"], \"connection\");\r\n  const { connection } = app;\r\n\r\n  const callbacks = {};\r\n\r\n  const send = (data) =>\r\n    new Promise((resolve) => {\r\n      if (!data.noCallback) {\r\n        data.callbackid = app.uuid();\r\n        callbacks[data.callbackid] = resolve;\r\n      } else resolve();\r\n\r\n      app.event(\"electronEvent\", data);\r\n    });\r\n\r\n  connection.on(\"broadcast\", (data) => send({ ...data, broadcast: true }));\r\n  connection.on(\"emit\", send);\r\n\r\n  app.on(\"electronData\", (data) => {\r\n    if (callbacks[data.callbackid]) {\r\n      try {\r\n        callbacks[data.callbackid](data);\r\n      } catch (e) {\r\n        console.log(\"err\", callbacks[data.callbackid], e);\r\n      }\r\n      delete callbacks[data.callbackid];\r\n    }\r\n    connection.event(data.type, data);\r\n  });\r\n\r\n  connection.connected = false;\r\n  connection.on(\"connection\", 100, (query) => {\r\n    if (typeof query.connected === \"undefined\")\r\n      query.connected = connection.connected;\r\n\r\n    connection.connected = query.connected;\r\n  });\r\n\r\n  app.on(\"start\", () => {\r\n    connection.event(\"connection\", { connected: true });\r\n  });\r\n\r\n  connection.on(\"connection\", ({ wait, connected }) => {\r\n    if (!wait || connected) return;\r\n\r\n    return new Promise((resolve) => {\r\n      const onConnect = ({ connected }) => {\r\n        if (!connected) return;\r\n        connection.off(\"connection\", onConnect);\r\n        resolve({ connected: true });\r\n      };\r\n      connection.on(\"connection\", onConnect);\r\n    });\r\n  });\r\n};\r\n","// obj instanceof Promise\r\n\r\nconst getStackTrace = (row) => {\r\n  const obj = {};\r\n  if (!Error.captureStackTrace) return;\r\n  Error.captureStackTrace(obj, getStackTrace);\r\n  if (row === 3) console.log(obj.stack.split(\"\\n\"));\r\n  const [, source, line, column] =\r\n    /https?:\\/\\/[^/]+\\/([^:]+):([^:]+):([0-9]+)/im.exec(\r\n      obj.stack.split(\"\\n\")[row]\r\n    ) || [];\r\n\r\n  return !source\r\n    ? obj.stack.split(\"\\n\")[row]\r\n    : translate(`${source} ${line}:${column}`);\r\n};\r\n\r\nlet translate = (str) => str;\r\n\r\nif (\r\n  typeof window !== \"undefined\" &&\r\n  window.location.host.includes(\"localhost\")\r\n) {\r\n  const addScript = (src) =>\r\n    new Promise((resolve) => {\r\n      if (\r\n        [...document.head.children].some(\r\n          (child) => child.getAttribute(\"src\") === src\r\n        )\r\n      ) {\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      const scriptEl = document.createElement(\"script\");\r\n\r\n      scriptEl.setAttribute(\"src\", src);\r\n      scriptEl.onload = resolve;\r\n      document.head.appendChild(scriptEl);\r\n    });\r\n\r\n  addScript(\"/source-map.js\").then(async () => {\r\n    window.sourceMap.SourceMapConsumer.initialize({\r\n      \"lib/mappings.wasm\": \"/mappings.wasm\",\r\n    });\r\n    try {\r\n      const consumer = await new window.sourceMap.SourceMapConsumer(\r\n        await fetch(\"/static/js/main.chunk.js.map\").then((res) => res.json())\r\n      );\r\n      translate = (str) => {\r\n        if (!str || !str.includes(\":\")) return str;\r\n\r\n        let [source, line, column] = str.split(/[ :]/);\r\n\r\n        ({ source, line, column } = consumer.originalPositionFor({\r\n          line: parseInt(line, 10),\r\n          column: parseInt(column, 10),\r\n        }));\r\n        return `${source} ${line}:${column}`;\r\n      };\r\n      // eslint-disable-next-line no-empty\r\n    } catch (e) {}\r\n  });\r\n}\r\n\r\nif (typeof window !== \"undefined\") window.addEventHandlers = {};\r\n\r\nexport default function addEventHandler(context, mapevents, name) {\r\n  const callbacks = {};\r\n  const callbacksprio = {};\r\n  const callbacksStack = {};\r\n  if (typeof mapevents === \"string\") {\r\n    name = mapevents;\r\n    mapevents = undefined;\r\n  }\r\n\r\n  callbacksStack.addEventHandlerInitiator = [\r\n    `${name} ${Math.random()}`,\r\n    getStackTrace(2),\r\n  ];\r\n\r\n  setTimeout(() => {\r\n    if (typeof window !== \"undefined\") {\r\n      Object.entries(callbacksStack).forEach(([key, value]) => {\r\n        callbacksStack[key] = value.map((item) => translate(item));\r\n      });\r\n\r\n      window.addEventHandlers[callbacksStack.addEventHandlerInitiator[0]] =\r\n        callbacksStack;\r\n    }\r\n  }, 1000);\r\n\r\n  context = context || {};\r\n\r\n  const addEvent = (event, callback, prio) => {\r\n    if (typeof callback === \"number\") {\r\n      const tmp = callback;\r\n      callback = prio;\r\n      prio = tmp;\r\n    }\r\n\r\n    if (!callback) return console.error(\"No callback\", getStackTrace(5));\r\n    if (typeof callback !== \"function\")\r\n      return console.error(\"Not a function\", getStackTrace(5), callback);\r\n\r\n    prio = prio || 0;\r\n\r\n    if (!callbacks[event]) {\r\n      callbacks[event] = [];\r\n      callbacksprio[event] = [];\r\n      callbacksStack[event] = [];\r\n    }\r\n\r\n    let pos = callbacks[event].length;\r\n    while (pos && callbacksprio[event][pos - 1] < prio) pos--;\r\n\r\n    callbacksprio[event].splice(pos, 0, prio);\r\n    callbacks[event].splice(pos, 0, callback);\r\n    callbacksStack[event].splice(pos, 0, getStackTrace(5));\r\n  };\r\n\r\n  context.on = (event, callback, prio) => {\r\n    event = event instanceof Array ? event : [event];\r\n    event.forEach((event) => addEvent(event, callback, prio));\r\n  };\r\n\r\n  const removeEvent = (event, callback) => {\r\n    if (!callbacks[event]) {\r\n      console.log(\"Missing event\", event, callbacks);\r\n      return;\r\n    }\r\n    const pos = callbacks[event].indexOf(callback);\r\n    if (pos !== -1) {\r\n      callbacks[event].splice(pos, 1);\r\n      callbacksprio[event].splice(pos, 1);\r\n      callbacksStack[event].splice(pos, 1);\r\n    }\r\n\r\n    if (!callbacks[event].length) delete callbacks[event];\r\n  };\r\n\r\n  context.off = (event, callback) => {\r\n    event = event instanceof Array ? event : [event];\r\n    event.forEach((event) => removeEvent(event, callback));\r\n  };\r\n\r\n  const fired = {};\r\n  const doEvent = (event, data) => {\r\n    data = data || {};\r\n    const callback = callbacks[event];\r\n\r\n    if (!callback) return Promise.resolve(data);\r\n    if (!fired[event]) fired[event] = true;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const timer = setTimeout(() => {\r\n        console.log(\r\n          event,\r\n          \" Stopped at\",\r\n          pos,\r\n          callback.length,\r\n          Object.keys(context),\r\n          callbacksStack[event][pos - 1],\r\n          callbacksStack[event]\r\n        );\r\n      }, 5000);\r\n      let pos = 0;\r\n      let oldData = data;\r\n\r\n      const next = (data) => {\r\n        if (data instanceof Promise) {\r\n          data.then(next).catch(reject);\r\n          return;\r\n        }\r\n\r\n        data = typeof data === \"undefined\" ? oldData : data;\r\n\r\n        if (pos >= callback.length) {\r\n          clearTimeout(timer);\r\n          resolve(data);\r\n          return;\r\n        }\r\n\r\n        oldData = data;\r\n        Promise.resolve(callback[pos++](data))\r\n          .then(next)\r\n          .catch(reject);\r\n      };\r\n      next(data);\r\n    });\r\n  };\r\n  context.event = doEvent;\r\n\r\n  context.waitFor = (event) => {\r\n    if (fired[event]) return;\r\n\r\n    return new Promise((resolve) => {\r\n      context.on(event, () => {\r\n        resolve();\r\n      });\r\n    });\r\n  };\r\n\r\n  if (mapevents)\r\n    mapevents.forEach((event) => {\r\n      context[event] = (data, defectiveCallback) => {\r\n        if (defectiveCallback) debugger;\r\n        return doEvent(event, data);\r\n      };\r\n    });\r\n\r\n  return context;\r\n};\r\n","// eslint-disable-next-line import/extensions\r\nimport indexScripts from \"../../../indexScripts\";\r\nimport contentType from \"../../../contentype.json\";\r\nimport addeventhandler from \"./eventhandler\";\r\nimport buildsettings from \"../../../settings.json\";\r\n\r\nconst settings = (window && window.___settings___) || buildsettings;\r\nconst app = { settings, contentType, addeventhandler };\r\n\r\nif (app.settings.fetchDomainFromUrl) {\r\n  const { protocol, host } = (window && window.location) || {};\r\n  if (protocol === \"https:\" && !app.settings.secure) {\r\n    app.settings.secure = true;\r\n    app.settings.domain = host;\r\n  }\r\n}\r\n\r\naddeventhandler(app, \"app\");\r\nconst S4 = () =>\r\n  // eslint-disable-next-line no-bitwise\r\n  (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\napp.uuid = () => S4() + S4() + S4() + S4() + S4() + S4() + S4() + S4();\r\napp.capFirst = (text) =>\r\n  text && text.substring(0, 1).toUpperCase() + text.substring(1);\r\n\r\nindexScripts(app);\r\n\r\napp.on(\"init\", () => {\r\n  app.inited = true;\r\n});\r\n\r\nexport default () => app;\r\napp.event(\"init\").then(() => app.event(\"start\"));\r\n","import components from './core/components/client/index.js';\nimport connection from './core/connection/client/index.js';\nimport contentType from './core/contentType/client/index.js';\nimport core from './core/core/client/index.js';\nimport database from './core/database/client/index.js';\nimport file from './core/file/client/index.js';\nimport pwa from './core/pwa/client/index.js';\nimport router from './core/router/client/index.js';\nimport session from './core/session/client/index.js';\nimport electron from './module/electron/client/index.js';\n\nexport default function(app) {\n  components(app);\n  connection(app);\n  contentType(app);\n  core(app);\n  database(app);\n  file(app);\n  pwa(app);\n  router(app);\n  session(app);\n  electron(app);\n}\n","/* eslint-disable guard-for-in */\r\nexport default (app) => {\r\n  if (!app.t) app.t = (text) => text;\r\n\r\n  function init() {\r\n    if (!document.body) {\r\n      window.onload = init;\r\n      return;\r\n    }\r\n\r\n    if (app.settings.debug) console.log(app);\r\n\r\n    app.parseFilter = (filter, getValue, path) => {\r\n      if (!filter) return {};\r\n      function insertVal(val) {\r\n        return val.replace(/\\{([a-z_.]+)\\}/gim, (str, p1) => {\r\n          return getValue(p1.replace(\"..\", path));\r\n        });\r\n      }\r\n      const parsedfilter = { $and: [] };\r\n\r\n      for (const item in filter) {\r\n        const oneFilter = {};\r\n        const oneFilterIn = filter[item].and;\r\n        for (const i in oneFilterIn)\r\n          oneFilter[insertVal(oneFilterIn[i][0])] = insertVal(\r\n            oneFilterIn[i][1]\r\n          );\r\n        parsedfilter.$and.push(oneFilter);\r\n      }\r\n      return parsedfilter;\r\n    };\r\n\r\n    app.stateStore = (() => {\r\n      const states = {};\r\n      return {\r\n        set: function (obj, state, type) {\r\n          if (type === \"disabled\") return;\r\n\r\n          const url = window.location.pathname;\r\n          const id = app.domPathId(obj.current);\r\n          if (type === \"independent\") {\r\n            states[id] = state;\r\n            return;\r\n          }\r\n\r\n          if (!states[url]) states[url] = {};\r\n\r\n          states[url][id] = state;\r\n        },\r\n        get: function (obj, type) {\r\n          if (type === \"disabled\") return null;\r\n\r\n          const id = app.domPathId(obj.current);\r\n          if (type === \"independent\") return states[id];\r\n\r\n          const url = window.location.pathname;\r\n\r\n          if (!states[url] || states[url][id] === undefined) return null;\r\n          return states[url][id];\r\n        },\r\n      };\r\n    })();\r\n\r\n    app.domPathId = (element) => {\r\n      if (!element) return null;\r\n      const path = [];\r\n      for (let i = 0; i < 200 && element.parentElement; i++) {\r\n        for (let item = 0; item < element.parentElement.children.length; item++)\r\n          if (element.parentElement.children[item] === element)\r\n            path.unshift(`${item}.${element.tagName}`);\r\n        element = element.parentElement;\r\n      }\r\n      return path.join(\".\");\r\n    };\r\n\r\n    document.addEventListener(\r\n      \"keydown\",\r\n      (e) => {\r\n        if (\r\n          e.keyCode === 83 &&\r\n          (navigator.platform.match(\"Mac\") ? e.metaKey : e.ctrlKey)\r\n        ) {\r\n          e.preventDefault();\r\n          app.event(\"keypressSaveEvent\");\r\n        }\r\n      },\r\n      false\r\n    );\r\n\r\n    app.event(\"loaded\");\r\n  }\r\n\r\n  app.on(\"init\", -1000, init);\r\n};\r\n","export default (app) => {\r\n  app.storage = app.addeventhandler(\r\n    {},\r\n    [\r\n      \"getItem\",\r\n      \"setItem\",\r\n      \"removeItem\",\r\n      \"getItemMem\",\r\n      \"setItemMem\",\r\n      \"removeItemMem\",\r\n      \"getFile\",\r\n      \"setFile\",\r\n      \"removeFile\",\r\n      \"setItemDebounce\",\r\n    ],\r\n    \"storage\"\r\n  );\r\n\r\n  app.storage.on(\"getItem\", async (data) => {\r\n    let val = window.localStorage.getItem(data.id);\r\n\r\n    if (val === `nystemCache${data.id}`) {\r\n      const nystemCache = await caches.open(\"nystem\");\r\n      val = await nystemCache.match(val).then((req) => req.json());\r\n    }\r\n    return {\r\n      ...data,\r\n      value: val && (val[0] === \"[\" || val[0] === \"{\") ? JSON.parse(val) : val,\r\n    };\r\n  });\r\n\r\n  app.storage.on(\"setItem\", async ({ id, value }) => {\r\n    value = typeof value === \"string\" ? value : JSON.stringify(value);\r\n\r\n    try {\r\n      window.localStorage.setItem(id, value);\r\n    } catch (e) {\r\n      const nystemCache = await caches.open(\"nystem\");\r\n      if (e.code !== 22) return;\r\n\r\n      await nystemCache.put(\r\n        `nystemCache${id}`,\r\n        new Response(value, {\r\n          status: 200,\r\n          statusText: \"Dbcache\",\r\n          headers: new Headers({\r\n            \"content-type\": `application/json`,\r\n            date: new Date(),\r\n            etag: \"dbdata\",\r\n          }),\r\n        })\r\n      );\r\n      window.localStorage.setItem(id, `nystemCache${id}`);\r\n    }\r\n  });\r\n\r\n  const timer = {};\r\n  app.storage.on(\"setItemDebounce\", ({ id, value, delay }) => {\r\n    clearTimeout(timer[id]);\r\n    timer[id] = setTimeout(() => {\r\n      delete timer[id];\r\n      app.storage.setItem({ id, value });\r\n    }, delay);\r\n  });\r\n\r\n  app.storage.on(\"removeItem\", ({ id }) => {\r\n    window.localStorage.removeItem(id);\r\n  });\r\n\r\n  const memstore = {};\r\n\r\n  app.storage.on(\"getItemMem\", (data) =>\r\n    Object.assign(data, { value: memstore[data.id] })\r\n  );\r\n\r\n  app.storage.on(\"setItemMem\", ({ id, value }) => {\r\n    memstore[id] = value;\r\n  });\r\n\r\n  app.storage.on(\"removeItemMem\", ({ id }) => {\r\n    delete memstore[id];\r\n  });\r\n  /*\r\n  app.storage.on(\"getFile\", (data) => {});\r\n\r\n  app.storage.on(\"setFile\", ({ id, value }) => {});\r\n\r\n  app.storage.on(\"removeFile\", ({ id }) => {});\r\n  */\r\n};\r\n","export default (app) => {\r\n  if (\"serviceWorker\" in navigator)\r\n    window.addEventListener(\"load\", () => {\r\n      navigator.serviceWorker.register(\"/nystem-service-worker.js\").then(\r\n        (registration) => {\r\n          console.log(\"ServiceWorker registration successful\");\r\n          registration.update();\r\n        },\r\n        (err) => {\r\n          console.log(\"ServiceWorker registration failed: \", err);\r\n        }\r\n      );\r\n    });\r\n\r\n  let deferredPrompt = false;\r\n\r\n  window.addEventListener(\"beforeinstallprompt\", (e) => {\r\n    deferredPrompt = e;\r\n  });\r\n\r\n  app.on(\"canRunAppInstall\", () => ({\r\n    installable: !!deferredPrompt,\r\n  }));\r\n\r\n  app.on(\"runAppInstall\", () => {\r\n    if (!deferredPrompt) return;\r\n\r\n    deferredPrompt.prompt();\r\n\r\n    deferredPrompt.userChoice.then((choiceResult) => {\r\n      if (choiceResult.outcome === \"accepted\")\r\n        console.log(\"User accepted the install prompt\");\r\n      else console.log(\"User dismissed the install prompt\");\r\n    });\r\n  });\r\n\r\n  const regExpVersion = /main\\.([0-9a-f]+)\\.chunk.js/im;\r\n  app.on(\"getAppVersion\", () => ({\r\n    appVersion: (regExpVersion.exec(\r\n      [...document.body.children]\r\n        .map((child) => child.src)\r\n        .find((src) => regExpVersion.test(src))\r\n    ) || [])[1],\r\n  }));\r\n\r\n  app.on(\"clearCacheAndReload\", () => {\r\n    window.localStorage.clear();\r\n    window.caches.delete(\"nystem\").then(() => {\r\n      window.location.reload();\r\n    });\r\n  });\r\n  app.on(\"init\", -100, () => {\r\n    app.connection.on(\"connection\", ({ connected }) => {\r\n      if (!connected) return;\r\n\r\n      app.connection\r\n        .emit({ type: \"getAppVersion\" })\r\n        .then(async ({ appVersion }) => {\r\n          const { appVersion: clientAppVersion } = await app.event(\r\n            \"getAppVersion\"\r\n          );\r\n          console.log(\"At version\", { clientAppVersion, appVersion });\r\n          if (\r\n            !clientAppVersion ||\r\n            !appVersion ||\r\n            clientAppVersion === appVersion\r\n          ) {\r\n            window.localStorage.setItem(\"havereloaded\", \"false\");\r\n            return;\r\n          }\r\n\r\n          if (window.localStorage.getItem(\"havereloaded\") === \"true\") return;\r\n\r\n          window.localStorage.setItem(\"havereloaded\", \"true\");\r\n\r\n          window.caches.delete(\"nystem\").then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n    });\r\n  });\r\n  setTimeout(() => {\r\n    window.localStorage.setItem(\"havereloaded\", \"false\");\r\n  }, 10000);\r\n};\r\n","export default (app) => {\r\n  /* const pathRegexp = function(path, keys, sensitive, strict) {\r\n    if (Object.prototype.toString.call(path) === \"[object RegExp]\") return path;\r\n    if (Array.isArray(path)) path = \"(\" + path.join(\"|\") + \")\";\r\n    path = path\r\n      .concat(strict ? \"\" : \"/?\")\r\n      .replace(/\\/\\(/g, \"(?:/\")\r\n      .replace(/(\\/)?(\\.)?:(\\w+)(?:(\\(.*?\\)))?(\\?)?(\\*)?/g, function(\r\n        _,\r\n        slash,\r\n        format,\r\n        key,\r\n        capture,\r\n        optional,\r\n        star\r\n      ) {\r\n        keys.push({ name: key, optional: !!optional });\r\n        slash = slash || \"\";\r\n        return (\r\n          \"\" +\r\n          (optional ? \"\" : slash) +\r\n          \"(?:\" +\r\n          (optional ? slash : \"\") +\r\n          (format || \"\") +\r\n          (capture || ((format && \"([^/.]+?)\") || \"([^/]+?)\")) +\r\n          \")\" +\r\n          (optional || \"\") +\r\n          (star ? \"(/*)?\" : \"\")\r\n        );\r\n      })\r\n      .replace(/([/.])/g, \"\\\\$1\")\r\n      .replace(/\\* /g, \"(.*)\"); Change * /\r\n    return new RegExp(\"^\" + path + \"$\", sensitive ? \"\" : \"i\");\r\n}; */\r\n\r\n  app.parseURL = (url) => {\r\n    url = url.replace(/^[^/]+:\\/\\/[^/]+/gi, \"\");\r\n    const out = {};\r\n    const hashtag = url.split(\"#\");\r\n    let query = hashtag[0].split(/\\/?\\?/);\r\n    out.path = query[0].split(\"/\");\r\n    out.domain = out.path.shift();\r\n    out.query = {};\r\n    // eslint-disable-next-line prefer-destructuring\r\n    out.hashtag = hashtag[1];\r\n    query = query[1] ? query[1].split(\"&\") : false;\r\n    // eslint-disable-next-line guard-for-in\r\n    for (const i in query) {\r\n      const param = query[i].split(\"=\");\r\n      // eslint-disable-next-line prefer-destructuring\r\n      out.query[param[0]] = param[1];\r\n    }\r\n    return out;\r\n  };\r\n\r\n  /* app.on(\"loaded\", () => {\r\n    if (app.settings.extension) {\r\n      const to = \"/\";\r\n      if (\r\n        window.localStorage[\"lastpos\"] &&\r\n        window.localStorage[\"lastpos\"] !== \"/index.html\"\r\n      )\r\n        to = window.localStorage[\"lastpos\"];\r\n      window.history.pushState({}, \"Site\", to);\r\n      app.router.setState();\r\n    }\r\n  }); */\r\n};\r\n","import sessionM from \"./session\";\r\n\r\nexport default app => {\r\n  sessionM(app);\r\n\r\n  const addContents = token => ({\r\n    method: \"POST\",\r\n    body: JSON.stringify({ token })\r\n  });\r\n\r\n  app.on(\"login\", -100, ({ token }) => {\r\n    if (!token) return;\r\n    fetch(\"/login\", addContents(token));\r\n  });\r\n\r\n  app.on(\"logout\", -100, ({ token }) => {\r\n    if (!token) return;\r\n    fetch(\"/logout\", addContents(token));\r\n  });\r\n};\r\n"],"sourceRoot":""}