{
	"machinename": "remoteServer",
	"name": "remoteServer",
	"storage": "data",
	"item": [
		{
			"type": "text",
			"id": "name",
			"text": "Name"
		},
		{
			"type": "reference",
			"id": "server",
			"text": "Server",
			"source": "server",
			"limit": "1"
		},
		{
			"id": "url",
			"text": "Site url",
			"mandatory": false
		},
		{
			"type": "text",
			"id": "host",
			"text": "Host"
		},
		{
			"id": "username",
			"text": "Username",
			"mandatory": false
		},
		{
			"type": "password",
			"id": "password",
			"text": "Password",
			"length": "5"
		},
		{
			"type": "boolean",
			"id": "ssh",
			"text": "Ssh"
		},
		{
			"type": "text",
			"id": "sshName",
			"text": "Other ssh name"
		},
		{
			"type": "password",
			"id": "sshPassword",
			"text": "Password"
		},
		{
			"type": "text",
			"id": "siteFolder",
			"text": "Site folder"
		},
		{
			"type": "text",
			"id": "gitFolder",
			"text": "Git folder"
		},
		{
			"type": "password",
			"id": "repoPassword",
			"text": "Repo password"
		},
		{
			"type": "text",
			"id": "homeFolder",
			"text": "Home folder"
		},
		{
			"type": "text",
			"id": "log",
			"text": "Log"
		},
		{
			"type": "text",
			"id": "database",
			"text": "Database name"
		},
		{
			"type": "text",
			"id": "nodeService",
			"text": "Node service name (If not default)"
		},
		{
			"type": "boolean",
			"id": "withoutSudo",
			"text": "Run command without sudo"
		}
	],
	"views": [
		{
			"name": "edit",
			"noFetch": false,
			"format": "view",
			"item": [
				{
					"category": "view",
					"type": "viewInView",
					"contentType": "server",
					"view": "leftMenu",
					"viewId": "{server}",
					"className": [
						"col-sm-2"
					]
				},
				{
					"category": "view",
					"type": "viewInView",
					"viewId": "{_id}",
					"contentType": "remoteServer",
					"view": "input",
					"className": [
						"col-sm-8"
					]
				},
				{
					"category": "view",
					"type": "viewInView",
					"className": [
						"col-sm-2"
					],
					"viewId": "{_id}",
					"contentType": "remoteServer",
					"view": "rightMenu"
				}
			]
		},
		{
			"name": "eventlog",
			"format": "view",
			"item": [
				{
					"category": "view",
					"type": "viewInView",
					"contentType": "server",
					"view": "leftMenu",
					"viewId": "{server}",
					"className": [
						"col-sm-2"
					]
				},
				{
					"category": "view",
					"type": "bootstrap",
					"item": [
						{
							"category": "view",
							"type": "remoteServer",
							"format": "log",
							"event": "log"
						}
					],
					"className": [
						"col-sm-8"
					]
				},
				{
					"category": "view",
					"type": "viewInView",
					"viewId": "{_id}",
					"contentType": "remoteServer",
					"view": "rightMenu",
					"className": [
						"col-sm-2"
					]
				}
			]
		},
		{
			"name": "git",
			"format": "view",
			"item": [
				{
					"category": "view",
					"type": "viewInView",
					"contentType": "server",
					"view": "leftMenu",
					"viewId": "{server}",
					"className": [
						"col-sm-2"
					]
				},
				{
					"category": "view",
					"type": "bootstrap",
					"className": [
						"col-sm-8"
					],
					"item": [
						{
							"category": "view",
							"type": "remoteServer",
							"text": "Pull",
							"confirmText": "Sure?",
							"workingText": "Git pull...",
							"event": "git.pull",
							"btnType": "primary",
							"btnTypeWorking": "info",
							"btnTypeConfirm": "warning",
							"className": [
								"pull-right",
								"col-md-2"
							],
							"confirm": true
						},
						{
							"category": "view",
							"type": "remoteServer",
							"btnType": "default",
							"btnTypeWorking": "info",
							"btnTypeConfirm": "warning",
							"text": "Fetch",
							"confirmText": "Sure?",
							"workingText": "Git fetch...",
							"event": "git.fetch",
							"className": [
								"pull-right",
								"col-md-2"
							],
							"confirm": true
						},
						{
							"category": "view",
							"type": "remoteServer",
							"text": "Clean",
							"confirmText": "Sure?",
							"workingText": "Git clean...",
							"event": "git.clean",
							"btnType": "default",
							"btnTypeWorking": "info",
							"btnTypeConfirm": "warning",
							"className": [
								"col-md-2",
								"pull-right"
							],
							"confirm": true
						},
						{
							"category": "view",
							"type": "remoteServer",
							"text": "Reset",
							"confirmText": "Sure?",
							"workingText": "Git reset...",
							"event": "git.reset",
							"btnType": "default",
							"btnTypeWorking": "info",
							"btnTypeConfirm": "warning",
							"className": [
								"col-md-2",
								"pull-right"
							],
							"confirm": true
						},
						{
							"category": "view",
							"type": "viewText",
							"text": "Git",
							"renderAs": "h3"
						},
						{
							"category": "view",
							"type": "remoteServer",
							"format": "git"
						},
						{
							"category": "view",
							"type": "remoteServer",
							"format": "logEvent",
							"event": "lastRemoteLog",
							"height": "300",
							"clearOnEvent": true
						}
					]
				},
				{
					"category": "view",
					"type": "viewInView",
					"viewId": "{_id}",
					"contentType": "remoteServer",
					"view": "rightMenu",
					"className": [
						"col-sm-2"
					]
				}
			]
		},
		{
			"name": "inServerMenu",
			"format": "list",
			"item": [
				{
					"category": "view",
					"type": "viewButton",
					"format": "newItemWithVal",
					"contentType": "remoteServer",
					"goToFormat": "edit",
					"insertVal": [
						[
							"server",
							"{_id}"
						],
						[
							"name",
							"New remote server"
						]
					],
					"className": [
						"pull-right"
					]
				},
				{
					"category": "view",
					"type": "viewText",
					"text": "Remotes",
					"renderAs": "h4"
				},
				{
					"category": "view",
					"type": "viewList",
					"autoupdate": true,
					"renderFormat": "list",
					"item": [
						{
							"category": "contentTypeField",
							"type": "text",
							"id": "name",
							"format": "linkWidthMatch",
							"toFormat": "view",
							"match": [
								"/remoteServer/*/{_id}"
							],
							"noWrapper": true
						}
					],
					"sortby": {
						"id": "name",
						"text": "name"
					},
					"className": [
						"nav",
						"nav-tabs",
						"tabs-left"
					],
					"filter": [
						{
							"and": [
								[
									"server",
									"{_id}"
								]
							]
						}
					]
				}
			],
			"noFetch": true
		},
		{
			"name": "input",
			"focus": true,
			"format": "input",
			"item": [
				{
					"category": "contentTypeField",
					"type": "text",
					"id": "name"
				},
				{
					"category": "contentTypeField",
					"type": "",
					"id": "url"
				},
				{
					"category": "contentTypeField",
					"type": "",
					"id": "host"
				},
				{
					"category": "contentTypeField",
					"type": "",
					"id": "username"
				},
				{
					"category": "contentTypeField",
					"type": "password",
					"id": "password"
				},
				{
					"category": "contentTypeField",
					"type": "boolean",
					"id": "ssh"
				},
				{
					"category": "view",
					"type": "conditional",
					"condition": [
						[
							"ssh",
							"true"
						]
					],
					"item": [
						{
							"category": "view",
							"type": "bootstrap",
							"format": "panel",
							"header": [
								{
									"category": "view",
									"type": "viewText",
									"text": "Ssh"
								}
							],
							"item": [
								{
									"category": "contentTypeField",
									"type": "text",
									"id": "sshName",
									"text": "Alternative shh"
								},
								{
									"category": "contentTypeField",
									"type": "password",
									"id": "sshPassword"
								}
							],
							"expandable": true,
							"expanded": true,
							"icon": true,
							"onClickExpand": true
						}
					]
				},
				{
					"category": "contentTypeField",
					"type": "text",
					"id": "siteFolder"
				},
				{
					"category": "view",
					"type": "bootstrap",
					"item": [
						{
							"category": "contentTypeField",
							"type": "text",
							"id": "gitFolder"
						},
						{
							"category": "contentTypeField",
							"type": "password",
							"id": "repoPassword"
						}
					],
					"format": "panel",
					"header": [
						{
							"category": "view",
							"type": "viewText",
							"text": "Git"
						}
					],
					"expandable": true,
					"expanded": true,
					"icon": true,
					"onClickExpand": true
				},
				{
					"category": "contentTypeField",
					"type": "text",
					"id": "homeFolder"
				},
				{
					"category": "contentTypeField",
					"type": "text",
					"id": "log"
				},
				{
					"category": "contentTypeField",
					"type": "boolean",
					"id": "withoutSudo"
				},
				{
					"category": "contentTypeField",
					"type": "text",
					"id": "nodeService"
				},
				{
					"category": "contentTypeField",
					"type": "text",
					"id": "database"
				},
				{
					"category": "view",
					"type": "viewButton"
				}
			]
		},
		{
			"name": "list",
			"autoUpdate": false,
			"item": [
				{
					"category": "view",
					"type": "viewText",
					"text": "Remote servers",
					"renderAs": "h3"
				},
				{
					"category": "view",
					"type": "viewList",
					"sortby": {
						"id": "name",
						"text": "name"
					},
					"item": [
						{
							"category": "contentTypeField",
							"type": "text",
							"id": "name",
							"format": "link",
							"toFormat": "input",
							"renderAs": "p"
						},
						{
							"category": "contentTypeField",
							"type": "reference",
							"id": "server",
							"format": "link",
							"toFormat": "input",
							"renderAs": "p"
						},
						{
							"category": "contentTypeField",
							"type": "",
							"id": "url",
							"format": "link",
							"toFormat": "input",
							"renderAs": "p"
						},
						{
							"category": "contentTypeField",
							"type": "",
							"id": "host",
							"format": "link",
							"toFormat": "input",
							"renderAs": "p"
						},
						{
							"category": "contentTypeField",
							"type": "",
							"id": "username",
							"format": "link",
							"toFormat": "input",
							"renderAs": "p"
						},
						{
							"category": "contentTypeField",
							"type": "",
							"id": "password",
							"format": "link",
							"toFormat": "input",
							"renderAs": "p"
						},
						{
							"category": "contentTypeField",
							"type": "text",
							"id": "siteFolder",
							"format": "link",
							"toFormat": "input",
							"renderAs": "p"
						},
						{
							"category": "contentTypeField",
							"type": "text",
							"id": "gitFolder",
							"format": "link",
							"toFormat": "input",
							"renderAs": "p"
						},
						{
							"category": "contentTypeField",
							"type": "text",
							"id": "homeFolder",
							"format": "link",
							"toFormat": "input",
							"renderAs": "p"
						},
						{
							"category": "contentTypeField",
							"type": "text",
							"id": "log",
							"format": "link",
							"toFormat": "input",
							"renderAs": "p"
						}
					]
				}
			],
			"format": "list"
		},
		{
			"name": "log",
			"format": "view",
			"item": [
				{
					"category": "view",
					"type": "viewInView",
					"contentType": "server",
					"view": "leftMenu",
					"viewId": "{server}",
					"className": [
						"col-sm-2"
					]
				},
				{
					"category": "view",
					"type": "bootstrap",
					"className": [
						"col-sm-8"
					],
					"item": [
						{
							"category": "view",
							"type": "remoteServer",
							"text": "Node log",
							"workingText": "Node log",
							"event": "log.node",
							"btnType": "default",
							"btnTypeWorking": "warning",
							"runOnLoad": true,
							"lastText": "Node log",
							"doneText": "Node log",
							"btnTypeDone": "success",
							"btnTypeLast": "primary",
							"ifLastRunEverySec": "10"
						},
						{
							"category": "view",
							"type": "remoteServer",
							"text": "Syslog",
							"workingText": "Syslog",
							"event": "log.sys",
							"btnType": "default",
							"btnTypeWorking": "warning",
							"lastText": "Syslog",
							"doneText": "Syslog",
							"btnTypeDone": "success",
							"btnTypeLast": "primary",
							"ifLastRunEverySec": "10"
						},
						{
							"category": "view",
							"type": "remoteServer",
							"format": "logEvent",
							"height": ""
						}
					]
				},
				{
					"category": "view",
					"type": "viewInView",
					"viewId": "{_id}",
					"contentType": "remoteServer",
					"view": "rightMenu",
					"className": [
						"col-sm-2"
					]
				}
			]
		},
		{
			"name": "rightMenu",
			"format": "view",
			"autoUpdate": false,
			"item": [
				{
					"category": "contentTypeField",
					"type": "text",
					"id": "name",
					"renderAs": "h4"
				},
				{
					"category": "view",
					"type": "bootstrap",
					"format": "verticalTab",
					"item": [
						{
							"category": "view",
							"type": "viewLink",
							"format": "dynamicLink",
							"href": "/remoteServer/view/{_id}",
							"text": "View",
							"match": "",
							"renderType": "list"
						},
						{
							"category": "view",
							"type": "viewLink",
							"text": "Git",
							"renderType": "list",
							"view": "git",
							"contentType": "remoteServer",
							"format": "dynamicLink",
							"href": "/remoteServer/git/{_id}",
							"match": ""
						},
						{
							"category": "view",
							"type": "viewLink",
							"text": "Log",
							"renderType": "list",
							"view": "git",
							"contentType": "remoteServer",
							"format": "dynamicLink",
							"href": "/remoteServer/log/{_id}",
							"match": ""
						},
						{
							"category": "view",
							"type": "viewLink",
							"text": "EventLog",
							"renderType": "list",
							"view": "git",
							"contentType": "remoteServer",
							"format": "dynamicLink",
							"href": "/remoteServer/eventlog/{_id}",
							"match": ""
						},
						{
							"category": "view",
							"type": "viewLink",
							"format": "dynamicLink",
							"href": "/remoteServer/edit/{_id}",
							"text": "Settings",
							"match": "",
							"renderType": "list"
						}
					],
					"className": [
						"nav",
						"nav-tabs",
						"tabs-right"
					]
				}
			]
		},
		{
			"name": "syslog",
			"format": "view",
			"item": [
				{
					"category": "view",
					"type": "viewInView",
					"contentType": "server",
					"view": "leftMenu",
					"viewId": "{server}",
					"className": [
						"col-sm-2"
					]
				},
				{
					"category": "view",
					"type": "bootstrap",
					"item": [
						{
							"category": "view",
							"type": "remoteServer",
							"format": "log",
							"event": "syslog"
						}
					],
					"className": [
						"col-sm-8"
					]
				},
				{
					"category": "view",
					"type": "viewInView",
					"viewId": "{_id}",
					"contentType": "remoteServer",
					"view": "rightMenu",
					"className": [
						"col-sm-2"
					]
				}
			]
		},
		{
			"name": "view",
			"format": "view",
			"item": [
				{
					"category": "view",
					"type": "viewInView",
					"contentType": "server",
					"view": "leftMenu",
					"viewId": "{server}",
					"className": [
						"col-sm-2"
					]
				},
				{
					"category": "view",
					"type": "bootstrap",
					"item": [
						{
							"category": "contentTypeField",
							"type": "text",
							"id": "name",
							"renderAs": "h3"
						},
						{
							"category": "view",
							"type": "blankLink",
							"field": "url"
						},
						{
							"category": "contentTypeField",
							"type": "text",
							"id": "host",
							"renderAs": "p"
						},
						{
							"category": "view",
							"type": "bootstrap",
							"item": [
								{
									"category": "view",
									"type": "remoteServer",
									"text": "Install node service",
									"event": "node.installService",
									"btnType": "default",
									"className": [
										"col-md-3"
									],
									"confirmText": "Are you sure?",
									"workingText": "Installing service",
									"confirm": true,
									"btnTypeWorking": "info",
									"btnTypeConfirm": "warning"
								},
								{
									"category": "view",
									"type": "remoteServer",
									"format": "view",
									"event": "node.restart",
									"text": "Restart node",
									"btnType": "primary",
									"confirm": true,
									"confirmText": "Are you sure?",
									"workingText": "Restaring",
									"btnTypeWorking": "info",
									"btnTypeConfirm": "warning",
									"className": [
										"col-md-2"
									]
								},
								{
									"category": "view",
									"type": "remoteServer",
									"text": "Stop node",
									"confirmText": "Are you sure?",
									"workingText": "Stoppning...",
									"event": "node.stop",
									"btnType": "default",
									"btnTypeWorking": "warning",
									"btnTypeConfirm": "danger",
									"confirm": true
								}
							],
							"row": true,
							"className": [
								"col-md-12"
							]
						},
						{
							"category": "view",
							"type": "remoteServer",
							"format": "logEvent",
							"height": "300",
							"className": [
								""
							]
						}
					],
					"className": [
						"col-sm-8"
					]
				},
				{
					"category": "view",
					"type": "viewInView",
					"contentType": "remoteServer",
					"view": "rightMenu",
					"viewId": "{_id}",
					"className": [
						"col-sm-2"
					]
				}
			]
		}
	]
}